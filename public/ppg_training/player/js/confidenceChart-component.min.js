(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1253:function(e,t,n){"use strict";const{registerComponent:o}=n(4);o("confidenceChart",{component:n(1829),mapStateToProps:n(1830)})},1370:function(e,t,n){"use strict";const o=n(7);e.exports=function(e){return o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1371:function(e,t,n){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:o}=e;return!0===o&&!0===n._isReady&&!0!==n[t]}},1372:function(e,t,n){"use strict";e.exports=function(e,t,n,o,r){o&&o.props&&o.props.component?(t.top&&(o.isInviewTop=!0),t.bottom&&(o.isInviewBottom=!0),o.isInviewTop&&o.isInviewBottom&&r&&r(o.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1388:function(e,t,n){"use strict";var o=n(30)(n(1444));e.exports=function(e,t=new Date){return"string"==typeof t&&(t=new Date(t)),(0,o.default)(t,function(e){return e.includes("DD")&&(e=e.replace("DD","dd")),e.includes("YYYY")&&(e=e.replace("YYYY","yyyy")),e}(e))}},1434:function(e,t,n){var o=n(148);e.exports=function(e,t,n){for(var r=-1,s=e.length;++r<s;){var i=e[r],c=t(i);if(null!=c&&(void 0===a?c==c&&!o(c):n(c,a)))var a=c,d=i}return d}},1471:function(e,t){e.exports=function(e,t){return e>t}},1829:function(e,t,n){"use strict";(function(t){const o=n(31),r=n(8),s=n(32),i=n(2),c=n(1),a=n(0),{connect:d}=n(6),l=n(7),p=n(24),m=n(1370),h=n(140),u=n(1371),f=n(1372),{Component:v}=n(468),w=n(62),{loadPdfMake:_}=n(328),C=n(1388),b=a.lazy(()=>Promise.all([n.e(108),n.e(76)]).then(n.t.bind(null,1499,7)).then(e=>Promise.resolve({default:e.Radar}))),g=i({displayName:"ConfidenceChart",propTypes:{component:c.object.isRequired,confidenceSliders:c.object,chartItems:c.array,setComponentAsReady:c.func.isRequired,setComponentAsComplete:c.func.isRequired,loadPdfMake:c.func.isRequired,theme:c.object.isRequired,styles:c.object,device:c.object},componentDidMount(){const{component:e,loadPdfMake:t}=this.props;this.props.setComponentAsReady(e._id),e._canDownload&&t()},UNSAFE_componentWillReceiveProps(e){const{component:t,loadPdfMake:n}=this.props;!t._canDownload&&e.component._canDownload&&n()},onVisibilityChange(...e){f(...e,this,this.props.setComponentAsComplete)},onDownloadClicked(){const{downloadTitleText:e,_downloadTitleTextSize:n,_downloadTitleTextAlignment:o,downloadBodyText:r,_downloadBodyTextSize:s,_downloadBodyTextAlignment:i,downloadDateLabel:c,_downloadDateLabelTextSize:a,_downloadDateLabelTextAlignment:d,downloadFileName:l}=this.props.component,p=t(".ev-chart-"+this.props.component._id).get(0);if(!p)return;const m=p.toDataURL(),h=[];e&&h.push({text:e,fontSize:n||32,alignment:o||"center",margin:[0,0,0,20]}),r&&h.push({text:r,fontSize:s||18,alignment:i||"center",margin:[0,0,0,20]}),c&&h.push({text:`${c} ${C("DD/MM/YYYY")}`,fontSize:a||14,alignment:d||"center",margin:[0,0,0,20]}),h.push({image:m,width:350,alignment:"center"});const u=window.pdfMake.createPdf({content:h});if(this.props.device.touch&&!this.props.device.isWindowsTouchScreen)return u.open();u.download((l||"download")+".pdf")},renderRadarChart(){const e=o(this.props.chartItems,e=>e.itemLabel),t=o(this.props.chartItems,e=>e.score),n=h(this.props.theme._componentItem._variables._componentItemBackgroundColor["@component-item-background-color"],this.props.theme._swatches);let s=h(r(this.props.component,"_chartLabelColor","transparent"),this.props.theme._swatches);s="transparent"===s?"#666666":s;let i=h(r(this.props.component,"_chartGridLinesColor","transparent"),this.props.theme._swatches);i="transparent"===i?"rgba(0,0,0,0.1)":i;const c={labels:e,datasets:[{data:t,backgroundColor:"rgba(0,0,0,0.3)",borderColor:n,borderWidth:4,scaleSteps:1,scaleStartValue:0,pointRadius:6,pointBorderWidth:3,pointBackgroundColor:n}]},d={scale:{ticks:{beginAtZero:!0,stepSize:1,fontColor:s},pointLabels:{fontSize:11,fontColor:s},gridLines:{color:i},angleLines:{color:i}},maintainAspectRatio:!1,legend:{display:!1}};return r(this.props.component,"_useCustomMaxChartValue",!1)&&(d.scale.ticks.max=r(this.props.component,"_customMaxChartValueNumber",10)),a.createElement(a.Suspense,{fallback:a.createElement("div",null)},a.createElement(b,{className:"ev-chart-"+this.props.component._id,data:c,options:d,pointStyle:"circle"}))},renderConfidenceSliderItemCount(e){const t=s(e._confidenceSliders,e=>!!this.props.confidenceSliders[e]);return o(t,e=>{const t=this.props.confidenceSliders[e]._isComplete;return a.createElement("div",{key:e,className:l("ev-confidence-chart-count-chart-tag-chart-item",{"ev-is-complete":t})})})},renderChartItems(){const{component:e}=this.props,t=e.displayTitle?this.context+1:this.context;return o(e._chartItems,e=>a.createElement("div",{key:e._id,className:"ev-confidence-chart-count-chart-tag"},a.createElement("div",{className:"ev-confidence-chart-count-chart-tag-inner"},a.createElement(p,{element:"h"+t,className:"ev-confidence-chart-count-chart-tag-name",html:e.itemLabel}),a.createElement("div",{className:"ev-confidence-chart-count-chart-tag-chart"},this.renderConfidenceSliderItemCount(e)))))},renderBreakDown(){if(!this.props.component._shouldHideBreakdown)return a.createElement("div",{className:"ev-confidence-chart-overview-container-breakdown"},this.renderChartItems())},renderDownloadButton(){const{_canDownload:e,downloadButtonText:t}=this.props.component;if(e)return a.createElement("button",{className:"ev-button",onClick:this.onDownloadClicked},t||"Download")},render(){const{props:e}=this;return a.createElement(v,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e,"_isComplete"),onVisibilityChange:this.onVisibilityChange},a.createElement("div",{className:m(e.component)},a.createElement("div",{className:l("ev-confidence-chart-overview-container-content",e.component._shouldHideBreakdown&&"ev-is-chart-"+r(e.component,"_chartAlignment","left"))},a.createElement("div",{className:"ev-confidence-chart-overview-container-radar"},this.renderRadarChart()),this.renderBreakDown()),this.renderDownloadButton()))}});g.contextType=w,e.exports=d(({device:e})=>({device:e}),{loadPdfMake:_})(g)}).call(this,n(29))},1830:function(e,t,n){"use strict";const o=n(31),r=n(1831),s=n(215);e.exports=(e,{_useHighestValue:t,_chartItems:n})=>{const i={};return{chartItems:o(n,n=>{let c=0,a=0;const d=[];o(n._confidenceSliders,n=>{const o=s(n,e);if(o){if(t){const e=o._isComplete?o._selectedAnswer:0;d.push(e)}else o._isComplete&&(c+=o._selectedAnswer,a+=1);i[n]=o}});let l=0;return t?l=r(d):c&&(l=Math.round(c/a)),{...n,score:l}}),confidenceSliders:i}}},1831:function(e,t,n){var o=n(1434),r=n(1471),s=n(147);e.exports=function(e){return e&&e.length?o(e,s,r):void 0}}}]);