(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1292:function(e,t,s){"use strict";const{registerComponent:n}=s(4),o=s(2097),i=s(2101),{socialMcqItemClicked:r}=s(1581);n("socialMCQ",{component:o,actions:{socialMcqItemClicked:r},reducer:i,mapStateToProps:s(2102),trackingMap:s(2103)})},1370:function(e,t,s){"use strict";const n=s(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1380:function(e,t,s){var n=s(88),o=s(49);e.exports=function(e){return"number"==typeof e||o(e)&&"[object Number]"==n(e)}},1396:function(e,t,s){var n=s(1380);e.exports=function(e){return n(e)&&e!=+e}},1581:function(e,t,s){"use strict";t.SOCIALMCQ_ITEM_CLICKED="SOCIALMCQ_ITEM_CLICKED",t.socialMcqItemClicked=e=>({type:t.SOCIALMCQ_ITEM_CLICKED,payload:e})},2097:function(e,t,s){"use strict";const n=s(31),o=s(18),i=s(2),r=s(1),l=s(0),c=s(7),{Component:a}=s(468),d=s(1370),u=s(2098),m=s(2099),p=i({displayName:"SocialMCQ",propTypes:{component:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsStarted:r.func.isRequired,setComponentAsComplete:r.func.isRequired,socialMcqItemClicked:r.func.isRequired,buttons:r.object.isRequired,articleStyle:r.string,theme:r.object.isRequired,isPageReady:r.bool,styles:r.any},componentDidMount:function(){const{component:e,setComponentAsReady:t}=this.props;t(e._id)},getButtonSettings:function(){const{articleStyle:e,theme:t}=this.props;let s=t._button._settings;if(e&&"none"!==e){s=t._articleStyles[e]._elements._button._settings}return s},getButtonsClassName:function(e){const{buttons:t}=this.props;return c("ev-buttons",{"ev-buttons-full":e._isFullLayout,"ev-buttons-hide-marking-icon":e._shouldHideMarkingIcon,"ev-buttons-hide-show-feedback":t._showFeedback&&t._showFeedback._isDisabled,"ev-buttons-action-is-right":e._isActionButtonOnRight,"ev-buttons-individual-styles":e._hasIndividualButtonStyles})},onItemClicked:function(e){const{props:t}=this;t.component._hasStarted&&t.setComponentAsStarted(t.component._id),t.socialMcqItemClicked({componentId:t.component._id,itemId:e})},onActionButtonClicked:function(e){e.preventDefault();const{component:t,setComponentAsComplete:s}=this.props;if(o(t._items,{_isSelected:!0}))return s(t._id,{_isEnabled:!1})},onVisibilityChange:function(e,{top:t,bottom:s}){const{props:n}=this;t&&(this.isInviewTop=!0),s&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&n.setComponentAsViewed(n.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},renderItems:function(){const{component:e,theme:t}=this.props;return n(e._items,(s,n)=>l.createElement(u,{key:s._id,index:n,item:s,id:`${e._id} ${n}`,name:e._id,isComplete:e._isComplete,isEnabled:!e._isComplete,onItemClicked:this.onItemClicked,swatches:t._swatches}))},renderButtons:function(){const{buttons:e,component:t}=this.props,s=this.getButtonSettings();return l.createElement("div",{className:this.getButtonsClassName(s)},l.createElement("div",{className:"ev-buttons-cluster-bottom ev-clearfix"},l.createElement("button",{className:"ev-button ev-buttons-action ev-primary",onClick:this.onActionButtonClicked,"aria-label":e._submit.ariaLabel,disabled:t._isComplete},e._submit.buttonText)))},renderResultsGraph:function(){const{component:e,theme:t,articleStyle:s}=this.props;let n=t._componentItem._variables._componentItemBackgroundColor["@component-item-background-color"];if(s&&"none"!==s){n=t._articleStyles[s]._elements._componentItem._variables._componentItemBackgroundColor["@component-item-background-color"]}if(e._isComplete)return l.createElement(m,{defaultColor:n,items:e._items,selectedItem:o(e._items,{_isSelected:!0}),isLabelFullWidth:e._isLabelFullWidth,resultsLabelText:e.resultsLabelText,shouldDisplayLabelAsText:e._shouldDisplayLabelAsText,swatches:t._swatches})},render:function(){const{props:e}=this;return l.createElement(a,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},l.createElement("div",{className:d(e.component)},l.createElement("div",{className:"ev-socialMCQ-items"},this.renderItems()),this.renderButtons(),this.renderResultsGraph()))}});e.exports=p},2098:function(e,t,s){"use strict";const n=s(2),o=s(1),i=s(0),r=s(7),l=s(140),c=s(24),a=n({displayName:"SocialMcqItem",propTypes:{id:o.string.isRequired,name:o.string.isRequired,isEnabled:o.bool,item:o.object.isRequired,onItemClicked:o.func.isRequired,swatches:o.object},onChange:function(){this.props.onItemClicked(this.props.item._id)},getLabelStyle:function(){const{item:e,swatches:t}=this.props,s={};return e._backgroundColor&&"transparent"!==e._backgroundColor&&(s.backgroundColor=l(e._backgroundColor,t),s.borderColor=l(e._backgroundColor,t)),e._textColor&&"transparent"!==e._textColor&&(s.color=l(e._textColor,t)),s},renderSelectIcon:function(){const{props:e}=this,t=r("ev-socialMCQ-item-icon ev-icon",{"ev-icon-radio-button":e.item._isSelected,"ev-icon-circle":!e.item._isSelected});return i.createElement("div",{className:t})},render:function(){const{props:e}=this;return i.createElement("div",{className:"ev-socialMCQ-item",style:{pointerEvents:e.isEnabled?"all":"none"}},i.createElement("input",{id:e.id,value:e.id,name:e.name,type:"radio",checked:e.item._isSelected||!1,onChange:this.onChange,disabled:!1===e.isEnabled}),i.createElement("label",{htmlFor:e.id,style:this.getLabelStyle()},i.createElement("div",{className:"ev-socialMCQ-item-state"},this.renderSelectIcon(),i.createElement("span",{className:"ev-socialMCQ-item-prefix"},e.item.option)),i.createElement(c,{element:"span",className:"ev-socialMCQ-item-inner",html:e.item.text})))}});e.exports=a},2099:function(e,t,s){"use strict";const n=s(11),o=s(308),i=s(1396),r=s(2),l=s(0),c=s(7),a=s(33),d=s(140),u=s(2100),m=l.lazy(()=>Promise.all([s.e(108),s.e(76)]).then(s.t.bind(null,1499,7)).then(e=>Promise.resolve({default:e.Doughnut}))),p=r({displayName:"SocialMCQResultsGraph",getInitialState:function(){return{data:this.getData()}},getData:function(){const{items:e,selectedItem:t,defaultColor:s,swatches:r}=this.props,l={labels:[],datasets:[]},c={data:[],backgroundColor:[],hoverBackgroundColor:[]};return n(e,e=>{let n=e._mockResult;(o(n)||i(n)||n<0)&&(n=0),e._id===t._id&&(n+=1);const a=e.option||"",u="transparent"!==e._backgroundColor?d(e._backgroundColor,r):d(s,r);l.labels.push(a),c.data.push(n),c.backgroundColor.push(u),c.hoverBackgroundColor.push(u)}),l.datasets.push(c),l},renderResultsLabel:function(){const{resultsLabelText:e,shouldDisplayLabelAsText:t}=this.props;if(e)return t?l.createElement(a,{className:"ev-socialMCQ-results-label ev-component-body",innerClassName:"ev-component-body-inner",body:e}):l.createElement(a,{className:c("ev-socialMCQ-results-label ev-label",{"ev-is-full-width":this.props.isLabelFullWidth}),body:e})},renderDoughnut:function(){const{data:e}=this.state;return l.createElement("div",{className:"ev-socialMCQ-dougnut-container",style:{height:"250px",width:"250px"}},l.createElement(l.Suspense,{fallback:l.createElement("div",null)},l.createElement(m,{data:e,options:{maintainAspectRatio:!1,legend:{display:!1}}})))},renderLegend:function(){const{items:e,defaultColor:t,swatches:s}=this.props,n=e.map(e=>({color:"transparent"!==e._backgroundColor?d(e._backgroundColor,s):d(t,s),label:e.option||""}));return l.createElement(u,{items:n})},render:function(){return l.createElement("div",{className:"ev-socialMCQ-results-graph"},this.renderResultsLabel(),this.renderDoughnut(),this.renderLegend())}});e.exports=p},2100:function(e,t,s){"use strict";const n=s(2),o=s(0),i=n({displayName:"SocialMCQLegend",renderItems:function(){return this.props.items.map((e,t)=>o.createElement("div",{className:"ev-socialMCQ-legend-item",key:t},o.createElement("div",{className:"ev-socialMCQ-legend-item-color",style:{backgroundColor:e.color}}),o.createElement("div",{className:"ev-socialMCQ-legend-item-text",style:{color:e.color}},e.label)))},render:function(){return o.createElement("div",{className:"ev-socialMCQ-legend"},this.renderItems())}});e.exports=i},2101:function(e,t,s){"use strict";const n=s(31),{SOCIALMCQ_ITEM_CLICKED:o}=s(1581);e.exports=(e,t)=>{switch(t.type){case o:return{...e,_items:n(e._items,e=>e._id!==t.payload.itemId||e._isSelected?{...e,_isSelected:!1}:{...e,_isSelected:!0})};default:return e}}},2102:function(e,t,s){"use strict";const n=s(78);e.exports=(e,t)=>({articleStyle:n(e,t,"article")._classes,buttons:e.course._buttons})},2103:function(e,t,s){"use strict";const n=s(480);e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},text:{fieldKey:"text",shouldRestore:!1,type:"Function",mapCallback:function(e,t){return"string"==typeof(null==t?void 0:t.text)?n(t.text):""}},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0}}}}}}]);