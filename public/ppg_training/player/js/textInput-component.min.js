(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1300:function(e,t,n){"use strict";const{registerComponent:i}=n(4),o=n(2144),s=n(2146),{textInputValueChanged:r}=n(1588);i("textInput",{component:o,actions:{textInputValueChanged:r},reducer:s,trackingMap:n(2147)})},1370:function(e,t,n){"use strict";const i=n(7);e.exports=function(e){return i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1376:function(e,t,n){"use strict";const{store:i}=n(4),o=n(170);function s(e,t,n){const s=e._feedback[n],r=s&&o(s.src,s.srcAdvanced);if(t&&!r){return i.getState().course._globals._feedbackText[n]}return r?s:null}function r(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?i.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:s(e,t,"_correctGraphic"),feedbackNavigation:r(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,o=i.getState().course._globals._feedbackText;if(0===e._attemptsLeft){return{feedbackMessage:(n?o.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrect")}}return{feedbackMessage:(n?o.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,o=i.getState().course._globals._feedbackText;if(0===e._attemptsLeft||!t.notFinal&&!n||!o.incorrectNotFinalFeedback&&n){return{feedbackMessage:(n?o.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_incorrectFinalGraphic"),feedbackNavigation:r(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}}return{feedbackMessage:(n?o.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:r(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},1588:function(e,t,n){"use strict";t.TEXT_INPUT_VALUE_CHANGED="TEXT_INPUT_VALUE_CHANGED",t.textInputValueChanged=(e,n,i)=>({type:t.TEXT_INPUT_VALUE_CHANGED,payload:{componentId:e,itemId:n,value:i}})},2144:function(e,t,n){"use strict";const i=n(31),o=n(2),s=n(1),r=n(0),c=n(7),{Component:a}=n(468),u=n(1370),l=n(1376),d=n(2145),p=o({displayName:"TextInput",propTypes:{component:s.object.isRequired,submitQuestion:s.func.isRequired,actionButtonClicked:s.func.isRequired,setComponentAsReady:s.func.isRequired,setComponentAsViewed:s.func.isRequired,setComponentAsStarted:s.func.isRequired,submitQuestion:s.func.isRequired,showFeedback:s.func.isRequired,textInputValueChanged:s.func.isRequired,shouldHideMarking:s.bool},componentDidMount:function(){const{props:e}=this;e.setComponentAsReady(e.component._id)},componentDidUpdate:function(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},showFeedback:function(){const{component:e}=this.props,t=l(e);this.props.showFeedback(t)},onTextInputValueChange:function(e,t){const{props:n}=this;n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.textInputValueChanged(n.component._id,e,t)},onVisibilityChange:function(e,{top:t,bottom:n}){const{props:i}=this;t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&i.setComponentAsViewed(i.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},getWidgetClassName:function(){const{component:e}=this.props;return c(u(e),{"ev-disabled":!e._isEnabled,"ev-correct":e._isComplete&&e._isCorrect,"ev-complete":e._isComplete,"ev-submitted":e._isSubmitted})},renderItems:function(){const{component:e,theme:t,shouldHideMarking:n}=this.props;let o=e[e._selectedAnswerState];return i(o,i=>r.createElement(d,{key:i._id,item:i,component:e,onChange:this.onTextInputValueChange,swatches:t._swatches,shouldHideMarking:n}))},render:function(){const{props:e}=this;return r.createElement(a,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},r.createElement("div",{className:this.getWidgetClassName()},this.renderItems()))}});e.exports=p},2145:function(e,t,n){"use strict";const i=n(2),o=n(1),s=n(0),r=n(7),c=n(140),a=n(24),u=i({displayName:"TextInputItem",propTypes:{item:o.object.isRequired,component:o.object.isRequired,onChange:o.func.isRequired,shouldHideMarking:o.bool},onChange:function(e){const{props:t}=this;t.onChange(t.item._id,e.target.value)},getClassName:function(){const{component:e,item:t}=this.props;return r("ev-textinput-item ev-component-item ev-component-item-color ev-component-item-border ev-clearfix",{"ev-correct":t._isCorrect&&!e._isEnabled,"ev-incorrect":!t._isCorrect&&!e._isEnabled,"ev-display-component-item":e._displayAsComponentItem})},getPrefixSuffixStyle:function(){const{component:e,swatches:t}=this.props,n={},i=c(e._itemTextColor,t);return i&&"transparent"!==i&&(n.color=i),n},renderPrefix:function(){const{item:e}=this.props;if(e.prefix)return s.createElement(a,{element:"span",className:"ev-textinput-item-prefix ev-component-item-text-color",html:e.prefix,style:this.getPrefixSuffixStyle()})},renderSuffix:function(){const{item:e}=this.props;if(e.suffix)return s.createElement(a,{element:"span",className:"ev-textinput-item-suffix ev-component-item-text-color",html:e.suffix,style:this.getPrefixSuffixStyle()})},renderMarkingIcon:function(){const{component:e,item:t,shouldHideMarking:n}=this.props;if(e._isEnabled||n)return;const i=r("ev-textinput-icon ev-icon",{"ev-icon-check":e._isComplete&&t._isCorrect,"ev-icon-cross":e._isComplete&&!t._isCorrect});return s.createElement("i",{className:i})},render:function(){const{props:e}=this;return s.createElement("div",{className:this.getClassName()},s.createElement("div",{className:"ev-textinput-item-inner"},this.renderPrefix(),s.createElement("div",{className:"ev-textinput-item-input-container"},s.createElement("input",{type:"text",placeholder:e.component.placeholder,className:"ev-textinput-item-input ev-input-text",role:"textbox",disabled:!e.component._isEnabled,onChange:this.onChange,value:e.item.value||"","aria-label":e.item.inputAriaLabel}),s.createElement("div",{className:"ev-textinput-item-state"},this.renderMarkingIcon())),this.renderSuffix()))}});e.exports=u},2146:function(e,t,n){"use strict";const i=n(10),o=n(31),s=n(57),{SETUP_COMPONENT:r,SETUP_ANSWER_STATE:c,RESET_QUESTION:a,SUBMIT_QUESTION:u,SHOW_CORRECT_ANSWER:l,HIDE_CORRECT_ANSWER:d}=n(61),{TEXT_INPUT_VALUE_CHANGED:p}=n(1588);function m(e){const t=e._items.map(e=>i({},e,{value:void 0,_isCorrect:void 0}));return i({},e,{_items:t,_canSubmit:!1})}function _(e){return e=(e=(e=e.toLowerCase()).replace(/[\.,-\/#!$Â£%\^&\*;:{}=\-_`~()]/g,"")).trim()}function f(e){return i({},e,{_selectedAnswerState:"_correctAnswer"})}e.exports=function(e,t){switch(t.type){case r:return function(e){if(!e._isComplete)return m(e);if(e._isComplete&&!e._hasUserAnswered)return e._isCorrect?f(e):function(e){return i({},e,{_selectedAnswerState:"_incorrectAnswer"})}(e);return e}(e);case c:return function(e){return e._correctAnswer=e._items.map(e=>i({},e,{_isCorrect:!0,value:e._answers[0]})),e}(e);case p:return function(e,t){let n=!0;const s=o(e._items,e=>(e._id===t.payload.itemId&&(e=i({},e,{value:t.payload.value})),e.value||(n=!1),e));return i({},e,{_items:s,_canSubmit:n})}(e,t);case u:return function(e){if(!e._canSubmit)return e;let t=0,n=!1,r=!1;const c=o(e._items,r=>{let c=r.value,a=r._answers;!1===e._shouldBeMarkedStrictly&&(c=_(c),a=o(a,e=>_(e)));const u=s(a,c);return u&&(t++,n=!0),i({},r,{_isCorrect:u})});t===c.length&&(r=!0);return i({},e,{_isCorrect:r,_isPartlyCorrect:!r&&n,_items:c,_hasUserAnswered:!0})}(e);case a:return m(e);case l:return f(e);case d:return function(e){return i({},e,{_selectedAnswerState:"_items"})}(e);default:return e}}},2147:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},value:{fieldKey:"value",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}}}]);