(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1274:function(e,t,n){"use strict";const{registerComponent:s}=n(4),i=n(1986),o=n(1989),{saveUserAnswer:r}=n(1548);s("linkedOpenInput",{component:i,actions:{saveUserAnswer:r},reducer:o,mapStateToProps:n(1990),trackingMap:n(1991)})},1370:function(e,t,n){"use strict";const s=n(7);e.exports=function(e){return s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1427:function(e,t,n){"use strict";const s=n(2),i=n(1),o=n(0),r=n(7),a=s({displayName:"TextArea",propTypes:{value:i.string.isRequired,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:function(){return{value:""}},getClassName:function(){return r("ev-text-area",this.props.className)},onChange:function(e){this.props.onChange(e.target.value)},componentDidUpdate:function(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},render:function(){return o.createElement("textarea",{ref:e=>this._textArea=e,"aria-label":this.props.ariaLabel,value:this.props.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:this.props.placeholder,className:this.getClassName(),style:{minHeight:this.props.minHeight},disabled:this.props.isDisabled})}});e.exports=a},1548:function(e,t,n){"use strict";t.LINKEDOPENINPUT_SAVE_USER_ANSWER="LINKEDOPENINPUT_SAVE_USER_ANSWER",t.saveUserAnswer=function(e){return{type:t.LINKEDOPENINPUT_SAVE_USER_ANSWER,payload:e}}},1986:function(e,t,n){"use strict";var s=n(30)(n(21));const i=n(217),o=n(31),r=n(2),a=n(1),p=n(0),c=n(7),{Component:l}=n(468),u=n(1427),d=n(1370),m=n(214),h=n(140),v=n(1987),_=n(1988),k=r({displayName:"LinkedOpenInput",propTypes:{component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsStarted:a.func.isRequired,setComponentAsComplete:a.func.isRequired,showFeedback:a.func.isRequired,saveUserAnswer:a.func.isRequired,isLinkedOpenInputsComplete:a.bool},getInitialState:function(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount:function(){const{props:e}=this;e.setComponentAsReady(e.component._id)},componentDidUpdate:function(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&(t._userAnswer&&this.showFeedback(),this.showSavedModal())},saveUserAnswer:function(e){const{props:t}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:e}),t.component._isSubmitted&&(e&&this.showFeedback(),this.showSavedModal())},showFeedback:function(){const{component:e}=this.props;if(e._canShowFeedback){const t={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(t)}},showSavedModal:function(){this.setState({_showSavedModal:!0}),i(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange:function(e){this.setState({_userAnswer:e})},onNavigateClicked:function(e){m(e)},onSaveClicked:function(e){e.preventDefault();const{props:t}=this;this.saveUserAnswer(this.state._userAnswer),t.setComponentAsStarted(t.component._id),t.setComponentAsComplete(t.component._id,{_isSubmitted:!0})},onClearClicked:function(e){e.preventDefault(),this.setState({_userAnswer:""},()=>{this.saveUserAnswer("")})},onVisibilityChange:function(e,{top:t,bottom:n}){const{props:s}=this;t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&s.setComponentAsViewed(s.component._id)},getTextAreaMinHeight:function(){const{component:e}=this.props;let t=300;return e._hasMinimumHeight&&(t=e._minimumHeight),t},getlinkedUserAnswerStyle:function(){const{component:e,theme:t}=this.props;let n={};const s=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return s&&"transparent"!==s&&(n.backgroundColor=h(s,t._swatches)),i&&"transparent"!==i&&(n.color=h(i,t._swatches)),n},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},getButtonSettings:function(){const{articleStyle:e,theme:t}=this.props;let n=t._button._settings;if(e&&"none"!==e){n=t._articleStyles[e]._elements._button._settings}return n},renderIncomplete:function(){const{isLinkedOpenInputsComplete:e,component:t}=this.props;if(!e)return p.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},o(t._items,e=>p.createElement(_,(0,s.default)({key:e._id,onNavigateClicked:this.onNavigateClicked},e))))},renderOpenInputAnswers:function(){const{component:e}=this.props,t=this.getlinkedUserAnswerStyle();return o(e._items,e=>p.createElement(v,(0,s.default)({key:e._id,style:t},e)))},renderTextArea:function(){const{component:e,isLinkedOpenInputsComplete:t}=this.props;if(t)return p.createElement(u,{value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,minHeight:this.getTextAreaMinHeight()})},renderButtons:function(){const{component:e,isLinkedOpenInputsComplete:t}=this.props,{_userAnswer:n}=this.state,{_isActionButtonOnRight:s}=this.getButtonSettings();if(t)return p.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":s})},p.createElement("button",{className:"ev-button ev-button-save",onClick:this.onSaveClicked,disabled:""===n},e._saveButton),p.createElement("button",{className:"ev-button ev-button-clear",onClick:this.onClearClicked,disabled:""===n},e._clearButton))},renderSaveModal:function(){return p.createElement("div",{className:c("ev-linkedOpenInput-save-modal",{"ev-is-visible":this.state._showSavedModal}),role:"alert"},p.createElement("div",{className:"ev-linkedOpenInput-save-modal-inner"},p.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},render:function(){const{props:e}=this;return p.createElement(l,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},p.createElement("div",null,p.createElement("div",{className:d(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),this.renderSaveModal()),this.renderButtons()))}});e.exports=k},1987:function(e,t,n){"use strict";const s=n(0),i=n(2),{connect:o}=n(6),r=n(1),a=n(215),p=i({displayName:"LinkedOpenInputAnswer",propTypes:{isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},render:function(){const{isLinkedOpenInputComplete:e,linkedOpenInputUserAnswer:t,_linkedAnswerLabelText:n,style:i}=this.props;return e?s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},s.createElement("div",{className:"ev-label"},n),s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:i},s.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},t))):null}});e.exports=o((e,t)=>{const n=t._linkedOpenInputId?a(t._linkedOpenInputId):{};return{isLinkedOpenInputComplete:n._isComplete||!1,linkedOpenInputUserAnswer:n._userAnswer}})(p)},1988:function(e,t,n){"use strict";const s=n(0),i=n(2),{connect:o}=n(6),r=n(1),a=n(215),p=i({displayName:"LinkedOpenInputIncomplete",propTypes:{isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string,onNavigateClicked:r.func.isRequired},onNavigateClicked:function(e){e.preventDefault();const{onNavigateClicked:t,_linkedOpenInputId:n}=this.props;t(n)},render:function(){const{isLinkedOpenInputComplete:e,_linkedIncompleteMessage:t,_navigateToLinkedButtonText:n}=this.props;return e?null:s.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},s.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},t),s.createElement("button",{className:"ev-linkedOpenInput-navigate-linked ev-button ev-primary",onClick:this.onNavigateClicked},n))}});e.exports=o((e,t)=>({isLinkedOpenInputComplete:(t._linkedOpenInputId?a(t._linkedOpenInputId):{})._isComplete||!1}))(p)},1989:function(e,t,n){"use strict";const s=n(10),{LINKEDOPENINPUT_SAVE_USER_ANSWER:i}=n(1548),o=n(220);e.exports=function(e,t){switch(t.type){case i:return s({},e,{_userAnswer:t.payload.userAnswer,_isSubmitted:!0,_isCorrect:!0,_correctAt:o()});default:return e}}},1990:function(e,t,n){"use strict";const s=n(39),i=n(18),o=n(146),r=n(78);e.exports=(e,t)=>{let n=t._isAlwaysEnabled;if(!n){const r=s(t._items).map(e=>e._linkedOpenInputId).compact().value(),a=o(r,e);n=void 0===i(a,e=>!0!==e._isComplete)}return{isLinkedOpenInputsComplete:n,articleStyle:r(e,t,"article")._classes}}},1991:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}}}]);