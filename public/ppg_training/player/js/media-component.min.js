(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1278:function(e,t,n){"use strict";const{registerComponent:o}=n(4),i=n(2005),s=n(2006),r=n(2007),{videoMetricsChanged:p}=n(1550);o("media",{component:i,trackingMap:s,reducer:r,actions:{videoMetricsChanged:p}})},1370:function(e,t,n){"use strict";const o=n(7);e.exports=function(e){return o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1550:function(e,t,n){"use strict";t.MEDIA_METRICS_CHANGED="MEDIA_METRICS_CHANGED",t.videoMetricsChanged=(e,n)=>({type:t.MEDIA_METRICS_CHANGED,payload:{componentId:e,metrics:n}})},2005:function(e,t,n){"use strict";const o=n(8),i=n(2),s=n(1),r=n(0),{Component:p}=n(468),c=n(1370),a=n(76),{connect:d}=n(6),l=n(78),m=n(305),u=i({displayName:"Media",propTypes:{component:s.object.isRequired,setComponentAsReady:s.func.isRequired,setComponentAsViewed:s.func.isRequired,setComponentAsStarted:s.func.isRequired,setComponentAsComplete:s.func.isRequired,articleStyle:s.string.isRequired,styles:s.object,isPageReady:s.bool.isRequired,videoMetricsChanged:s.func.isRequired,screenSize:s.string.isRequired,animationEnded:s.bool},componentDidMount:function(){const{props:e}=this;e.setComponentAsReady(e.component._id)},setComponentAsComplete:function(){const{props:e}=this;e.setComponentAsComplete(e.component._id)},setComponentAsViewed:function(){const{props:e}=this;e.setComponentAsViewed(e.component._id)},setComponentAsStarted:function(){const{props:e}=this;e.setComponentAsStarted(e.component._id)},onVideoPlay:function(){const{component:e}=this.props;e._hasStarted||this.setComponentAsStarted(),e._isComplete||"play"!==e._setCompletionOn||this.setComponentAsComplete()},onVideoEnded:function(){const{component:e}=this.props;e._isComplete||"ended"!==e._setCompletionOn||this.setComponentAsComplete()},onTranscriptViewed:function(){this.props.component._isComplete||this.setComponentAsComplete()},onVisibilityChange:function(e,{top:t,bottom:n}){const{component:i}=this.props;t&&(this.isInViewTop=!0),n&&(this.isInViewBottom=!0),this.isInViewTop&&this.isInViewBottom&&(i._hasBeenViewed||this.setComponentAsViewed(),"inview"!==o(i,"_setCompletionOn","inview")||i._isComplete||this.setComponentAsComplete())},onMetricsChanged:function(e){const{component:t,videoMetricsChanged:n}=this.props;n(t._id,e)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!(!t||!e._isReady)&&(!e._hasBeenViewed||"inview"===e._setCompletionOn&&!e._isComplete)},getHasControls:function(){const{component:e}=this.props;let t=!0;return e._media&&e._media._shouldHidePlayerControls&&(t=!1),t},getVideoSrc:function(){const{component:e,screenSize:t}=this.props,n=e._media;if(n){if(n._isExternalLink)return n.externalUrl;if("small"===t&&n.mobileMp4)return a(n.mobileMp4);if(n.mp4)return a(n.mp4)}},getPosterSrc:function(){const{component:e}=this.props;if(e._media&&e._media.poster)return a(e._media.poster)},getAudioDescriptionSrc:function(){const{component:e}=this.props;return e._audio&&e._audio._isEnabled?a(e._audio.mp3):null},getHasBigPlayButton:function(){let e=o(this.props.component,"_media._shouldHidePlayButton",!1);return this.getHasControls()||(e=!1),!e},renderVideoPlayer:function(){const{component:e}=this.props,t=this.getVideoSrc();if(t)return r.createElement(m,{id:e._id,src:t,controls:this.getHasControls(),posterSrc:this.getPosterSrc(),hasBigPlayButton:this.getHasBigPlayButton(),autoPlay:e._media._shouldAutoPlay,metrics:e._metrics,articleStyle:this.props.articleStyle,subtitlesSrc:a(o(e,"_subtitles.src")),subtitlesLabel:o(e,"_subtitles.label"),transcriptType:o(e,"_transcript._shouldOpenTranscriptInPopup")?"popup":"collapse",transcriptText:o(e,"_transcript.body"),transcriptButtonText:o(e,"_transcript.button"),transcriptInlineClassName:"ev-component-body",transcriptInlineInnerClassName:"ev-component-body-inner",audioDescriptionSrc:this.getAudioDescriptionSrc(),animationEnded:this.props.animationEnded,onPlay:this.onVideoPlay,onEnded:this.onVideoEnded,onTranscriptView:this.onTranscriptViewed,onMetricsChange:this.onMetricsChanged})},render:function(){const{props:e}=this;return r.createElement(p,{component:e.component,styles:e.styles,onVisibilityChange:this.onVisibilityChange,isVisibilitySensorActive:this.getIsVisibilitySensorActive()},r.createElement("div",{className:c(e.component)},this.renderVideoPlayer()))}});e.exports=d((e,t)=>({articleStyle:l(e,t.component,"article")._classes}))(u)},2006:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},2007:function(e,t,n){"use strict";const o=n(10),{MEDIA_METRICS_CHANGED:i}=n(1550);e.exports=(e,t)=>{switch(t.type){case i:return o({},e,{_metrics:t.payload.metrics});default:return e}}}}]);