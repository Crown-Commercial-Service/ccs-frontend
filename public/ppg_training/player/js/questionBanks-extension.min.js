(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{1329:function(t,e,n){"use strict";const{registerEpics:o}=n(4),{setupQuestionBanksEpic:s}=n(2285);o(s)},2285:function(t,e,n){"use strict";const o=n(39),s=n(32),i=n(31),_=n(10),p=n(229),a=n(11),c=n(18),m=n(301),r=n(2286),u=n(297),{Observable:d}=n(5),{APP_READY:l}=n(9),{overwriteComponents:f,SETUP_COMPONENT:b,SETUP_ANSWER_STATE:k,RESETTED_COMPONENTS:E}=n(61),y=n(319),{COURSE_ASSESSMENT_COMPONENTS_RESET:S}=n(476),v=n(2287);function g(t,e={}){return o(t).pick(v[t._component]).omitBy(t=>"string"==typeof t&&0===t.trim().length).assign(e).value()}e.setupQuestionBanksEpic=(t,e)=>t.filter(({type:t})=>{if(t===l||t===S||t===E){const t=e.getState().course._questionBanks;return t&&t._isEnabled&&t._banks.length>0}return!1}).mergeMap(({type:t})=>{const n=e.getState(),o=s(n.components,t=>t._useQuestionBank&&t._questionBankId),l={};if(!o.length)return d.empty();const v=i(n.course._questionBanks._banks,t=>{const e=t._components||[];return _({},t,{_components:[...e]})}),T=p(o,t=>t._bankComponentId&&t._isComplete?"revisited":"components");return a(T.revisited||[],t=>{const e=t._questionBankId,n=c(v,t=>t._id===e);if(n&&n._components.length){const e=m(n._components,e=>e._id===t._bankComponentId);if(-1!==e){const o=n._components[e],s=i(t._items,t=>{const e=c(o._items,{_id:t._id});return _({},e,t)});l[t._id]={...t,...g(o,{_attemptsLeft:t._attemptsLeft,_items:s})},n._components.splice(e,1)}}}),a(T.components||[],e=>{const o=e._questionBankId,s=c(v,t=>t._id===o);if(s&&s._components.length){const o=n.originalComponents[e._id],i=r(0,s._components.length-1),_=s._components[i];let p={...o,...g(_,{_bankComponentId:_._id})};s._components.splice(i,1),(t===S||t===E||n.app.previewKey>0)&&(p=u([t=>y(t,{type:b}),t=>y(t,{type:k})])(p)),l[e._id]=p}}),d.of(f(l))})},2286:function(t,e,n){var o=n(508),s=n(223),i=n(489),_=parseFloat,p=Math.min,a=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&s(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=i(t),void 0===e?(e=t,t=0):e=i(e)),t>e){var c=t;t=e,e=c}if(n||t%1||e%1){var m=a();return p(t+m*(e-t+_("1e-"+((m+"").length-1))),e)}return o(t,e)}},2287:function(t,e,n){"use strict";t.exports={mcq:["title","displayTitle","_displayTitleSettings","body","instruction","_attempts","_shouldDisplayAttempts","_isRandom","_selectable","_useCustomItemPrefix","_shouldUseIndividualItemFeedback","_canAutoSubmit","_items","_feedback","_itemsPerRow"],gmcq:["title","displayTitle","_displayTitleSettings","body","instruction","_attempts","_shouldDisplayAttempts","_isRandom","_selectable","_useCustomItemPrefix","_shouldUseIndividualItemFeedback","_canAutoSubmit","_items","_feedback","_itemsPerRow"]}}}]);