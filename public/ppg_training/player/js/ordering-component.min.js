(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1284:function(e,t,n){"use strict";const{registerComponent:i}=n(4),o=n(2030),s=n(2033),{orderingItemMoved:r}=n(1556);i("ordering",{component:o,actions:{orderingItemMoved:r},reducer:s,trackingMap:n(2034)})},1370:function(e,t,n){"use strict";const i=n(7);e.exports=function(e){return i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1376:function(e,t,n){"use strict";const{store:i}=n(4),o=n(170);function s(e,t,n){const s=e._feedback[n],r=s&&o(s.src,s.srcAdvanced);if(t&&!r){return i.getState().course._globals._feedbackText[n]}return r?s:null}function r(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?i.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:s(e,t,"_correctGraphic"),feedbackNavigation:r(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,o=i.getState().course._globals._feedbackText;if(0===e._attemptsLeft){return{feedbackMessage:(n?o.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrect")}}return{feedbackMessage:(n?o.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:r(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,o=i.getState().course._globals._feedbackText;if(0===e._attemptsLeft||!t.notFinal&&!n||!o.incorrectNotFinalFeedback&&n){return{feedbackMessage:(n?o.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:s(e,n,"_incorrectFinalGraphic"),feedbackNavigation:r(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}}return{feedbackMessage:(n?o.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:s(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:r(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},1556:function(e,t,n){"use strict";t.ORDERING_ITEM_MOVED="ORDERING_ITEM_MOVED",t.orderingItemMoved=(e,n,i)=>({type:t.ORDERING_ITEM_MOVED,payload:{componentId:e,itemId:n,index:i}})},2030:function(e,t,n){"use strict";const i=n(31),o=n(2),s=n(1),r=n(0),{Component:c}=(n(7),n(468)),a=n(1370),d=n(1376),l=n(2031),u=o({displayName:"Ordering",propTypes:{component:s.object.isRequired,submitQuestion:s.func.isRequired,actionButtonClicked:s.func.isRequired,setComponentAsReady:s.func.isRequired,setComponentAsViewed:s.func.isRequired,setComponentAsStarted:s.func.isRequired,submitQuestion:s.func.isRequired,showFeedback:s.func.isRequired,resetQuestion:s.func.isRequired,orderingItemMoved:s.func.isRequired,shouldHideMarking:s.bool},getInitialState:function(){return{_selectedItemId:null}},componentDidMount:function(){const{props:e}=this;this.props.setComponentAsReady(e.component._id)},componentDidUpdate:function(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},componentWillReceiveProps:function(e){const{state:t}=this,{component:n}=e;!t._selectedItemId||!n._isSubmitted&&n._Enabled||this.setState({_selectedItemId:null})},showFeedback:function(){const{component:e}=this.props,t=d(e);this.props.showFeedback(t)},onItemClicked:function(e){this.setState({_selectedItemId:e._id})},onMoveItemClicked:function(e,t){const{props:n}=this;this.setState({_selectedItemId:null}),n.component._hasStarted||n.setComponentAsStarted(n.component._id),n.orderingItemMoved(n.component._id,e._id,t)},onCancelClicked:function(){this.setState({_selectedItemId:null})},onVisibilityChange:function(e,{top:t,bottom:n}){const{props:i}=this;t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&i.setComponentAsViewed(i.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},renderItems:function(){const{props:e,state:t}=this;let n=e.component[e.component._selectedAnswerState];return i(n,(i,o)=>r.createElement(l,{key:i._id,item:i,index:o,isReady:e.component._isReady,isSubmitted:e.component._isSubmitted,isEnabled:e.component._isEnabled,isCorrect:e.component._isCorrect,isComplete:e.component._isComplete,cancelButtonAriaLabel:e.component.cancelButtonAriaLabel,totalItems:n.length,isSelected:i._id===t._selectedItemId,onItemClicked:this.onItemClicked,onCancelClicked:this.onCancelClicked,onMoveItemClicked:this.onMoveItemClicked,shouldHideMarking:e.shouldHideMarking}))},render:function(){const{props:e}=this;return r.createElement(c,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange,onActionButtonClicked:e.actionButtonClicked,onFeedbackButtonClicked:this.showFeedback},r.createElement("div",{className:a(e.component)},r.createElement("div",{className:"ev-ordering-container"},r.createElement("div",{className:"ev-ordering-items"},r.createElement("div",{className:"ev-ordering-items-inner"},this.renderItems())))))}});e.exports=u},2031:function(e,t,n){"use strict";const i=n(2),o=n(1),s=n(16),r=n(0),c=n(7),a=n(2032),{Motion:d,spring:l}=n(1401),u=n(24),m=i({displayName:"OrderingItem",propTypes:{index:o.number.isRequired,item:o.object.isRequired,isEnabled:o.bool,isSubmitted:o.bool,isReady:o.bool,isCorrect:o.bool,isComplete:o.bool,cancelButtonAriaLabel:o.string,onItemClicked:o.func.isRequired,isSelected:o.bool.isRequired,onCancelClicked:o.func.isRequired,onMoveItemClicked:o.func.isRequired,shouldHideMarking:o.bool},mixins:[s],getInitialState:function(){return{isMoving:!1}},componentWillReceiveProps:function(e){const{props:t}=this;e.index!==t.index&&t.isReady&&this.setState({translateY:-100*(e.index-t.index),isMoving:!0})},componentDidUpdate:function(e){!e.isSelected||this.props.isSelected||this.props.isSubmitted||this._item.focus()},onItemClicked:function(e){e.preventDefault(),e.stopPropagation();const{props:t}=this;!t.isSubmitted&&t.isEnabled&&t.onItemClicked(t.item)},onItemMoved:function(){this.setState({isMoving:!1})},getItemClassName:function(){const{props:e,state:t}=this;return c("ev-ordering-item ev-component-item",{"ev-disabled":!e.isEnabled,"ev-correct":e.isCorrect&&e.isComplete,"ev-incorrect":!e.isCorrect&&e.isComplete,"ev-item-moving":t.isMoving})},getDefaultStyle:function(){const{isMoving:e,translateY:t}=this.state;return{translateY:e?t:0}},getComputedStyle:function(e){return{transform:`translate3d(0, ${e.translateY}%, 0)`}},renderMarkingIcon:function(){const{props:e}=this;if(!e.isComplete||e.shouldHideMarking)return;const t=c("ev-ordering-icon ev-ordering-correct-icon ev-icon",{"ev-icon-check":e.item._isCorrect,"ev-icon-cross":!e.item._isCorrect});return r.createElement("div",{className:"ev-ordering-item-state"},r.createElement("div",{className:t}))},renderOrderingLabels:function(){const{props:e}=this;if(e.isSelected)return r.createElement(a,{item:e.item,currentIndex:e.index,totalItems:e.totalItems,cancelButtonArialLabel:e.cancelButtonAriaLabel,onCancelClicked:e.onCancelClicked,onMoveItemClicked:e.onMoveItemClicked})},render:function(){const{props:e}=this;return r.createElement(d,{key:e.index,defaultStyle:this.getDefaultStyle(),style:{translateY:l(0)},onRest:this.onItemMoved},t=>r.createElement("div",{className:this.getItemClassName(),style:this.getComputedStyle(t)},r.createElement("div",{className:"ev-ordering-item-inner ev-component-item-inner"},r.createElement("button",{className:"ev-ordering-item-text",disabled:!e.isEnabled,onClick:this.onItemClicked,tabIndex:e.isSelected?-1:0,ref:e=>this._item=e},r.createElement("span",{className:"ev-ordering-item-number"},e.index+1),r.createElement(u,{element:"span",className:"ev-ordering-item-text-span",html:e.item.text})),this.renderOrderingLabels(),this.renderMarkingIcon())))}});e.exports=m},2032:function(e,t,n){"use strict";const i=n(482),o=n(2),s=n(1),r=n(16),c=n(0),{Motion:a,spring:d}=n(1401),l=o({displayName:"OrderingItemLabels",propTypes:{item:s.object.isRequired,currentIndex:s.number.isRequired,totalItems:s.number.isRequired,cancelButtonAriaLabel:s.string,onCancelClicked:s.func.isRequired,onMoveItemClicked:s.func.isRequired},mixins:[r],getInitialState:function(){return{opacity:d(1)}},componentDidMount:function(){this._done.focus()},onCancelClicked:function(e){e.preventDefault(),e.stopPropagation(),this._isUnmounting=!0,this.setState({opacity:d(0,{stiffness:150,damping:15})})},onMoveItemClicked:function(e){const{props:t}=this;t.onMoveItemClicked(t.item,e)},onRest:function(){this._isUnmounting&&this.props.onCancelClicked()},renderLabels:function(){const{props:e}=this;return i(e.totalItems,t=>{if(t!==e.currentIndex)return c.createElement("a",{key:t,href:"#",className:"ev-ordering-order-label",role:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.onMoveItemClicked(t)}},c.createElement("span",{className:"ev-ordering-item-number"},t+1))})},render:function(){const{props:e}=this;return c.createElement(a,{defaultStyle:{opacity:0},style:this.state,onRest:this.onRest},t=>c.createElement("div",{className:"ev-ordering-order-labels ev-clearfix",style:t,onClick:e=>e.stopPropagation()},c.createElement("div",{className:"ev-ordering-order-labels-inner ev-clearfix"},this.renderLabels()),c.createElement("a",{ref:e=>this._done=e,href:"#",className:"ev-ordering-order-labels-done",role:"button","aria-label":e.cancelButtonAriaLabel,onClick:this.onCancelClicked},c.createElement("span",{className:"ev-icon ev-icon-cross"}))))}});e.exports=l},2033:function(e,t,n){"use strict";const i=n(10),o=n(470),s=n(31),r=n(141),c=n(324),a=n(32),{SETUP_COMPONENT:d,SETUP_ANSWER_STATE:l,SUBMIT_QUESTION:u,SHOW_CORRECT_ANSWER:m,HIDE_CORRECT_ANSWER:p}=n(61),{ORDERING_ITEM_MOVED:f}=n(1556);function _(e){return i({},e,{_selectedAnswerState:"_correctAnswer"})}e.exports=function(e,t){switch(t.type){case d:return function(e){e._isComplete?e._isComplete&&!e._hasUserAnswered&&e._isCorrect&&(e=_(e)):e=i({},e,{_items:o(e._items),_canSubmit:!0});return e}(e);case l:return function(e){return e._correctAnswer=s(r(e._items,"itemIndex"),e=>i({},e,{_isCorrect:!0})),e}(e);case f:return function(e,t){const{itemId:n,index:o}=t.payload;let s;const r=c(e._items,e=>{const t=e._id===n;return t&&(s=e),t});return r.splice(o,0,s),i({},e,{_items:r})}(e,t);case u:return function(e){const t=s(e._items,(e,t)=>i({},e,{_isCorrect:e.itemIndex===t})),n=a(t,e=>e._isCorrect).length,o=n===t.length;return i({},e,{_items:t,_isCorrect:o,_isPartlyCorrect:!o&&!!n,_hasUserAnswered:!0})}(e);case m:return _(e);case p:return function(e){return i({},e,{_selectedAnswerState:"_items"})}(e);default:return e}}},2034:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0}}}}]);