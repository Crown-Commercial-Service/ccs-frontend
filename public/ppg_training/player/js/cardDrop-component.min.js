(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1249:function(e,t,n){"use strict";const{registerComponent:o}=n(4),i=n(1783),r=n(1788),{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a}=n(1518);o("cardDrop",{component:i,actions:{onCardDrop:s,onCardDropReject:c,onCardDropPostReject:d,onNextCard:a},reducer:r,trackingMap:n(1789)})},1370:function(e,t,n){"use strict";const o=n(7);e.exports=function(e){return o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1371:function(e,t,n){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:o}=e;return!0===o&&!0===n._isReady&&!0!==n[t]}},1376:function(e,t,n){"use strict";const{store:o}=n(4),i=n(170);function r(e,t,n){const r=e._feedback[n],s=r&&i(r.src,r.srcAdvanced);if(t&&!s){return o.getState().course._globals._feedbackText[n]}return s?r:null}function s(e,t){const n=e._feedbackNavigation;if(n&&n[t]&&n[t]._isEnabled&&n[t]._linkType)return{_link:n[t]}}e.exports=function(e){let t;return t=e._isCorrect?function(e){const t=e._feedback._shouldUseGlobalCorrectFeedback;return{feedbackMessage:(t?o.getState().course._globals._feedbackText.correctFeedback:"")+(e._feedback.correct?e._feedback.correct:""),feedbackGraphic:r(e,t,"_correctGraphic"),feedbackNavigation:s(e,"_correct")}}(e):e._isPartlyCorrect?function(e){const{_partlyCorrect:t}=e._feedback,n=t._shouldUseGlobalPartlyCorrectFeedback,i=o.getState().course._globals._feedbackText;if(0===e._attemptsLeft){return{feedbackMessage:(n?i.partlyCorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_partlyCorrectFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrect")}}return{feedbackMessage:(n?i.partlyCorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_partlyCorrectNotFinalGraphic"),feedbackNavigation:s(e,"_partlyCorrectNotFinal")}}(e):function(e){const{_incorrect:t}=e._feedback,n=t._shouldUseGlobalIncorrectFeedback,i=o.getState().course._globals._feedbackText;if(0===e._attemptsLeft||!t.notFinal&&!n||!i.incorrectNotFinalFeedback&&n){return{feedbackMessage:(n?i.incorrectFinalFeedback:"")+(t.final||""),feedbackGraphic:r(e,n,"_incorrectFinalGraphic"),feedbackNavigation:s(e,0===e._attemptsLeft?"_incorrect":"_incorrectNotFinal")}}return{feedbackMessage:(n?i.incorrectNotFinalFeedback:"")+(t.notFinal||""),feedbackGraphic:r(e,n,"_incorrectNotFinalGraphic"),feedbackNavigation:s(e,"_incorrectNotFinal")}}(e),!1!==e._shouldShowDisplayTitleInFeedback&&(t.feedbackTitle=e.displayTitle),t}},1518:function(e,t,n){"use strict";t.CARD_DROP_ON_DROP="CARD_DROP_ON_DROP",t.CARD_DROP_ON_DROP_REJECT="CARD_DROP_ON_DROP_REJECT",t.CARD_DROP_ON_DROP_POST_REJECT="CARD_DROP_ON_DROP_POST_REJECT",t.CARD_DROP_ON_NEXT_CARD="CARD_DROP_ON_NEXT_CARD",t.onCardDrop=e=>({type:t.CARD_DROP_ON_DROP,payload:e}),t.onCardDropReject=e=>({type:t.CARD_DROP_ON_DROP_REJECT,payload:e}),t.onCardDropPostReject=e=>({type:t.CARD_DROP_ON_DROP_POST_REJECT,payload:e}),t.onNextCard=e=>({type:t.CARD_DROP_ON_NEXT_CARD,payload:e})},1783:function(e,t,n){"use strict";const o=n(217),i=n(32),r=n(18),s=n(57),c=n(2),d=n(1),a=n(0),{Component:p}=n(468),u=n(1370),_=n(1376),l=n(1371),m=n(1784),h=n(1785),f=n(1787),C=c({displayName:"CardDrop",propTypes:{component:d.object.isRequired,styles:d.object,screenSize:d.string.isRequired,submitQuestion:d.func.isRequired,actionButtonClicked:d.func.isRequired,setComponentAsReady:d.func.isRequired,setComponentAsViewed:d.func.isRequired,showFeedback:d.func.isRequired,shouldHideMarking:d.bool,onCardDrop:d.func.isRequired,onCardDropReject:d.func.isRequired,onCardDropPostReject:d.func.isRequired,onNextCard:d.func.isRequired},componentDidMount:function(){const{component:e,setComponentAsReady:t}=this.props;t(e._id)},componentDidUpdate:function(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&this.showFeedback()},componentWillReceiveProps:function(e){const{component:t,submitQuestion:n}=this.props;!t._canSubmit&&e.component._canSubmit&&n(t._id)},getActionButtonState:function(){return"reset"},getActionButtonEnabled:function(){const{_isSubmitted:e,_isCorrect:t,_attemptsLeft:n}=this.props.component;return e&&!t&&n>0},showFeedback:function(){const{component:e,showFeedback:t}=this.props;t(_(e),{refocusSelector:e._isComplete?".ev-buttons-feedback":".ev-buttons-action"})},onVisibilityChange:function(e,{top:t,bottom:n}){t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&this.props.setComponentAsViewed(this.props.component._id)},onDrop:function(e){const{onCardDrop:t,onNextCard:n,component:i}=this.props,r=i._id;t({componentId:r,zoneId:e}),o(()=>{n({componentId:r})},1e3)},onDropReject:function(e){const{onCardDropReject:t,onCardDropPostReject:n,component:i}=this.props,r=i._id;t({componentId:r,zoneId:e}),o(()=>{n({componentId:r})},1e3)},renderCardDropItems:function(e){const{_id:t,_items:n,_currentItemId:o}=this.props.component,{width:r,height:s}=e;if(!o)return;let c=i(n,{_isComplete:!1,_isRejected:!1});return c=c.slice(0,5),c.map((e,i)=>a.createElement(m,{key:e._id,id:e._id,componentId:t,isCurrentItem:o===e._id,index:i,zIndex:n.length-i,text:e.text,width:r,height:s,canFocus:e._canFocus}))},renderDropZones:function(e){const{_id:t,_items:n,_dropZones:o,_currentItemId:i,_shouldZonesRejectIncorrect:c,_useComponentDropZones:d,_isComplete:p,rejectedCardAriaLabel:u}=this.props.component,{width:_,height:l}=e,m=r(n,{_id:i});if(!m)return;return(d?o:m._dropZones).map(e=>a.createElement(h,{key:`${i}-${e._id}-${m._isComplete}`,id:e._id,componentId:t,isComponentComplete:p,text:e.text,ariaLabel:e.ariaLabel,rejectedCardAriaLabel:u,isComplete:m._isComplete,isRejected:m._isRejected,isCorrectZone:d?s(m._correctDropZoneIds,e._id):e.isCorrectZone,rejectIncorrect:c,hasDroppedItem:m._droppedZoneId===e._id||m._isRejected&&m._droppedZoneId===e._id,currentItemText:m.text,width:_,height:l,onDrop:this.onDrop,onDropReject:this.onDropReject}))},renderIndicator:function(){const{component:e,shouldHideMarking:t}=this.props;if(!e._isComplete||t)return;const{_items:n,indicatorLabelText:o,_shouldHideScore:i}=e;return a.createElement(f,{items:n,indicatorLabelText:o,shouldHideScore:i})},render:function(){const{props:e}=this,t=e.component._cardSizes[e.screenSize],{width:n,height:o}=t;return a.createElement(p,{component:e.component,styles:e.styles,shouldHideMarking:e.shouldHideMarking,shouldHideActionButton:e.component._attempts<=1,onActionButtonClicked:e.actionButtonClicked,isVisibilitySensorActive:l(e),onVisibilityChange:this.onVisibilityChange,onFeedbackButtonClicked:this.showFeedback,getActionButtonState:this.getActionButtonState,getActionButtonEnabled:this.getActionButtonEnabled},a.createElement("div",{className:u(e.component)},a.createElement("div",{className:"ev-card-drop-items",style:{width:n+"px",height:o+"px"}},this.renderCardDropItems(t)),a.createElement("div",{className:"ev-card-drop-zones"},this.renderDropZones(t)),this.renderIndicator()))}});e.exports=C},1784:function(e,t,n){"use strict";const o=n(2),i=n(1),r=n(0),s=n(48),c=n(477),d=n(7),a=n(33),p=o({displayName:"CardDropItem",propTypes:{id:i.string.isRequired,componentId:i.string.isRequired,text:i.string,isCurrentItem:i.bool.isRequired,zIndex:i.number.isRequired,index:i.number.isRequired,width:i.number.isRequired,height:i.number.isRequired,canFocus:i.bool.isRequired},getDefaultProps:function(){return{width:300,height:150,canFocus:!1}},getInitialState:function(){return{_isDragging:!1,_x:0,_y:0}},componentDidMount:function(){const{isCurrentItem:e,canFocus:t}=this.props;this._isMounted=!0,this._interact=c(s.findDOMNode(this)).draggable({onmove:this.onDragMove,onend:this.onDragEnd,enabled:e}),t&&this._button.focus({preventScroll:!0})},componentWillUnmount:function(){this._isMounted=!1,this._interact.unset()},componentDidUpdate:function({isCurrentItem:e,canFocus:t}){const{isCurrentItem:n,canFocus:o}=this.props;n&&!e&&(this._interact=this._interact.draggable(!0)),o&&!t&&this._button.focus()},onDragMove:function(e){this.setState({_x:this.state._x+e.dx,_y:this.state._y+e.dy,_isDragging:!0})},onDragEnd:function(){this._isMounted&&this.setState({_isDragging:!1,_x:0,_y:0})},getStyle:function(){const{width:e,height:t,zIndex:n,index:o}=this.props,{_x:i,_y:r}=this.state;return{left:i+"px",top:r+"px",transform:`translateY(${o*(window.innerWidth<520?1:2)}%)`,position:"absolute",width:e+"px",height:t+"px",zIndex:n}},render:function(){const{text:e,isCurrentItem:t,id:n,componentId:o}=this.props,{_isDragging:i}=this.state;return r.createElement("button",{id:n,ref:e=>this._button=e,className:d("ev-card-drop-item ev-focusable","ev-card-drop-item-"+o,{"ev-is-current-item":t,"ev-is-dragging":i,"ev-is-disabled":!t}),style:this.getStyle(),tabIndex:t?0:-1},r.createElement(a,{tag:"span",innerTag:"span",body:e}),r.createElement("i",{className:"ev-icon ev-icon-move ev-card-drop-item-drag-icon"}))}});e.exports=p},1785:function(e,t,n){"use strict";const o=n(2),i=n(1),r=n(0),s=n(48),c=n(477),d=n(7),{isEnterKey:a}=n(171),p=n(33),u=n(1786),_=o({displayName:"CardDropZone",propTypes:{id:i.string.isRequired,componentId:i.string.isRequired,isComponentComplete:i.bool.isRequired,text:i.string,ariaLabel:i.string,rejectedCardAriaLabel:i.string,onDrop:i.func.isRequired,onDropReject:i.func.isRequired,currentItemText:i.string,isComplete:i.bool.isRequired,isRejected:i.bool.isRequired,isCorrectZone:i.bool.isRequired,rejectIncorrect:i.bool.isRequired,width:i.number.isRequired,height:i.number.isRequired,hasDroppedItem:i.bool.isRequired},getDefaultProps:function(){return{isComponentComplete:!1,isComplete:!1,isRejected:!1,isCorrectZone:!1,rejectIncorrect:!1,width:300,height:150,hasDroppedItem:!1}},getInitialState:function(){return{_isFocused:!1,_isDragOver:!1}},componentDidMount:function(){c(s.findDOMNode(this)).dropzone({accept:".ev-card-drop-item-"+this.props.componentId,ondrop:this.onDrop,ondragenter:this.onDragEnter,ondragleave:this.onDragLeave,overlap:.5})},componentWillUnmount:function(){c(s.findDOMNode(this)).unset()},onDrop:function(){const{id:e,onDrop:t,onDropReject:n,isCorrectZone:o,rejectIncorrect:i}=this.props;if(i&&!o)return n(e),this.onDragLeave();t(e)},onDragEnter:function(){this.setState({_isDragOver:!0})},onDragLeave:function(){this.setState({_isDragOver:!1})},onFocus:function(){this.setState({_isFocused:!0})},onBlur:function(){this.setState({_isFocused:!1})},onKeyDown:function(e){const{_isFocused:t}=this.state,{id:n,onDrop:o,onDropReject:i,isComplete:r,isCorrectZone:s,rejectIncorrect:c}=this.props;if(a(e))return c&&!s?i(n):void(t&&!r&&o(n))},onClick:function(){const{id:e,onDrop:t,onDropReject:n,isComplete:o,isCorrectZone:i,rejectIncorrect:r}=this.props;if(r&&!i)return n(e);o||t(e)},renderCardItem:function(){const{currentItemText:e,isComplete:t,isRejected:n,hasDroppedItem:o,width:i,height:s,rejectedCardAriaLabel:c,isComponentComplete:d}=this.props;if(!d&&(t||n)&&o)return r.createElement(u,{text:e,width:i,height:s,isRejected:n,rejectedCardAriaLabel:c})},render:function(){const{text:e,ariaLabel:t,width:n,height:o,isComplete:i,isRejected:s}=this.props,{_isDragOver:c}=this.state;return r.createElement("div",{className:d("ev-card-drop-zone",{"ev-is-drag-over":c,"ev-is-disabled":i,"ev-is-rejected":s}),tabIndex:i?null:0,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onClick:this.onClick,"aria-label":t,style:{width:n+"px",height:o+"px"}},r.createElement(p,{tag:"span",innerTag:"span",body:e}),this.renderCardItem())}});e.exports=_},1786:function(e,t,n){"use strict";const o=n(2),i=n(1),r=n(0),s=n(7),c=n(33),d=o({displayName:"CardDropZoneItem",propTypes:{text:i.string,rejectedCardAriaLabel:i.string,width:i.number.isRequired,height:i.number.isRequired,isRejected:i.bool.isRequired},componentDidMount:function(){const{isRejected:e}=this.props;e&&this._button.focus({preventScroll:!0})},render:function(){const{text:e,rejectedCardAriaLabel:t,width:n,height:o,isRejected:i}=this.props;return r.createElement("button",{ref:e=>this._button=e,className:s("ev-card-drop-item ev-card-drop-drop-zone-item ev-is-disabled ev-focusable",{"ev-is-rejected":i}),style:{width:n+"px",height:o+"px"},tabIndex:"-1","aria-label":i?t:null,"aria-hidden":!i},r.createElement(c,{tag:"span",innerTag:"span",body:e}))}});e.exports=d},1787:function(e,t,n){"use strict";const o=n(32),i=n(1),r=n(0),s=n(7),c=r.memo(e=>r.createElement("div",{className:"ev-card-drop-indicator-item"},r.createElement("i",{className:s("ev-icon ev-card-drop-indicator-item-icon",{"ev-icon-check":e.isCorrect,"ev-icon-cross":!e.isCorrect})}))),d=r.memo(e=>{const t=e.shouldHideScore||!1;return r.createElement("div",{className:"ev-card-drop-indicator"},r.createElement("div",{className:"ev-card-drop-indicator-items"},e.items.map(e=>r.createElement(c,{key:e._id,id:e._id,isCorrect:e._isCorrect}))),!t&&r.createElement("div",{className:"ev-label ev-card-drop-indicator-label"},(()=>{const{items:t,indicatorLabelText:n}=e;return`${n||""} ${o(t,{_isCorrect:!0}).length}/${t.length}`})()))});d.propTypes={items:i.array.isRequired,indicatorLabelText:i.string,shouldHideScore:i.bool},e.exports=d},1788:function(e,t,n){"use strict";const o=n(32),i=n(18),{SETUP_COMPONENT:r,RESET_QUESTION:s,SUBMIT_QUESTION:c}=n(61),{CARD_DROP_ON_DROP:d,CARD_DROP_ON_DROP_REJECT:a,CARD_DROP_ON_DROP_POST_REJECT:p,CARD_DROP_ON_NEXT_CARD:u}=n(1518);function _(e){let t={};if(!e._isComplete){const n=e._items.map(e=>({...e,_isComplete:!1,_isRejected:!1,_isCorrect:!1,_canFocus:!1}));t={_currentItemId:n.length?n[0]._id:null,_items:n,_canSubmit:!1}}return{...e,...t,_shouldDisableShowAnswer:!0}}function l(e,t,n){if(n)return e._correctDropZoneIds.includes(t);return i(e._dropZones,{_id:t}).isCorrectZone}e.exports=function(e,t){switch(t.type){case r:return _(e);case c:return function(e){const{_items:t,_canSubmit:n}=e;if(!n)return e;const i=o(t,{_isCorrect:!0}).length,r=i===t.length,s=!r&&i>0;return{...e,_isCorrect:r,_isPartlyCorrect:s,_hasUserAnswered:!0}}(e);case s:return function(e){const t=_(e);return{...e,...t,_items:t._items.map(e=>t._currentItemId===e._id?{...e,_canFocus:!0}:e)}}(e);case d:return function(e,t){const{_items:n,_currentItemId:o,_useComponentDropZones:r}=e,s=n.map(e=>o===e._id?{...e,_isComplete:!0,_isCorrect:l(e,t,r),_droppedZoneId:t}:e),c=i(s,{_isComplete:!1});return c&&(c._canFocus=!0),{...e,_items:s}}(e,t.payload.zoneId);case a:return function(e,t){const{_items:n,_currentItemId:o}=e;return{...e,_items:n.map(e=>o===e._id?{...e,_isRejected:!0,_droppedZoneId:t}:e)}}(e,t.payload.zoneId);case p:return function(e){const{_items:t,_currentItemId:n}=e;return{...e,_items:t.map(e=>n===e._id?{...e,_canFocus:!0,_isRejected:!1}:e)}}(e,t.payload.zoneId);case u:return function(e){const{_items:t,_currentItemId:n}=e,r=i(t,{_isComplete:!1}),s=r?r._id:n;return{...e,_currentItemId:s,_canSubmit:o(t,{_isComplete:!0}).length===t.length}}(e);default:return e}}},1789:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"question",shouldRestore:!1},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isCorrect:{fieldKey:"_isCorrect",type:"String",shouldRestore:!0},_droppedZoneId:{fieldKey:"_droppedZoneId",type:"String",shouldRestore:!0}}},_hasUserAnswered:{fieldKey:"_hasUserAnswered",type:"Boolean",shouldRestore:!0}}}}]);