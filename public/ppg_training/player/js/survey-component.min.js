(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1294:function(e,t,n){"use strict";const{registerComponent:i}=n(4),s=n(2115),o=n(2120),r=n(2121),a=n(2122),{onSurveyRatingSelected:l,onSurveyOptionSelected:d,onSurveyFieldUpdate:c}=n(1583);i("survey",{component:s,actions:{onSurveyRatingSelected:l,onSurveyOptionSelected:d,onSurveyFieldUpdate:c},reducer:a,mapStateToProps:o,trackingMap:r})},1370:function(e,t,n){"use strict";const i=n(7);e.exports=function(e){return i(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1583:function(e,t,n){"use strict";t.SURVEY_RATING_SELECTED="SURVEY_RATING_SELECTED",t.SURVEY_OPTION_SELECTED="SURVEY_OPTION_SELECTED",t.SURVEY_FIELD_UPDATE="SURVEY_FIELD_UPDATE",t.onSurveyRatingSelected=e=>({type:t.SURVEY_RATING_SELECTED,payload:e}),t.onSurveyOptionSelected=e=>({type:t.SURVEY_OPTION_SELECTED,payload:e}),t.onSurveyFieldUpdate=e=>({type:t.SURVEY_FIELD_UPDATE,payload:e})},2115:function(e,t,n){"use strict";const i=n(2),s=n(1),o=n(0),r=n(7),{Component:a}=n(468),l=n(1370),d=n(2116),c=n(2117),u=n(2118),p=n(2119),y=i({displayName:"Survey",propTypes:{component:s.object.isRequired,setComponentAsReady:s.func.isRequired,setComponentAsViewed:s.func.isRequired,setComponentAsStarted:s.func.isRequired,setComponentAsComplete:s.func.isRequired,onSurveyRatingSelected:s.func.isRequired,onSurveyOptionSelected:s.func.isRequired,onSurveyFieldUpdate:s.func.isRequired,buttons:s.object.isRequired,articleStyle:s.string,theme:s.object.isRequired,isPageReady:s.bool,styles:s.any,showPrompt:s.func.isRequired},componentDidMount:function(){const{component:e,setComponentAsReady:t}=this.props;t(e._id)},onVisibilityChange:function(e,{top:t,bottom:n}){const{props:i}=this;t&&(this.isInviewTop=!0),n&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&i.setComponentAsViewed(i.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},showDialog:function(e){const t={title:e.title,body:e.body,_dismiss:{text:e.closeButtonText}};this.props.showPrompt(t)},getButtonSettings:function(){const{articleStyle:e,theme:t}=this.props;let n=t._button._settings;if(e&&"none"!==e){n=t._articleStyles[e]._elements._button._settings}return n},getButtonsClassName:function(e){const{buttons:t}=this.props;return r("ev-buttons",{"ev-buttons-full":e._isFullLayout,"ev-buttons-hide-marking-icon":e._shouldHideMarkingIcon,"ev-buttons-hide-show-feedback":t._showFeedback&&t._showFeedback._isDisabled,"ev-buttons-action-is-right":e._isActionButtonOnRight,"ev-buttons-individual-styles":e._hasIndividualButtonStyles})},onSurveyStarted:function(){const{component:e,setComponentAsStarted:t}=this.props;e._hasStarted||t(e._id)},onSurveyRatingSelected:function(e){const{component:t,onSurveyRatingSelected:n}=this.props;n({componentId:t._id,rating:e}),this.onSurveyStarted()},onSurveyOptionSelected:function(e,t){const{component:n,onSurveyOptionSelected:i}=this.props;i({componentId:n._id,optionId:e,isSelected:t}),this.onSurveyStarted()},onSurveyFieldUpdate:function(e,t){const{component:n,onSurveyFieldUpdate:i}=this.props;i({componentId:n._id,fieldId:e,value:t}),this.onSurveyStarted()},onSubmitClicked:function(){const{component:e,setComponentAsComplete:t}=this.props,{_isRatingsEnabled:n,_rating:i,_dialogs:s}=e;if(n&&0===i)return this.showDialog(s._noRatingDialog);t(e._id),this.showDialog(s._successDialog)},renderSurveyRatings:function(){const{_isRatingsEnabled:e,_ratings:t,_starColor:n,_starSelectedColor:i,_rating:s,_isComplete:r}=this.props.component;if(e)return o.createElement(c,{rating:s,ratings:t,starColor:n,starSelectedColor:i,onSurveyRatingSelected:this.onSurveyRatingSelected,swatches:this.props.theme._swatches,isDisabled:r})},renderSurveyOptions:function(){const{_options:e,_isComplete:t}=this.props.component;if(e.length)return o.createElement(u,{options:e,onSurveyOptionSelected:this.onSurveyOptionSelected,isDisabled:t})},renderSurveyFields:function(){const{_id:e,_fields:t,_isComplete:n}=this.props.component;if(t.length)return o.createElement(p,{componentId:e,fields:t,onSurveyFieldUpdate:this.onSurveyFieldUpdate,isDisabled:n})},renderSurveyComplete:function(){const{component:e}=this.props,{_isComplete:t,_completeState:n}=e;if(t)return o.createElement(d,{text:n.text,icon:n._icon})},renderButtons:function(){const{buttons:e,component:t}=this.props,n=this.getButtonSettings();return o.createElement("div",{className:this.getButtonsClassName(n)},o.createElement("div",{className:"ev-buttons-cluster-bottom ev-clearfix"},o.createElement("button",{className:"ev-button ev-buttons-action ev-primary ev-survey-submit",onClick:this.onSubmitClicked,"aria-label":e._submit.ariaLabel,disabled:t._isComplete},this.props.component.surveySubmitButtonText)))},render:function(){const{props:e}=this;return o.createElement(a,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},o.createElement("div",{className:l(e.component)},o.createElement("div",{className:"ev-survey-form"},this.renderSurveyRatings(),this.renderSurveyOptions(),this.renderSurveyFields()),this.renderSurveyComplete(),this.renderButtons()))}});e.exports=y},2116:function(e,t,n){"use strict";const i=n(2),s=n(0),o=n(24),r=i({displayName:"SurveyComplete",renderIcon:function(){if(this.props.icon)return s.createElement("i",{className:"ev-icon ev-icon-"+this.props.icon,style:{color:"inherit"}})},renderText:function(){if(this.props.text)return s.createElement(o,{html:this.props.text})},render:function(){return s.createElement("div",{className:"ev-label ev-survey-complete"},this.renderIcon(),this.renderText())}});e.exports=r},2117:function(e,t,n){"use strict";const i=n(31),s=n(2),o=n(0),r=n(7),a=n(1),l=n(140),d=["one","two","three","four","five"],c=s({displayName:"SurveyRatingItem",propTypes:{rating:a.number.isRequired,onSelected:a.func.isRequired,isSelected:a.bool.isRequired,starColor:a.string.isRequired,starSelectedColor:a.string.isRequired,onHover:a.func.isRequired,isDisabled:a.bool.isRequired,ariaLabel:a.string},onSelected:function(e){e.preventDefault();const{rating:t,onSelected:n}=this.props;n(t)},onMouseEnter:function(){const{rating:e,onHover:t}=this.props;t(!0,e)},onMouseLeave:function(){this.props.onHover(!1)},render:function(){const{isSelected:e,starColor:t,starSelectedColor:n,ariaLabel:i,isDisabled:s}=this.props;return o.createElement("button",{className:"ev-star-rating-star",onClick:this.onSelected,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,"aria-label":i,"aria-pressed":e,disabled:s,style:{pointerEvents:s?"none":"all"}},o.createElement("i",{className:r("ev-icon",{"ev-icon-star-empty":!e,"ev-icon-star":e}),style:{color:e?n:t}}))}}),u=s({displayName:"SurveyRating",propTypes:{rating:a.number.isRequired,ratings:a.object.isRequired,onSurveyRatingSelected:a.func.isRequired,starColor:a.string.isRequired,starSelectedColor:a.string.isRequired,swatches:a.object.isRequired,isDisabled:a.bool.isRequired},getDefaultProps:function(){return{rating:0,isDisabled:!1}},getInitialState:function(){return{_isHoverMode:!1,_hoverRating:1}},onItemHover:function(e,t=1){this.setState({_isHoverMode:e,_hoverRating:t})},renderItems:function(){const{rating:e,ratings:t,onSurveyRatingSelected:n,starColor:s,starSelectedColor:r,swatches:a,isDisabled:u}=this.props,{_isHoverMode:p,_hoverRating:y}=this.state,m=l(s,a),S=l(r,a);return i(d,(i,s)=>{const r=s+1,a=p?r<=y:r<=e;return o.createElement(c,{key:s,rating:r,isSelected:a,onSelected:n,onHover:this.onItemHover,starColor:m,starSelectedColor:S,ariaLabel:t[i],isDisabled:u})})},renderLabel:function(){const{rating:e,ratings:t}=this.props,{_isHoverMode:n,_hoverRating:i}=this.state,s=t[d[(n?i:e)-1]];if(s)return o.createElement("span",{className:"ev-label"},s)},render:function(){return o.createElement("div",{className:"ev-star-rating"},this.renderItems(),this.renderLabel())}});e.exports=u},2118:function(e,t,n){"use strict";var i=n(30)(n(21));const s=n(31),o=n(2),r=n(0),a=n(7),l=n(1),d=o({displayName:"SurveyOption",propTypes:{_id:l.string.isRequired,text:l.string.isRequired,_isSelected:l.bool.isRequired,onSurveyOptionSelected:l.func.isRequired,isDisabled:l.bool.isRequired},getDefaultProps:function(){return{_isSelected:!1}},onOptionChange:function(e){e.preventDefault();const{_id:t,onSurveyOptionSelected:n}=this.props;n(t,e.target.checked)},render:function(){const{_id:e,text:t,_isSelected:n,isDisabled:i}=this.props;return r.createElement("label",{className:a("ev-survey-button",{"ev-selected":n}),htmlFor:e,style:{pointerEvents:i?"none":"all"}},r.createElement("input",{id:e,className:"ev-survey-button-checkbox ev-input-checkbox",type:"checkbox",checked:n,onChange:this.onOptionChange,disabled:i}),r.createElement("span",null,t))}}),c=o({displayName:"SurveyOptions",propTypes:{options:l.array.isRequired,onSurveyOptionSelected:l.func.isRequired,isDisabled:l.bool.isRequired},getDefaultProps:function(){return{options:[],isDisabled:!1}},renderItems:function(){const{options:e,onSurveyOptionSelected:t,isDisabled:n}=this.props;return s(e,e=>r.createElement(d,(0,i.default)({key:e._id,onSurveyOptionSelected:t,isDisabled:n},e)))},render:function(){return r.createElement("div",{className:"ev-survey-buttons-container"},this.renderItems())}});e.exports=c},2119:function(e,t,n){"use strict";var i=n(30)(n(21));const s=n(31),o=n(2),r=n(0),a=n(1),l=o({displayName:"SurveyField",propTypes:{componentId:a.string.isRequired,_id:a.string.isRequired,_userAnswer:a.string.isRequired,labelText:a.string,placeholderText:a.string,onSurveyFieldUpdate:a.func.isRequired,isDisabled:a.bool.isRequired},getDefaultProps:function(){return{_isSelected:!1,_userAnswer:""}},onFieldChange:function(e){const{_id:t,onSurveyFieldUpdate:n}=this.props;n(t,e.target.value)},renderLabel:function(){const{componentId:e,_id:t,labelText:n,isDisabled:i}=this.props;if(n)return r.createElement("label",{className:"ev-survey-label ev-label",htmlFor:e+t,dangerouslySetInnerHTML:{__html:n},style:{pointerEvents:i?"none":"all"}})},render:function(){const{componentId:e,_id:t,placeholderText:n,_userAnswer:i,isDisabled:s}=this.props;return r.createElement("div",{className:"ev-survey-field"},this.renderLabel(),r.createElement("textarea",{id:e+t,className:"ev-text-area",placeholder:n,value:i,onChange:this.onFieldChange,disabled:s}))}}),d=o({displayName:"SurveyFields",propTypes:{componentId:a.string.isRequired,fields:a.array.isRequired,onSurveyFieldUpdate:a.func.isRequired,isDisabled:a.bool.isRequired},getDefaultProps:function(){return{fields:[],isDisabled:!1}},renderItems:function(){const{fields:e,componentId:t,onSurveyFieldUpdate:n,isDisabled:o}=this.props;return s(e,e=>r.createElement(l,(0,i.default)({key:e._id,componentId:t,onSurveyFieldUpdate:n,isDisabled:o},e)))},render:function(){return r.createElement("div",{className:"ev-survey-fields"},this.renderItems())}});e.exports=d},2120:function(e,t,n){"use strict";const i=n(78);e.exports=(e,t)=>({buttons:e.course._buttons,articleStyle:i(e,t,"article")._classes})},2121:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_rating:{fieldKey:"_rating",type:"Number",shouldRestore:!0},_options:{fieldKey:"_options",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!1},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_fields:{fieldKey:"_fields",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_items:{fieldKey:"_items",type:"Function",shouldRestore:!1,mapCallback:function(e,t){const n=[],{_fields:i,_options:s}=t;return Array.isArray(i)&&i.forEach(e=>{n.push({_id:e.name||"field",text:e.labelText,value:e._userAnswer||""})}),Array.isArray(s)&&s.forEach(e=>{n.push({_id:e.name||"option",text:e.text,_isSelected:!!e._isSelected})}),n}},_score:{fieldKey:"_score",type:"Function",shouldRestore:!1,mapCallback:function(e,t){return t._rating}}}},2122:function(e,t,n){"use strict";const i=n(31),{SETUP_COMPONENT:s}=n(61),{SURVEY_RATING_SELECTED:o,SURVEY_OPTION_SELECTED:r,SURVEY_FIELD_UPDATE:a}=n(1583);e.exports=(e,t)=>{switch(t.type){case s:return e._isComplete?e:{...e,_rating:0,_options:i(e._options,e=>({...e,_isSelected:!1})),_fields:i(e._fields,e=>({...e,_userAnswer:""}))};case o:return{...e,_rating:t.payload.rating};case r:return{...e,_options:i(e._options,e=>e._id===t.payload.optionId?{...e,_isSelected:t.payload.isSelected}:e)};case a:return{...e,_fields:i(e._fields,e=>e._id===t.payload.fieldId?{...e,_userAnswer:t.payload.value}:e)};default:return e}}}}]);