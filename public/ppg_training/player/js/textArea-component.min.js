(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{1299:function(e,t,n){"use strict";const{registerComponent:s}=n(4),i=n(2140),o=n(2141),{saveUserAnswer:r,editUserAnswer:a}=n(1587);s("textArea",{component:i,actions:{saveUserAnswer:r,editUserAnswer:a},reducer:o,mapStateToProps:n(2142),trackingMap:n(2143)})},1370:function(e,t,n){"use strict";const s=n(7);e.exports=function(e){return s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1371:function(e,t,n){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:s}=e;return!0===s&&!0===n._isReady&&!0!==n[t]}},1372:function(e,t,n){"use strict";e.exports=function(e,t,n,s,i){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&i&&i(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1380:function(e,t,n){var s=n(88),i=n(49);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==s(e)}},1396:function(e,t,n){var s=n(1380);e.exports=function(e){return s(e)&&e!=+e}},1427:function(e,t,n){"use strict";const s=n(2),i=n(1),o=n(0),r=n(7),a=s({displayName:"TextArea",propTypes:{value:i.string.isRequired,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:function(){return{value:""}},getClassName:function(){return r("ev-text-area",this.props.className)},onChange:function(e){this.props.onChange(e.target.value)},componentDidUpdate:function(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},render:function(){return o.createElement("textarea",{ref:e=>this._textArea=e,"aria-label":this.props.ariaLabel,value:this.props.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:this.props.placeholder,className:this.getClassName(),style:{minHeight:this.props.minHeight},disabled:this.props.isDisabled})}});e.exports=a},1490:function(e,t,n){"use strict";const s=n(1396),i=n(2),o=n(1),r=n(0),a=n(7),u=i({displayName:"Input",propTypes:{type:o.oneOf(["text","number"]),value:o.oneOfType([o.string,o.number]),onChange:o.func.isRequired,onFocus:o.func,onBlur:o.func,className:o.string,placeholder:o.string,min:o.number,max:o.number,ariaLabel:o.string,isDisabled:o.bool,shouldFocus:o.bool},getDefaultProps:function(){return{type:"text"}},onChange:function(e){const{type:t,min:n,max:i,onChange:o}=this.props;let r=e.target.value;if("number"===t){if(r=parseInt(r),!s(r)&&(r<n||r>i))return;s(r)&&(r="")}o(r)},componentDidUpdate:function(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._input.focus()},render:function(){const{className:e,type:t,value:n,onFocus:s,onBlur:i,placeholder:o,min:u,max:c,ariaLabel:p,isDisabled:l}=this.props;return r.createElement("input",{ref:e=>this._input=e,className:a("ev-input ev-input-text",e),type:t,value:n,onChange:this.onChange,onFocus:s,onBlur:i,placeholder:o,min:u,max:c,disabled:l,"aria-label":p})}});e.exports=u},1587:function(e,t,n){"use strict";t.TEXTAREA_SAVE_USER_ANSWER="TEXTAREA_SAVE_USER_ANSWER",t.TEXTAREA_EDIT_USER_ANSWER="TEXTAREA_EDIT_USER_ANSWER",t.saveUserAnswer=e=>({type:t.TEXTAREA_SAVE_USER_ANSWER,payload:e}),t.editUserAnswer=e=>({type:t.TEXTAREA_EDIT_USER_ANSWER,payload:e})},2140:function(e,t,n){"use strict";const s=n(2),i=n(1),o=n(0),r=n(7),{Component:a}=n(468),u=n(1427),c=n(1490),p=n(1370),l=n(1371),d=n(1372),m=s({displayName:"TextAreaComponent",propTypes:{component:i.object.isRequired,setComponentAsReady:i.func.isRequired,setComponentAsViewed:i.func.isRequired,setComponentAsComplete:i.func.isRequired,updateVariable:i.func.isRequired,saveUserAnswer:i.func.isRequired,editUserAnswer:i.func.isRequired,styles:i.object,articleStyle:i.string.isRequired,theme:i.object.isRequired},getInitialState:function(){return{_userAnswer:this.props.component._userAnswer||"",_previousUserAnswer:void 0}},componentDidMount:function(){this.props.setComponentAsReady(this.props.component._id)},onTextAreaChange:function(e){this.setState({_userAnswer:e})},onSubmitClicked:function(e){e.preventDefault();const{props:t,state:n}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:n._userAnswer}),t.setComponentAsComplete(t.component._id,{_isSubmitted:!0}),t.component._canSaveToVariable&&t.updateVariable(t.component._variableId,n._userAnswer,t.component._variableUpdateType,n._previousUserAnswer)},onEditClicked:function(e){e.preventDefault();const{props:t,state:n}=this;this.setState({_previousUserAnswer:n._userAnswer}),t.editUserAnswer({componentId:t.component._id})},onVisibilityChange:function(...e){d(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight:function(){const{component:e}=this.props;return e._hasMinimumHeight?e._minimumHeight:300},getButtonSettings:function(){const{articleStyle:e,theme:t}=this.props;let n=t._button._settings;if(e&&"none"!==e){n=t._articleStyles[e]._elements._button._settings}return n},renderTextArea:function(){const{component:e}=this.props,t=e._isComplete&&!e._isEditing;return e._displayAsTextInput?o.createElement(c,{ariaLabel:e.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,type:"text",isDisabled:t,shouldFocus:e._isEditing}):o.createElement(u,{ariaLabel:e.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,minHeight:this.getTextAreaMinHeight(),isDisabled:t,shouldFocus:e._isEditing})},renderSubmittedLabel:function(){const{_isSubmitted:e,submittedLabelText:t}=this.props.component;if(e&&t)return o.createElement("div",{className:"ev-label"},t)},renderButtons:function(){const{submitButtonText:e,editButtonText:t,_isEditing:n,_isComplete:s,_allowEditing:i}=this.props.component,{_userAnswer:a}=this.state,{_isActionButtonOnRight:u}=this.getButtonSettings(),c=!s||n,p=i&&s&&!n;return o.createElement("div",{className:r("ev-buttons",{"ev-switch-buttons":u})},c&&o.createElement("button",{className:"ev-button ev-button-submit",onClick:this.onSubmitClicked,disabled:""===a},e),p&&o.createElement("button",{className:"ev-button ev-button-edit",onClick:this.onEditClicked},t))},render:function(){const{component:e,styles:t}=this.props;return o.createElement(a,{component:e,styles:t,isVisibilitySensorActive:l(this.props),onVisibilityChange:this.onVisibilityChange},o.createElement("div",null,o.createElement("div",{className:p(e)},this.renderTextArea(),this.renderSubmittedLabel(),this.renderButtons())))}});e.exports=m},2141:function(e,t,n){"use strict";const{TEXTAREA_SAVE_USER_ANSWER:s,TEXTAREA_EDIT_USER_ANSWER:i}=n(1587);e.exports=function(e,t){switch(t.type){case s:return{...e,_userAnswer:t.payload.userAnswer,_isComplete:!0,_isSubmitted:!0,_isEditing:!1};case i:return{...e,_isEditing:!0,_isSubmitted:!1};default:return e}}},2142:function(e,t,n){"use strict";const s=n(78);e.exports=(e,t)=>({articleStyle:s(e,t,"article")._classes})},2143:function(e,t,n){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}}}]);