(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1331:function(e,t,r){"use strict";const{registerReducer:s,registerEpics:n}=r(4),i=r(1377),a=r(2293),{resourcesElementsEpic:c}=r(2294);s("resources",a),n(c,i("resources"))},1377:function(e,t,r){"use strict";const s=r(8),{Observable:n}=r(5),{setLocationReadyState:i,PUSH_LOCATION:a}=r(9),c=r(303),o=r(218);e.exports=(e,t)=>(r,l)=>r.filter(({type:t})=>{if(t!==a)return;const{navigationStatus:r,path:s}=l.getState().location;return"plugin"===r&&s[0]===e}).switchMap(()=>{const r=l.getState(),{device:a,course:u}=r;let m;if(m=t?t(r):s(u,["_"+e,"_heroImage"]),!m||!m._graphic)return n.empty();const p=c(m._graphic.src,m._graphic.srcAdvanced,!0);return p?n.concat(n.of(i(!1)),n.bindCallback(o)(p,!1).map(()=>i(!0))):n.empty()})},1379:function(e,t,r){"use strict";const s=r(8),{store:n}=r(4);e.exports=function(e,t,r){const{course:i,theme:a}=n.getState(),c=i[e],o=s(c,t),l=s(a,["_extensions",e,"_settings",t]);return o||l||r}},1604:function(e,t,r){"use strict";t.RESOURCES_FILTER_CHANGED="RESOURCES_FILTER_CHANGED",t.resourcesFilterChanged=e=>({type:t.RESOURCES_FILTER_CHANGED,payload:e})},1605:function(e,t,r){"use strict";e.exports={ALL:"all",DOCUMENT:"document",LINK:"link"}},2293:function(e,t,r){"use strict";const s=r(31),{SETUP_APP:n}=r(9),{RESOURCES_FILTER_CHANGED:i}=r(1604),a=r(1605),c={filterType:a.ALL};function o(e,t){return s(e,e=>t===a.ALL||e._type===t?{...e,_isVisible:!0}:{...e,_isVisible:!1})}e.exports=(e=c,t)=>{if(t.type===n){const e=t.payload.course._resources;return e&&e._isEnabled?{...c,...e,_resourcesItems:o(e._resourcesItems,c.filterType)}:c}if(!e._isEnabled)return c;switch(t.type){case i:return{...e,filterType:t.payload,_resourcesItems:o(e._resourcesItems,t.payload)};default:return e}}},2294:function(e,t,r){"use strict";var s=r(5);const n=r(8),{SETUP_APP:i}=r(9),{addElement:a}=r(42),{NavigationSideItem:c}=r(475),o=r(1379),l=r(2295);t.resourcesElementsEpic=(e,t)=>e.filter(e=>{var r;return e.type===i&&(null===(r=t.getState().course._resources)||void 0===r?void 0:r._isEnabled)}).mergeMap(()=>{const e=t.getState().course._resources,r=[a({parent:"router",name:"resources",path:"/resources",exact:!0,component:l,getShouldPersist:e=>n(e,"course._resources._isEnabled",!1)})];return e._shouldDisableNavigationSideItem||r.push(a({parent:"navigationSide",name:"resources",component:c,props:{link:"/resources",icon:o("_resources","_navigationIcon","box"),label:e.title}})),s.Observable.of(...r)})},2295:function(e,t,r){"use strict";const s=r(32),n=r(8),i=r(2),a=r(1),c=r(0),{connect:o}=r(6),l=r(7),{ContentContainer:u,HeroImage:m}=r(302),p=r(174),d=r(24),v=r(33),h=r(62),{resourcesFilterChanged:E}=r(1604),_=r(1605),g=r(2296),f=i({displayName:"Resources",propTypes:{theme:a.object.isRequired,isReady:a.bool.isRequired,resources:a.object.isRequired,resourcesFilterChanged:a.func.isRequired},onFilterChange(e){this.props.resourcesFilterChanged(e.target.value)},getResourceTypes(){const e=[];return this.props.resources._resourcesItems.forEach(({_type:t})=>{e.includes(t)||e.push(t)}),e},renderTitle(){if(this.props.resources.title)return c.createElement("div",{className:"ev-header-title"},c.createElement(d,{element:"h1",className:"ev-header-title-inner",html:this.props.resources.title}))},renderDescription(){if(this.props.resources.description)return c.createElement(v,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:this.props.resources.description})},renderFilter(){const{resources:e}=this.props,t=this.getResourceTypes();if(t.length<=1)return null;t.unshift(_.ALL);const r=t.map(t=>c.createElement("option",{key:t,value:t},e._filterButtons[t]));return c.createElement("div",{className:"ev-resources-filter ev-action-bar"},c.createElement("div",{className:"ev-resources-filter-inner ev-action-bar-inner"},c.createElement("select",{value:e.filterType,onChange:this.onFilterChange,"aria-label":e.filterAriaLabel},r)))},renderItems(){const{resources:e}=this.props;return s(e._resourcesItems,{_isVisible:!0}).map(e=>c.createElement(g,{key:e._id,item:e}))},renderContent(){if(this.props.resources._resourcesItems)return c.createElement("div",{className:"ev-content ev-extension-content"},c.createElement("div",{className:"ev-content-inner"},c.createElement("div",{className:"ev-content-row"},c.createElement("div",{className:"ev-content-row-inner"},c.createElement("div",{className:"ev-component-container"},c.createElement("div",{className:"ev-component"},c.createElement("div",{className:"ev-component-inner"},c.createElement("ul",{className:"ev-list-items"},this.renderItems()))))))))},renderHeroImage(){const e=this.props.resources._heroImage;if(null!=e&&e._isEnabled)return c.createElement(h.Provider,{value:this.props.resources.title?2:1},c.createElement(m,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e;const{props:t}=this,r=null===(e=t.resources)||void 0===e?void 0:e._headerIcon,s=n(t.theme,"_extensions._resources._settings._headerIcon"),i=r||s;return c.createElement(u,{region:"resources",className:"ev-extension ev-resources",ariaLabel:t.resources.ariaLabel},c.createElement("div",{className:"ev-extension-inner"},t.isReady?null:c.createElement(p,null),c.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),c.createElement("div",{className:l("ev-header",{"ev-header-with-action-bar":this.getResourceTypes().length>1})},c.createElement("div",{className:l("ev-header-inner ev-clearfix",{"ev-no-graphic":!i})},c.createElement("div",{className:"ev-header-left"},this.renderTitle(),this.renderDescription()),i&&c.createElement("div",{className:"ev-header-right"},c.createElement("i",{className:"ev-icon ev-icon-"+i})))),this.renderFilter(),this.renderContent()))}});e.exports=o(e=>({resources:e.resources,theme:e.theme,isReady:e.location.isLocationReady}),{resourcesFilterChanged:E})(f)},2296:function(e,t,r){"use strict";const s=r(1),n=r(0),i=r(76),a=r(33),c=r(24),o=({item:e})=>n.createElement("li",{className:"ev-resources-item ev-list-item"},n.createElement("div",{className:"ev-resources-item ev-list-item-inner"},n.createElement("div",{className:"ev-list-item-left"},n.createElement("div",{className:"ev-resources-item-title ev-list-item-title"},n.createElement(c,{className:"ev-resources-item-title-inner ev-list-item-title-inner",html:e.title})),n.createElement(a,{className:"ev-resources-item-description",innerClassName:"ev-resources-item-description-inner",body:e.description})),n.createElement("div",{className:"ev-list-item-right"},(()=>{const t=e.view||"View",r=e._asset?i(e._asset):e._link;return n.createElement("a",{className:"ev-resources-item-open ev-button ev-primary",target:"_blank",href:r,rel:"noreferrer"},t)})())));o.propTypes={item:s.shape({title:s.string,description:s.string,view:s.string,_asset:s.object,_link:s.string}).isRequired},e.exports=o}}]);