(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1283:function(e,t,s){"use strict";const{registerComponent:n}=s(4),i=s(2026),o=s(2027),{saveUserAnswer:r}=s(1555);n("openInput",{component:i,actions:{saveUserAnswer:r},reducer:o,mapStateToProps:s(2028),trackingMap:s(2029)})},1370:function(e,t,s){"use strict";const n=s(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1427:function(e,t,s){"use strict";const n=s(2),i=s(1),o=s(0),r=s(7),a=n({displayName:"TextArea",propTypes:{value:i.string.isRequired,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:function(){return{value:""}},getClassName:function(){return r("ev-text-area",this.props.className)},onChange:function(e){this.props.onChange(e.target.value)},componentDidUpdate:function(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},render:function(){return o.createElement("textarea",{ref:e=>this._textArea=e,"aria-label":this.props.ariaLabel,value:this.props.value,onChange:this.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,placeholder:this.props.placeholder,className:this.getClassName(),style:{minHeight:this.props.minHeight},disabled:this.props.isDisabled})}});e.exports=a},1555:function(e,t,s){"use strict";t.OPENINPUT_SAVE_USER_ANSWER="OPENINPUT_SAVE_USER_ANSWER",t.saveUserAnswer=e=>({type:t.OPENINPUT_SAVE_USER_ANSWER,payload:e})},2026:function(e,t,s){"use strict";const n=s(217),i=s(8),o=s(2),r=s(1),a=s(0),c=s(7),{Component:p,ComponentAssignment:u}=s(468),l=s(1427),d=s(1370),h=o({displayName:"OpenInput",propTypes:{component:r.object.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsStarted:r.func.isRequired,setComponentAsComplete:r.func.isRequired,showFeedback:r.func.isRequired,saveUserAnswer:r.func.isRequired,setAriaLive:r.func.isRequired,articleStyle:r.string,theme:r.object.isRequired,isPageReady:r.bool,styles:r.any},getInitialState:function(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount:function(){const{props:e}=this;e.setComponentAsReady(e.component._id)},UNSAFE_componentWillReceiveProps:function(e){const{component:t}=this.props;e.component._userAnswer!==t._userAnswer&&this.setState({_userAnswer:e.component._userAnswer})},componentDidUpdate:function(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&(this.showSavedModal(),t._userAnswer&&this.showFeedback())},saveUserAnswer:function(e){const{props:t}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:e}),t.component._isSubmitted&&(this.showSavedModal(),e&&this.showFeedback())},showFeedback:function(){const{component:e}=this.props;if(e._canShowFeedback){const t={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};setTimeout(()=>{this.props.showFeedback(t)},200)}},showSavedModal:function(){this.setState({_showSavedModal:!0}),n(()=>{this.setState({_showSavedModal:!1})},1e3)},onTextAreaChange:function(e){this.setState({_userAnswer:e})},onSaveClicked:function(e){e.preventDefault();const{props:t}=this;this.saveUserAnswer(this.state._userAnswer),this.setAriaLive(t.component.savedAriaLiveMessage),t.setComponentAsStarted(t.component._id),t.setComponentAsComplete(t.component._id,{_isSubmitted:!0})},onClearClicked:function(e){e.preventDefault(),this.saveUserAnswer(""),this.setAriaLive(this.props.component.clearedAriaLiveMessage)},setAriaLive:function(e){this.props.setAriaLive({message:e,isAssertive:!0})},onVisibilityChange:function(e,{top:t,bottom:s}){const{props:n}=this;t&&(this.isInviewTop=!0),s&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&n.setComponentAsViewed(n.component._id)},getTextAreaMinHeight:function(){const{component:e}=this.props;let t=300;return e._hasMinimumHeight&&(t=e._minimumHeight),t},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},getButtonSettings:function(){const{articleStyle:e,theme:t}=this.props;let s=t._button._settings;if(e&&"none"!==e){s=t._articleStyles[e]._elements._button._settings}return s},renderTextArea:function(){const{component:e}=this.props;return i(e,"_assignment._isMarked",!1)?a.createElement("div",{className:"ev-openInput-userAnswer"},a.createElement("div",{className:"ev-openInput-userAnswer-inner"},e._userAnswer)):a.createElement(l,{ariaLabel:e.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:e.placeholder,minHeight:this.getTextAreaMinHeight()})},renderButtons:function(){const{component:e}=this.props,{_userAnswer:t}=this.state,s=i(e,"_assignment._isMarked",!1),{_isActionButtonOnRight:n}=this.getButtonSettings();if(!s)return a.createElement("div",{className:c("ev-buttons",{"ev-switch-buttons":n})},a.createElement("button",{className:"ev-button ev-button-save",onClick:this.onSaveClicked,disabled:""===t},e._saveButton),a.createElement("button",{className:"ev-button ev-button-clear",onClick:this.onClearClicked,disabled:""===t},e._clearButton))},renderSaveModal:function(){return a.createElement("div",{className:c("ev-openInput-save-modal",{"ev-is-visible":this.state._showSavedModal}),"aria-hidden":!this.state._showSavedModal},a.createElement("div",{className:"ev-openInput-save-modal-inner"},a.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},renderComponentAssignment:function(){const{component:e}=this.props;if(i(e,"_assignment._isEnabled",!1))return a.createElement(u,{component:e,assignment:e._assignment})},render:function(){const{props:e}=this;return a.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},a.createElement("div",null,a.createElement("div",{className:d(e.component)},this.renderTextArea(),this.renderSaveModal()),this.renderButtons(),this.renderComponentAssignment()))}});e.exports=h},2027:function(e,t,s){"use strict";const{OPENINPUT_SAVE_USER_ANSWER:n}=s(1555);e.exports=function(e,t){switch(t.type){case n:return{...e,_userAnswer:t.payload.userAnswer,_isCorrect:!0,_isSubmitted:!0};default:return e}}},2028:function(e,t,s){"use strict";const n=s(78);e.exports=(e,t)=>({articleStyle:n(e,t,"article")._classes})},2029:function(e,t,s){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},_assignment:{fieldKey:"_assignment",type:"Object",shouldRestore:!0},_assignmentAttempts:{fieldKey:"_assignmentAttempts",type:"Object",shouldRestore:!0}}}}]);