(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1332:function(e,t,i){"use strict";const{registerReducer:s,registerEpics:r}=i(4),n=i(2297),{scormDataReadyEpic:o,scormWrapperInitEpic:a,scormDeserialiseEpic:c,scormTrackerChangeEpic:l,scormFinishEpic:u,scormErrorEpic:d}=i(2298);s("scorm",n),r(o,a,c,l,u,d)},1606:function(e,t,i){"use strict";t.SCORM_WRAPPER_INIT="SCORM_WRAPPER_INIT",t.SCORM_WRAPPER_CHANGE="SCORM_WRAPPER_CHANGE",t.SCORM_DESERIALISE="SCORM_DESERIALISE",t.SCORM_ERROR="SCORM_ERROR",t.scormWrapperInit=()=>({type:t.SCORM_WRAPPER_INIT}),t.scormWrapperChange=e=>({type:t.SCORM_WRAPPER_CHANGE,payload:e}),t.scormDeserialise=()=>({type:t.SCORM_DESERIALISE}),t.scormError=e=>({type:t.SCORM_ERROR,payload:e})},1607:function(e,t,i){"use strict";e.exports={NOT_COMPLETE:"0",COMPLETE:"1",COMPLETE_NOT_CORRECT:"2",COMPLETE_CORRECT:"3"}},2297:function(e,t,i){"use strict";const s=i(10),{FETCH_COURSE_DATA:r}=i(9),{SCORM_WRAPPER_CHANGE:n}=i(1606),o={_isEnabled:!1,_scormVersion:"1.2",_shouldUsePopup:!1,_shouldUseScrollFix:!1,_shouldShowScormErrors:!1,_useAdvancedTracking:!1,_shouldSendScore:!0,_reporting:{_onTrackingCriteriaMet:"passed",_onAssessmentFailure:"failed"},_cmiExitState:"auto",hasWrapperInitialised:!1,hasSCOFinished:!1,suspendData:{}};e.exports=(e=o,t)=>{if(t.type===r){const i=t.payload.config._scorm;return i&&i._isEnabled?s({},e,i):o}if(!e._isEnabled)return o;switch(t.type){case n:return s({},e,t.payload);default:return e}}},2298:function(e,t,i){"use strict";const s=i(8),r=i(304),n=i(93),{Observable:o}=i(5),{SETUP_DATA:a,APP_STARTED:c,setDataReadyState:l,setLearner:u}=i(9),{TRACKABLE_CHANGE:d}=i(96),{WINDOW_BEFORE_UNLOAD:h,WINDOW_UNLOAD:p}=i(123),{SCORM_WRAPPER_INIT:m,SCORM_DESERIALISE:g,SCORM_ERROR:S,scormWrapperInit:f,scormWrapperChange:C,scormDeserialise:_,scormError:R}=i(1606),{COMPONENT_COMPLETED:O}=i(61),{setTracking:I,getTrackingImmediately:M}=i(487),y=i(2299),E=i(2300),w=i(2301).getInstance(),T=i(2304);t.scormDataReadyEpic=(e,t)=>e.filter(e=>{const i=t.getState();if(e.type!==a)return!1;const s=i.scorm;return s&&s._isEnabled}).mergeMap(()=>o.concat(o.of(l("scorm",!1)),o.of(f()),o.of(_()),o.of(l("scorm",!0)))),t.scormWrapperInitEpic=(e,t)=>e.ofType(m).map(()=>{const{scorm:e}=t.getState(),i=s(e,"_useAdvancedTracking",!1);let r=!1,n={};if(w.suppressErrors=!0!==e._shouldShowScormErrors,w.setVersion(e._scormVersion),w.initialize()&&(r=!0),r){let e=w.getSuspendData();e&&(i?(n=T.decompress(e,{inputEncoding:"Base64"}),n=JSON.parse(n)):i||s(n,"completion",!1)?!i&&s(n,"completion",!1)&&(n={_isComplete:n._isCourseComplete,_isPassed:n._isAssessmentPassed,_assessmentAttemptsTaken:n._assessmentAT,_state:n.completion,_lastCompletedComponentId:n._lastCompletedComponentId}):n=JSON.parse(e.replace(/'/g,'"')))}return C({hasWrapperInitialised:r,suspendData:n})}),t.scormDeserialiseEpic=(e,t)=>e.filter(e=>{const i=t.getState();if(e.type!==g)return!1;const s=i.scorm;return s&&s._isEnabled&&s.hasWrapperInitialised&&!s.hasSCOFinished}).mergeMap(()=>{const e=t.getState(),{scorm:i}=e,n=[];if(s(i,"suspendData._state",!1)){const t=s(i,"_useAdvancedTracking",!1);let n={};n=r({},i.suspendData,t?{_state:E(i.suspendData._state,e,!0)}:{_state:{_components:E(i.suspendData._state,e,!1)}}),I(n,!0)}let a=w.getStudentName();if(a){const e=s(i,"_shouldUseSpaceSeparatedNameFormat",!1)?" ":",";a=a.split(e),a.length&&n.push(u({_id:`${a[1]} ${a[0]}`,firstName:a[1],lastName:a[0]}))}return n.length?o.of(...n):o.empty()}),t.scormTrackerChangeEpic=(e,t)=>e.filter(e=>{const i=t.getState();if(i.app.isDataReady&&i.app.hasAppStarted&&(e.type===O||e.type===d)){const e=i.scorm;return e&&e._isEnabled&&e.hasWrapperInitialised&&!e.hasSCOFinished}return!1}).map(e=>{const{scorm:i}=t.getState(),o=M(),{_status:a,_score:c,_state:l}=o;let u=s(i,"suspendData._lastCompletedComponentId","");const d=s(i,"_useAdvancedTracking",!1),h=s(i,"_shouldSendScore",!0),p=y(l,d);e.type===O&&(u=e.payload.componentId);const m=n(r({},o,{_state:p,_lastCompletedComponentId:u}),["_id","_createdAt","_updatedAt","_hasStarted"]);let g=JSON.stringify(m);d&&(g=T.compress(g,{outputEncoding:"Base64"}));try{w.setSuspendData(g),console.log(`Scorm suspend data size: ${new Blob([g]).size} bytes`),h&&w.setScore(c,0,100),"complete"===a||"passed"===a?w.setStatus(i._reporting._onTrackingCriteriaMet):"failed"===a?w.setStatus(i._reporting._onAssessmentFailure):w.setStatus("incomplete")}catch(e){return console.error(e),R(e)}return C({suspendData:m})}),t.scormFinishEpic=(e,t)=>e.filter(e=>{const i=t.getState();if(e.type===p||e.type===h){const e=i.scorm;return e&&e._isEnabled&&e.hasWrapperInitialised&&!e.hasSCOFinished}return!1}).map(()=>{const{scorm:e}=t.getState(),i=M(),{_state:o}=i,a=s(e,"suspendData._lastCompletedComponentId",""),c=s(e,"_useAdvancedTracking",!1),l=s(e,"_cmiExitState","auto"),u=y(o,c),d=n(r({},i,{_state:u,_lastCompletedComponentId:a}),["_id","_createdAt","_updatedAt","_hasStarted"]);let h=JSON.stringify(d);c&&(h=T.compress(h,{outputEncoding:"Base64"}));try{w.setSuspendData(h),w.finish(l)}catch(e){return console.error(e),R(e)}return C({hasSCOFinished:!0})}),t.scormErrorEpic=(e,t)=>e.ofType(S).do(()=>{window.alert("There has been an error saving your progress to the LMS.")}).ignoreElements()},2299:function(e,t,i){"use strict";const s=i(31),r=i(304),n=i(11),o=i(1607);e.exports=(e,t)=>{if(t){const t={};return t._components=s(e._components,e=>[e._isHidden?1:0,e._isComplete?1:0,e._isCorrect?1:0]),t._blocks=s(e._blocks,e=>[e._isHidden?1:0]),t._articles=s(e._articles,e=>[e._isHidden?1:0]),t._contentObjects=s(e._contentObjects,e=>[e._isHidden?1:0]),t._variables=s(e._variables,e=>[e._value]),t._triggers=s(e._triggers,e=>[!1===e._isEnabled?0:1]),r({},e,t)}return function(e){let t="";return n(e,e=>{let i=o.NOT_COMPLETE;const s="question"===e._interactionType;e._isComplete?e._isComplete&&!s?i=o.COMPLETE:e._isComplete&&s&&!e._isCorrect?i=o.COMPLETE_NOT_CORRECT:e._isComplete&&s&&e._isCorrect&&(i=o.COMPLETE_CORRECT):i=o.NOT_COMPLETE,t+=i}),t}(e._components)}},2300:function(e,t,i){"use strict";const s=i(39),r=i(1607);e.exports=(e,t,i)=>{const{components:n,blocks:o,articles:a,contentObjects:c,logic:l}=t;if(i){const t={};return t._components=s(n).keys().map((t,i)=>{const s=e._components[i];return s?{_id:t,_isHidden:1===s[0],_isComplete:1===s[1],_isCorrect:1===s[2]}:{_id:t}}).keyBy("_id").value(),t._blocks=s(o).keys().map((t,i)=>{const s=e._blocks[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}}).keyBy("_id").value(),t._articles=s(a).keys().map((t,i)=>{const s=e._articles[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}}).keyBy("_id").value(),t._contentObjects=s(c).keys().map((t,i)=>{const s=e._contentObjects[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}}).keyBy("_id").value(),t._variables=s(l.variables).keys().map((t,i)=>{const s=e._variables[i];return s?{_id:t,_value:s[0]}:{_id:t}}).keyBy("_id").value(),e._triggers?t._triggers=s(l.triggers.byRefId).keys().map((t,i)=>{const s=l.triggers.byRefId[t],r=e._triggers[i];return r?{_id:s._id,_isEnabled:1===r[0]}:{_id:s._id}}).keyBy("_id").value():t._triggers={},t}return function(e,t){const i=e.split("");return s(t).keys().map((e,t)=>{const s={_id:e,_isComplete:!1,_isCorrect:!1};switch(i[t]){case r.NOT_COMPLETE:break;case r.COMPLETE:s._isComplete=!0;break;case r.COMPLETE_NOT_CORRECT:s._isComplete=!0,s._isCorrect=!1;break;case r.COMPLETE_CORRECT:s._isComplete=!0,s._isCorrect=!0}return s}).keyBy("_id").value()}(e,n)}},2301:function(e,t,i){"use strict";const s=i(1484);i(2302),i(2303);var r=function(){this.setCompletedWhenFailed=!0,this.commitOnStatusChange=!0,this.disableInteractionTracking=!1,this.timedCommitFrequency=10,this.maxCommitRetries=5,this.commitRetryDelay=1e3,this.commitRetryPending=!1,this.commitRetries=0,this.lastCommitSuccessTime=null,this.timedCommitIntervalID=null,this.retryCommitTimeoutID=null,this.logOutputWin=null,this.startTime=null,this.endTime=null,this.lmsConnected=!1,this.finishCalled=!1,this.logger=Logger.getInstance(),this.scorm=pipwerks.SCORM,this.registeredViews=[],window.__debug&&this.showDebugWindow()};function n(e,t){return function(){return t.apply(e,arguments)}}r.instance=null,r.getInstance=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.getVersion=function(){return this.scorm.version},r.prototype.setVersion=function(e){this.scorm.version=e,this.scorm.handleExitMode=this.isSCORM2004()},r.prototype.registerView=function(e){this.registeredViews[this.registeredViews.length]=e},r.prototype.updateViews=function(){for(var e=0;e<this.registeredViews.length;e++)this.registeredViews[e].update(this)},r.prototype.initialize=function(){return this.lmsConnected=this.scorm.init(),this.scorm.handleCompletionStatus&&this.commitOnStatusChange&&this.isFirstSession()&&this.commit(),this.lmsConnected?(this.startTime=new Date,this.initTimedCommit()):this.handleError("Course could not connect to the LMS"),this.lmsConnected},r.prototype.isFirstSession=function(){return"ab-initio"===this.getValue("cmi.core.entry")},r.prototype.setIncomplete=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","incomplete"),this.commitOnStatusChange&&this.commit()},r.prototype.setCompleted=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","completed"),this.commitOnStatusChange&&this.commit()},r.prototype.setPassed=function(){this.isSCORM2004()?(this.setValue("cmi.completion_status","completed"),this.setValue("cmi.success_status","passed")):this.setValue("cmi.core.lesson_status","passed"),this.commitOnStatusChange&&this.commit()},r.prototype.setFailed=function(){this.isSCORM2004()?(this.setValue("cmi.success_status","failed"),this.setCompletedWhenFailed&&this.setValue("cmi.completion_status","completed")):this.setValue("cmi.core.lesson_status","failed"),this.commitOnStatusChange&&this.commit()},r.prototype.getStatus=function(){var e=this.getValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status");switch(e.toLowerCase()){case"passed":case"completed":case"incomplete":case"failed":case"browsed":case"not attempted":case"not_attempted":case"unknown":return e;default:return this.handleError("ScormWrapper::getStatus: invalid lesson status '"+e+"' received from LMS"),null}},r.prototype.setStatus=function(e){switch(e.toLowerCase()){case"incomplete":this.setIncomplete();break;case"completed":this.setCompleted();break;case"passed":this.setPassed();break;case"failed":this.setFailed();break;default:this.handleError("ScormWrapper::setStatus: the status '"+e+"' is not supported.")}},r.prototype.getScore=function(){return this.getValue(this.isSCORM2004()?"cmi.score.raw":"cmi.core.score.raw")},r.prototype.setScore=function(e,t,i){this.isSCORM2004()?this.setValue("cmi.score.raw",e)&&this.setValue("cmi.score.min",t)&&this.setValue("cmi.score.max",i)&&this.setValue("cmi.score.scaled",e/100):(this.setValue("cmi.core.score.raw",e),this.isSupported("cmi.core.score.min")&&this.setValue("cmi.core.score.min",t),this.isSupported("cmi.core.score.max")&&this.setValue("cmi.core.score.max",i))},r.prototype.getLessonLocation=function(){return this.getValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location")},r.prototype.setLessonLocation=function(e){this.setValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location",e)},r.prototype.getSuspendData=function(){return this.getValue("cmi.suspend_data")},r.prototype.setSuspendData=function(e){this.setValue("cmi.suspend_data",e)},r.prototype.getStudentName=function(){return this.getValue(this.isSCORM2004()?"cmi.learner_name":"cmi.core.student_name")},r.prototype.commit=function(){if(this.logger.debug("ScormWrapper::commit"),this.lmsConnected)if(this.commitRetryPending)this.logger.debug("ScormWrapper::commit: skipping this commit call as one is already pending.");else if(this.scorm.save())this.commitRetries=0,this.lastCommitSuccessTime=new Date;else if(this.commitRetries<=this.maxCommitRetries&&!this.finishCalled)this.commitRetries++,this.initRetryCommit();else{var e=this.scorm.debug.getCode(),t="Course could not commit data to the LMS";t+="\nError "+e+": "+this.scorm.debug.getInfo(e),t+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(e),this.handleError(t)}else this.handleError("Course is not connected to the LMS")},r.prototype.finish=function(e){this.logger.debug("ScormWrapper::finish"),this.lmsConnected&&!this.finishCalled?(this.finishCalled=!0,null!=this.timedCommitIntervalID&&window.clearInterval(this.timedCommitIntervalID),this.commitRetryPending&&(window.clearTimeout(this.retryCommitTimeoutID),this.commitRetryPending=!1),this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.endTime=new Date,this.isSCORM2004()?(this.scorm.set("cmi.session_time",this.convertMilliSecondsToSCORM2004Time(this.endTime.getTime()-this.startTime.getTime())),this.scorm.set("cmi.exit","normal")):(this.scorm.set("cmi.core.session_time",this.convertMilliSecondsToSCORMTime(this.endTime.getTime()-this.startTime.getTime())),this.scorm.set("cmi.core.exit","auto"===e?"":e)),this.lmsConnected=!1,this.scorm.quit()||this.handleError("Course could not finish")):this.handleError("Course is not connected to the LMS")},r.prototype.recordInteraction=function(e,t,i,s,r){if(!0!==this.disableInteractionTracking)if(this.isSupported("cmi.interactions._count")){if("choice"===r){for(var n=new Array,o=t.split("#"),a=0;a<o.length;a++)n.push(new ResponseIdentifier(o[a],o[a]));this.recordMultipleChoiceInteraction(e,n,i,null,null,null,s,null)}else if("matching"===r){var c=new Array,l=t.split("#"),u=null;for(a=0;a<l.length;a++)u=l[a].split("."),c.push(new MatchingResponse(u[0],u[1]));this.recordMatchingInteraction(e,c,i,null,null,null,s,null)}}else this.logger.info("ScormWrapper::recordInteraction: cmi.interactions are not supported by this LMS...")},r.prototype.getValue=function(e){if(this.logger.debug("ScormWrapper::getValue: _property="+e),this.finishCalled)this.logger.debug("ScormWrapper::getValue: ignoring request as 'finish' has been called");else{if(this.lmsConnected){var t=this.scorm.get(e),i=this.scorm.debug.getCode(),s="";return 0!==i&&(403===i?this.logger.warn("ScormWrapper::getValue: data model element not initialized"):(s+="Course could not get "+e,s+="\nError Info: "+this.scorm.debug.getInfo(i),s+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(i),this.handleError(s))),this.logger.debug("ScormWrapper::getValue: returning "+t),t+""}this.handleError("Course is not connected to the LMS")}},r.prototype.setValue=function(e,t){if(this.logger.debug("ScormWrapper::setValue: _property="+e+" _value="+t),this.finishCalled)this.logger.debug("ScormWrapper::setValue: ignoring request as 'finish' has been called");else{if(this.lmsConnected){var i=this.scorm.set(e,t),s=this.scorm.debug.getCode(),r="";return i||(0!==s?(r+="Course could not set "+e+" to "+t,r+="\nError Info: "+this.scorm.debug.getInfo(s),r+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(s),this.handleError(r)):this.logger.warn("ScormWrapper::setValue: LMS reported that the 'set' call failed but then said there was no error!")),i}this.handleError("Course is not connected to the LMS")}},r.prototype.isSupported=function(e){if(this.logger.debug("ScormWrapper::isSupported: _property="+e),!this.finishCalled){if(this.lmsConnected){this.scorm.get(e);return 401!==this.scorm.debug.getCode()}return this.handleError("Course is not connected to the LMS"),!1}this.logger.debug("ScormWrapper::isSupported: ignoring request as 'finish' has been called")},r.prototype.initTimedCommit=function(){if(this.logger.debug("ScormWrapper::initTimedCommit"),this.timedCommitFrequency>0){var e=6e4*this.timedCommitFrequency;this.timedCommitIntervalID=window.setInterval(n(this,this.commit),e)}},r.prototype.initRetryCommit=function(){this.logger.debug("ScormWrapper::initRetryCommit"),this.commitRetryPending=!0,this.retryCommitTimeoutID=window.setTimeout(n(this,this.doRetryCommit),this.commitRetryDelay)},r.prototype.doRetryCommit=function(){this.logger.debug("ScormWrapper::doRetryCommit"),this.commitRetryPending=!1,this.commit()},r.prototype.handleError=function(e){console.log(this,r),this.suppressErrors||(this.logger.error(e),this.logOutputWin&&!this.logOutputWin.closed||!confirm("An error has occured:\n\n"+e+"\n\nPress 'OK' to view debug information to send to technical support.")||this.showDebugWindow())},r.prototype.createValidIdentifier=function(e){return e=this.trim(new String(e)),0===s(e.toLowerCase(),"urn:")&&(e=e.substr(4)),e=e.replace(/[^\w\-\(\)\+\.\:\=\@\;\$\_\!\*\'\%]/g,"_")},r.prototype.createResponseIdentifier=function(e,t){return e=1!=e.length||e.search(/\w/)<0?"":e.toLowerCase(),t=this.createValidIdentifier(t),new ResponseIdentifier(e,t)},r.prototype.recordInteraction12=function(e,t,i,s,r,n,o,a,c,l,u,d){var h,p,m,g;return""===(m=this.getValue("cmi.interactions._count"))&&(m=0),!0===i||"true"===i||"correct"===i?g="correct":!1===i||"false"===i||"wrong"===i?g="wrong":"unanticipated"===i?g="unanticipated":"neutral"===i&&(g="neutral"),h=(h=this.setValue("cmi.interactions."+m+".id",e))&&this.setValue("cmi.interactions."+m+".type",l),!1===(p=this.setValue("cmi.interactions."+m+".student_response",t))&&(p=this.setValue("cmi.interactions."+m+".student_response",u)),h=h&&p,null!=s&&""!==s&&(!1===(p=this.setValue("cmi.interactions."+m+".correct_responses.0.pattern",s))&&(p=this.setValue("cmi.interactions."+m+".correct_responses.0.pattern",d)),h=h&&p),null!=g&&""!==g&&(h=h&&this.setValue("cmi.interactions."+m+".result",g)),null!=n&&""!==n&&(h=h&&this.setValue("cmi.interactions."+m+".weighting",n)),null!=o&&""!==o&&(h=h&&this.setValue("cmi.interactions."+m+".latency",this.convertMilliSecondsToSCORMTime(o))),null!=a&&""!==a&&(h=h&&this.setValue("cmi.interactions."+m+".objectives.0.id",a)),h=h&&this.setValue("cmi.interactions."+m+".time",this.convertDateToCMITime(c))},r.prototype.recordInteraction2004=function(e,t,i,s,r,n,o,a,c,l){var u,d,h;return i=new String(i),""===(d=this.getValue("cmi.interactions._count"))&&(d=0),h=!0===i||"true"===i||"correct"===i?"correct":!1===i||"false"==i||"wrong"===i?"incorrect":"unanticipated"===i?"unanticipated":"neutral"===i?"neutral":"",e=this.createValidIdentifier(e),u=(u=(u=this.setValue("cmi.interactions."+d+".id",e))&&this.setValue("cmi.interactions."+d+".type",l))&&this.setValue("cmi.interactions."+d+".learner_response",t),null!=h&&null!=h&&""!=h&&(u=u&&this.setValue("cmi.interactions."+d+".result",h)),null!=s&&null!=s&&""!=s&&(u=u&&this.setValue("cmi.interactions."+d+".correct_responses.0.pattern",s)),null!=r&&null!=r&&""!=r&&(u=u&&this.setValue("cmi.interactions."+d+".description",r)),null!=n&&null!=n&&""!=n&&(u=u&&this.setValue("cmi.interactions."+d+".weighting",n)),null!=o&&null!=o&&""!=o&&(u=u&&this.setValue("cmi.interactions."+d+".latency",this.convertMilliSecondsToSCORM2004Time(o))),null!=a&&null!=a&&""!=a&&(u=u&&this.setValue("cmi.interactions."+d+".objectives.0.id",a)),u=u&&this.setValue("cmi.interactions."+d+".timestamp",this.convertDateToISO8601Timestamp(c))},r.prototype.recordMultipleChoiceInteraction=function(e,t,i,s,r,n,o,a){var c=null,l=null;if(t.constructor==String)c=new Array(this.createResponseIdentifier(t,t));else if(t.constructor==ResponseIdentifier)c=new Array(t);else if(t.constructor==Array||t.constructor.toString().search("Array")>0)c=t;else{if(!(window.console&&"(Internal Function)"==t.constructor.toString()&&t.length>0))return this.handleError("ScormWrapper::recordMultipleChoiceInteraction: response is not in the correct format"),!1;c=t}if(null!=s&&null!=s&&""!=s)if(s.constructor==String)l=new Array(this.createResponseIdentifier(s,s));else if(s.constructor==ResponseIdentifier)l=new Array(s);else if(s.constructor==Array||s.constructor.toString().search("Array")>0)l=s;else{if(!(window.console&&"(Internal Function)"==s.constructor.toString()&&s.length>0))return this.handleError("ScormWrapper::recordMultipleChoiceInteraction: correct response is not in the correct format"),!1;l=s}else l=new Array;for(var u=new Date,d="",h="",p="",m="",g=0;g<c.length;g++)d.length>0&&(d+=this.isSCORM2004()?"[,]":","),h.length>0&&(h+=","),d+=this.isSCORM2004()?c[g].Long:c[g].Short,h+=c[g].Long;for(g=0;g<l.length;g++)p.length>0&&(p+=this.isSCORM2004()?"[,]":","),m.length>0&&(m+=","),p+=this.isSCORM2004()?l[g].Long:l[g].Short,m+=l[g].Long;return this.isSCORM2004()?this.recordInteraction2004(e,d,i,p,r,n,o,a,u,"choice"):this.recordInteraction12(e,h,i,m,r,n,o,a,u,"choice",d,p)},r.prototype.recordMatchingInteraction=function(e,t,i,s,r,n,o,a){var c=null,l=null;if(t.constructor==MatchingResponse)c=new Array(t);else if(t.constructor==Array||t.constructor.toString().search("Array")>0)c=t;else{if(!(window.console&&"(Internal Function)"==t.constructor.toString()&&t.length>0))return this.handleError("ScormWrapper::recordMatchingInteraction: response is not in the correct format"),!1;c=t}if(null!=s&&null!=s)if(s.constructor==MatchingResponse)l=new Array(s);else if(s.constructor==Array||s.constructor.toString().search("Array")>0)l=s;else{if(!(window.console&&"(Internal Function)"==s.constructor.toString()&&s.length>0))return this.handleError("ScormWrapper::recordMatchingInteraction: correct response is not in the correct format"),!1;l=s}else l=new Array;for(var u=new Date,d="",h="",p="",m="",g=0;g<c.length;g++)d.length>0&&(d+=","),h.length>0&&(h+=this.isSCORM2004()?"[,]":","),d+=c[g].Source.Short+"."+c[g].Target.Short,h+=c[g].Source.Long+(this.isSCORM2004()?"[.]":".")+c[g].Target.Long;for(g=0;g<l.length;g++)p.length>0&&(p+=","),m.length>0&&(m+=this.isSCORM2004()?"[,]":","),p+=l[g].Source.Short+"."+l[g].Target.Short,m+=l[g].Source.Long+(this.isSCORM2004()?"[.]":".")+l[g].Target.Long;return this.isSCORM2004()?this.recordInteraction2004(e,h,i,m,r,n,o,a,u,"matching"):this.recordInteraction12(e,h,i,m,r,n,o,a,u,"matching",d,p)},r.prototype.showDebugWindow=function(){this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.logOutputWin=window.open("log_output.html","Log","width=600,height=300,status=no,scrollbars=yes,resize=yes,menubar=yes,toolbar=yes,location=yes,top=0,left=0"),this.logOutputWin&&this.logOutputWin.focus()},r.prototype.convertMilliSecondsToSCORMTime=function(e){var t,i,s,r,n,o;return 1e4===(t=(e-(r=e%1e3)-1e3*(s=(e-r)/1e3%60)-6e4*(i=(e-r-1e3*s)/6e4%60))/36e5)&&(100===(i=(e-36e5*(t=9999))/6e4)&&(i=99),100===(s=(e-36e5*t-6e4*(i=Math.floor(i)))/1e3)&&(s=99),r=e-36e5*t-6e4*i-1e3*(s=Math.floor(s))),n=Math.floor(r/10),o=this.zeroPad(t,4)+":"+this.zeroPad(i,2)+":"+this.zeroPad(s,2),o+="."+n,t>9999&&(o="9999:99:99",o+=".99"),o},r.prototype.convertDateToCMITime=function(e){var t,i,s,r=new Date(e);return t=r.getHours(),i=r.getMinutes(),s=r.getSeconds(),this.zeroPad(t,2)+":"+this.zeroPad(i,2)+":"+this.zeroPad(s,2)},r.prototype.convertMilliSecondsToSCORM2004Time=function(e){var t,i,s,r,n,o,a,c="";return t=Math.floor(e/10),t-=315576e4*(a=Math.floor(t/315576e4)),t-=26298e4*(o=Math.floor(t/26298e4)),t-=864e4*(n=Math.floor(t/864e4)),t-=36e4*(r=Math.floor(t/36e4)),t-=6e3*(s=Math.floor(t/6e3)),a>0&&(c+=a+"Y"),o>0&&(c+=o+"M"),n>0&&(c+=n+"D"),(t-=100*(i=Math.floor(t/100)))+i+s+r>0&&(c+="T",r>0&&(c+=r+"H"),s>0&&(c+=s+"M"),t+i>0&&(c+=i,t>0&&(c+="."+t),c+="S")),""===c&&(c="0S"),c="P"+c},r.prototype.convertDateToISO8601Timestamp=function(e){var t=new Date(e),i=t.getFullYear(),s=t.getMonth()+1,r=t.getDate(),n=t.getHours(),o=t.getMinutes(),a=t.getSeconds();return i+"-"+(s=this.zeroPad(s,2))+"-"+(r=this.zeroPad(r,2))+"T"+(n=this.zeroPad(n,2))+":"+(o=this.zeroPad(o,2))+":"+(a=this.zeroPad(a,2))},r.prototype.zeroPad=function(e,t){var i,s,r;if((s=(i=new String(e)).length)>t)i=i.substr(0,t);else for(r=s;r<t;r++)i="0"+i;return i},r.prototype.trim=function(e){return e.replace(/^\s*|\s*$/g,"")},r.prototype.isSCORM2004=function(){return"2004"===this.scorm.version},e.exports=r},2302:function(e,t,i){"use strict";window.Logger=function(){this.logArr=new Array,this.registeredViews=new Array},Logger.instance=null,Logger.LOG_TYPE_INFO=0,Logger.LOG_TYPE_WARN=1,Logger.LOG_TYPE_ERROR=2,Logger.LOG_TYPE_DEBUG=3,Logger.getInstance=function(){return null==Logger.instance&&(Logger.instance=new Logger),Logger.instance},Logger.prototype.getEntries=function(){return this.logArr},Logger.prototype.getLastEntry=function(){return this.logArr[this.logArr.length-1]},Logger.prototype.info=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_INFO},this.updateViews()},Logger.prototype.warn=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_WARN},this.updateViews()},Logger.prototype.error=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_ERROR},this.updateViews()},Logger.prototype.debug=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_DEBUG},this.updateViews()},Logger.prototype.registerView=function(e){this.registeredViews[this.registeredViews.length]=e},Logger.prototype.unregisterView=function(e){for(var t=0;t<this.registeredViews.length;t++)this.registeredViews[t]==e&&(this.registeredViews.splice(t,1),t--)},Logger.prototype.updateViews=function(){for(var e=0;e<this.registeredViews.length;e++)this.registeredViews[e]&&this.registeredViews[e].update(this)},e.exports=Logger},2303:function(e,t,i){"use strict";var s={UTILS:{},debug:{isActive:!0},SCORM:{version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{}}};s.SCORM.isAvailable=function(){return!0},s.SCORM.API.find=function(e){for(var t=null,i=0,r=s.UTILS.trace,n=s.SCORM;!e.API&&!e.API_1484_11&&e.parent&&e.parent!=e&&i<=500;)i++,e=e.parent;if(n.version)switch(n.version){case"2004":e.API_1484_11?t=e.API_1484_11:r("SCORM.API.find: SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");break;case"1.2":e.API?t=e.API:r("SCORM.API.find: SCORM version 1.2 was specified by user, but API cannot be found.")}else e.API_1484_11?(n.version="2004",t=e.API_1484_11):e.API&&(n.version="1.2",t=e.API);return t?(r("SCORM.API.find: API found. Version: "+n.version),r("API: "+t)):r("SCORM.API.find: Error finding API. \nFind attempts: "+i+". \nFind attempt limit: 500"),t},s.SCORM.API.get=function(){var e=null,t=window,i=s.SCORM,r=i.API.find,n=s.UTILS.trace;return!(e=r(t))&&t.parent&&t.parent!=t&&(e=r(t.parent)),!e&&t.top&&t.top.opener&&(e=r(t.top.opener)),!e&&t.top&&t.top.opener&&t.top.opener.document&&(e=r(t.top.opener.document)),e?i.API.isFound=!0:n("API.get failed: Can't find the API!"),e},s.SCORM.API.getHandle=function(){var e=s.SCORM.API;return e.handle||e.isFound||(e.handle=e.get()),e.handle},s.SCORM.connection.initialize=function(){var e=!1,t=s.SCORM,i=t.data.completionStatus,r=s.UTILS.trace,n=s.UTILS.StringToBoolean,o=t.debug,a="SCORM.connection.initialize ";if(r("connection.initialize called."),t.connection.isActive)r(a+"aborted: Connection already active.");else{var c=t.API.getHandle(),l=0;if(c){switch(t.version){case"1.2":e=n(c.LMSInitialize(""));break;case"2004":e=n(c.Initialize(""))}if(e)if(null!==(l=o.getCode())&&0===l){if(t.connection.isActive=!0,t.handleCompletionStatus&&(i=t.status("get"))){switch(i){case"not attempted":case"unknown":t.status("set","incomplete")}t.save()}}else e=!1,r(a+"failed. \nError code: "+l+" \nError info: "+o.getInfo(l));else r(null!==(l=o.getCode())&&0!==l?a+"failed. \nError code: "+l+" \nError info: "+o.getInfo(l):a+"failed: No response from server.")}else r(a+"failed: API is null.")}return e},s.SCORM.connection.terminate=function(){var e=!1,t=s.SCORM,i=t.data.exitStatus,r=t.data.completionStatus,n=s.UTILS.trace,o=s.UTILS.StringToBoolean,a=t.debug;if(t.connection.isActive){var c=t.API.getHandle(),l=0;if(c){if(t.handleExitMode&&!i)if("completed"!==r&&"passed"!==r)switch(t.version){case"1.2":e=t.set("cmi.core.exit","suspend");break;case"2004":e=t.set("cmi.exit","suspend")}else switch(t.version){case"1.2":e=t.set("cmi.core.exit","logout");break;case"2004":e=t.set("cmi.exit","normal")}if(e=t.save()){switch(t.version){case"1.2":e=o(c.LMSFinish(""));break;case"2004":e=o(c.Terminate(""))}e?t.connection.isActive=!1:n("SCORM.connection.terminate failed. \nError code: "+(l=a.getCode())+" \nError info: "+a.getInfo(l))}}else n("SCORM.connection.terminate failed: API is null.")}else n("SCORM.connection.terminate aborted: Connection already terminated.");return e},s.SCORM.data.get=function(e){var t=null,i=s.SCORM,r=s.UTILS.trace,n=i.debug,o="SCORM.data.get('"+e+"') ";if(i.connection.isActive){var a=i.API.getHandle(),c=0;if(a){switch(i.version){case"1.2":t=a.LMSGetValue(e);break;case"2004":t=a.GetValue(e)}if(c=n.getCode(),""!==t||0===c)switch(e){case"cmi.core.lesson_status":case"cmi.completion_status":i.data.completionStatus=t;break;case"cmi.core.exit":case"cmi.exit":i.data.exitStatus=t}else r(o+"failed. \nError code: "+c+"\nError info: "+n.getInfo(c))}else r(o+"failed: API is null.")}else r(o+"failed: API connection is inactive.");return r(o+" value: "+t),String(t)},s.SCORM.data.set=function(e,t){var i=!1,r=s.SCORM,n=s.UTILS.trace,o=s.UTILS.StringToBoolean,a=r.debug,c="SCORM.data.set('"+e+"') ";if(r.connection.isActive){var l=r.API.getHandle(),u=0;if(l){switch(r.version){case"1.2":i=o(l.LMSSetValue(e,t));break;case"2004":i=o(l.SetValue(e,t))}i?"cmi.core.lesson_status"!==e&&"cmi.completion_status"!==e||(r.data.completionStatus=t):n(c+"failed. \nError code: "+(u=a.getCode())+". \nError info: "+a.getInfo(u))}else n(c+"failed: API is null.")}else n(c+"failed: API connection is inactive.");return n(c+" value: "+t),i},s.SCORM.data.save=function(){var e=!1,t=s.SCORM,i=s.UTILS.trace,r=s.UTILS.StringToBoolean;if(t.connection.isActive){var n=t.API.getHandle();if(n)switch(t.version){case"1.2":e=r(n.LMSCommit(""));break;case"2004":e=r(n.Commit(""))}else i("SCORM.data.save failed: API is null.")}else i("SCORM.data.save failed: API connection is inactive.");return e},s.SCORM.status=function(e,t){var i=!1,r=s.SCORM,n=s.UTILS.trace,o="";if(null!==e){switch(r.version){case"1.2":o="cmi.core.lesson_status";break;case"2004":o="cmi.completion_status"}switch(e){case"get":i=r.data.get(o);break;case"set":null!==t?i=r.data.set(o,t):(i=!1,n("SCORM.getStatus failed: status was not specified."));break;default:i=!1,n("SCORM.getStatus failed: no valid action was specified.")}}else n("SCORM.getStatus failed: action was not specified.");return i},s.SCORM.debug.getCode=function(){var e=s.SCORM,t=e.API.getHandle(),i=s.UTILS.trace,r=0;if(t)switch(e.version){case"1.2":r=parseInt(t.LMSGetLastError(),10);break;case"2004":r=parseInt(t.GetLastError(),10)}else i("SCORM.debug.getCode failed: API is null.");return r},s.SCORM.debug.getInfo=function(e){var t=s.SCORM,i=t.API.getHandle(),r=s.UTILS.trace,n="";if(i)switch(t.version){case"1.2":n=i.LMSGetErrorString(e.toString());break;case"2004":n=i.GetErrorString(e.toString())}else r("SCORM.debug.getInfo failed: API is null.");return String(n)},s.SCORM.debug.getDiagnosticInfo=function(e){var t=s.SCORM,i=t.API.getHandle(),r=s.UTILS.trace,n="";if(i)switch(t.version){case"1.2":n=i.LMSGetDiagnostic(e);break;case"2004":n=i.GetDiagnostic(e)}else r("SCORM.debug.getDiagnosticInfo failed: API is null.");return String(n)},s.SCORM.init=s.SCORM.connection.initialize,s.SCORM.get=s.SCORM.data.get,s.SCORM.set=s.SCORM.data.set,s.SCORM.save=s.SCORM.data.save,s.SCORM.quit=s.SCORM.connection.terminate,s.UTILS.StringToBoolean=function(e){switch(typeof e){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":return null;default:return!1}},s.UTILS.trace=function(e){s.debug.isActive&&window.console&&window.console.log&&window.console.log(e)},window.pipwerks=s},2310:function(e,t){},2312:function(e,t){}}]);