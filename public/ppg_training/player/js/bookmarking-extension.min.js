(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1241:function(e,t,o){"use strict";const n=o(214);e.exports=(e,t)=>{n(e._refId,t)}},1316:function(e,t,o){"use strict";const{registerReducer:n,registerEpics:s}=o(4),i=o(2209),{bookmarkingAddPromptEpic:r,bookmarkingComponentCompleteEpic:a,bookmarkingNavigateEpic:p,registerTrackingMapEpic:_}=o(2210);n("bookmarking",i),s(r,a,p,_)},1592:function(e,t,o){"use strict";t.BOOKMARKING_COMPONENT_COMPLETED="BOOKMARKING_COMPONENT_COMPLETED",t.BOOKMARKING_NAVIGATE_TO_COMPONENT="BOOKMARKING_NAVIGATE_TO_COMPONENT",t.BOOKMARKING_CANCEL_CONTINUE="BOOKMARKING_CANCEL_CONTINUE",t.bookmarkingComponentCompleted=e=>({type:t.BOOKMARKING_COMPONENT_COMPLETED,payload:e})},2209:function(e,t,o){"use strict";const n=o(10),{SETUP_APP:s,APP_READY:i}=o(9),{RESTORE_EXTENSION:r}=o(96),{BOOKMARKING_COMPONENT_COMPLETED:a}=o(1592),p={_isEnabled:!1,_lastCompletedComponentId:null};e.exports=(e=p,t)=>{if(t.type===s){const o=t.payload.course._bookmarking;return o&&o._isEnabled?n({},e,o):p}if(t.type===i&&e._isEnabled){const{scorm:o,_localStorage:s}=t.payload;let i=null;return o&&o._isEnabled&&o.hasWrapperInitialised?i=o.suspendData._lastCompletedComponentId:s&&s._isEnabled&&(i=s.session.lastCompletedComponentId),i?n({},e,{_lastCompletedComponentId:i}):e}if(!e._isEnabled)return p;switch(t.type){case a:return n({},e,{_lastCompletedComponentId:t.payload});case r:return"bookmarking"===t.payload.extensionName?n({},e,t.payload.extensionData):e;default:return e}}},2210:function(e,t,o){"use strict";var n=o(5);const{registerTrackingMap:s}=o(4),{SETUP_APP:i,APP_READY:r}=o(9),{COMPONENT_COMPLETED:a}=o(61),{addPrompt:p,clearAllPrompts:_}=o(95),m=o(1241),{BOOKMARKING_NAVIGATE_TO_COMPONENT:c,BOOKMARKING_CANCEL_CONTINUE:l,bookmarkingComponentCompleted:d}=o(1592),{SETUP_COURSE_ASSESSMENT_RETAKE:E}=o(476),C=o(2211);t.bookmarkingAddPromptEpic=(e,t)=>e.filter(e=>{if(e.type!==r)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled&&o._lastCompletedComponentId}).take(1).map(()=>{const e=t.getState(),{bookmarking:o,course:n,courseAssessment:s={}}=e;let i;return i=o._isRetakeAssessmentNotificationEnabled&&s._isEnabled&&s._isComplete&&!s._isPassed&&n._courseAssessment._canBeRetaken&&(n._courseAssessment._allowUnlimitedRetakeAttempts||s.retakeAttemptsTaken<n._courseAssessment._retakeAttempts)?function({bookmarking:e,course:t,courseAssessment:o}){return{title:e._retakeAssessmentNotificationTitle,body:e._retakeAssessmentNotificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:t._courseAssessment.retakeAssessmentNotifyConfirmButtonText,_type:E},_dismiss:{text:t._courseAssessment.retakeAssessmentNotifyCancelButtonText},_glyph:{_type:"progressCircle",_percentage:o.score}}}(e):function(e){return{title:e._notificationTitle,body:e._notificationBody,_hasPriority:!0,_sortOrder:0,_action:{text:e._notificationConfirm,_type:c},_dismiss:{text:e._notificationCancel,_type:l},_glyph:{_type:"icon",_className:"ev-icon-bookmark"}}}(o),p(i)}),t.bookmarkingComponentCompleteEpic=(e,t)=>e.filter(e=>{if(e.type!==a)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled}).map(e=>d(e.payload.componentId)),t.bookmarkingNavigateEpic=(e,t)=>e.ofType(c).mergeMap(()=>{const{bookmarking:e,components:o}=t.getState(),s=o[e._lastCompletedComponentId];return s?(m(s),n.Observable.of(_())):n.Observable.empty()}),t.registerTrackingMapEpic=(e,t)=>e.filter(e=>{if(e.type!==i)return!1;const{bookmarking:o}=t.getState();return o&&o._isEnabled}).do(()=>{s("bookmarking",C,"extensions")}).ignoreElements()},2211:function(e,t,o){"use strict";e.exports={_lastCompletedComponentId:{fieldKey:"_lastCompletedComponentId",type:"String",shouldRestore:!0}}}}]);