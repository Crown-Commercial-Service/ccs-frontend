(window.webpackJsonp=window.webpackJsonp||[]).push([[17,25],{1242:function(e,t,s){"use strict";const{registerEpics:n,registerReducer:o}=s(4),i=s(1457),{componentAssessmentComponentCompleteEpic:r,componentAssessmentCompletedEpic:a,componentAssessmentResetQuestionEpic:c,registerTrackingMapEpic:l,scormRestoreEpic:p}=s(1458);n(r,a,c,l,p),o("componentAssessment",i)},1247:function(e,t,s){"use strict";const{registerComponent:n,registerEpics:o}=s(4),{openFullScreen:i}=s(473),r=s(1663),a=s(1678),{onOptionSelected:c,onBranchingEndItem:l,branchingDisplayCompleteStory:p,branchingCloseFullScreen:d,branchingItemVideoMetricsChanged:m,branchingSoftReset:u}=s(1456),{branchingTrackableChangeEpic:h}=s(1679),_=s(1680),g=s(1681);s(1242),o(h),n("branching",{component:r,actions:{onOptionSelected:c,onBranchingEndItem:l,branchingDisplayCompleteStory:p,branchingCloseFullScreen:d,openFullScreen:i,branchingItemVideoMetricsChanged:m,branchingSoftReset:u},reducer:a,mapStateToProps:_,trackingMap:g})},1370:function(e,t,s){"use strict";const n=s(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1371:function(e,t,s){"use strict";e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:n}=e;return!0===n&&!0===s._isReady&&!0!==s[t]}},1372:function(e,t,s){"use strict";e.exports=function(e,t,s,n,o){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}},1374:function(e,t,s){"use strict";const n=s(39),o=s(10),i=s(2),r=s(0),a=s(7),c=s(1),l=s(219),{Trail:p,config:d,animated:m,interpolate:u}=s(77),{connect:h}=s(6),_=i({displayName:"Grid",propTypes:{isList:c.bool.isRequired,isRTL:c.bool.isRequired,shouldIgnoreScreenSize:c.bool.isRequired,animations:c.object,gridItemStyle:c.object,gridItemInnerStyle:c.object,windowWidth:c.number.isRequired,getGridItemInnerStyle:c.func,hasGridItemInnerPadding:c.bool,className:c.string,columns:c.number,separatorBorder:c.string},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1,_animationEnded:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,s=e.windowWidth!==t.windowWidth,n=t.columns!==e.columns;(s||n)&&this.updateColumns(e.windowWidth,e.columns)},getGridClassName(){return a("ev-grid",this.props.className)},getColumns(e,t){if(this.props.shouldIgnoreScreenSize)return t;return e>=768?t||2:e<768&&e>=520?2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;let t=!1;return e&&(t=0!==n(e).values().filter({_isEnabled:!0}).value().length),t},getGridItemStyle(e,t,s,n,i,r){const{isRTL:a}=this.props,{_animationEnded:c}=this.state,l=100/this.state.columns,p=o({flex:l+"%",textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(p.opacity=s,p.transform=u([n,i,r],(e,t,s)=>`translate(${e}%,${t}%) scale(${s})`),c&&(p.transform="none"));const d=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(p.borderRight=this.props.separatorBorder),0!==d)if(1===d){e===this.props.children.length-1&&(p.margin="auto")}else{if(e===this.props.children.length-d){let e=l/2;2===d&&4===this.state.columns&&(e=l),a?p.marginRight=e+"%":p.marginLeft=e+"%"}}return p},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:s,hasGridItemInnerPadding:n}=this.props,i=s?s(e):{};return o({padding:n?"0 10px":0,boxSizing:"border-box"},t,i)},getVisibilitySensorActive(){return!1===this.state.isVisible},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringFrom(){const{animations:e}=this.props,{_slideInX:t,_slideInY:s,_fadeIn:n,_scaleIn:o}=e;return{x:t&&t._isEnabled?t._isReverseDirection?-t._from:t._from:0,y:s&&s._isEnabled?s._isReverseDirection?-s._from:s._from:0,opacity:n&&n._isEnabled?n._from/100:1,scale:o&&o._isEnabled?o._from/100:1}},getSpringTo(){const{isVisible:e}=this.state;return e?{opacity:1,x:0,y:0,scale:1}:this.getSpringFrom()},onStart(){this.setState({_animationEnded:!1})},onRest(){this.setState({_animationEnded:!0})},renderGridItems(e){const{isList:t,children:s,animations:n}=this.props,o=t?m.li:m.div;return e?r.createElement(p,{native:!0,key:s.length,from:this.getSpringFrom(),to:this.getSpringTo(),onStart:this.onStart,onRest:this.onRest,config:d[n._easing]||d.default,keys:s.map((e,t)=>t),items:s},(e,t)=>({opacity:s,x:n,y:i,scale:a})=>r.createElement(o,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,s,n,i,a)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))):s.map((e,t)=>r.createElement(o,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e)))},render(){const{isList:e}=this.props,t=e?"ul":"div";return this.getAnimationsEnabled()?r.createElement(l,{active:this.getVisibilitySensorActive(),partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!0))):r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!1))}});e.exports=h(({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL}))(_)},1380:function(e,t,s){var n=s(88),o=s(49);e.exports=function(e){return"number"==typeof e||o(e)&&"[object Number]"==n(e)}},1411:function(e,t,s){"use strict";t.COMPONENT_ASSESSMENT_COMPLETED="COMPONENT_ASSESSMENT_COMPLETED",t.COMPONENT_ASSESSMENT_SCORM_RESTORE="COMPONENT_ASSESSMENT_SCORM_RESTORE",t.COMPONENT_ASSESSMENT_RESET="COMPONENT_ASSESSMENT_RESET",t.componentAssessmentCompleted=e=>({type:t.COMPONENT_ASSESSMENT_COMPLETED,payload:e}),t.componentAssessmentScormRestore=e=>({type:t.COMPONENT_ASSESSMENT_SCORM_RESTORE,payload:e}),t.componentAssessmentReset=e=>({type:t.COMPONENT_ASSESSMENT_RESET,payload:e})},1456:function(e,t,s){"use strict";t.BRANCHING_OPTION_SELECTED="BRANCHING_OPTION_SELECTED",t.BRANCHING_END_ITEM="BRANCHING_END_ITEM",t.BRANCHING_DISPLAY_COMPLETE_STORY="BRANCHING_DISPLAY_COMPLETE_STORY",t.BRANCHING_CLOSE_FULLSCREEN="BRANCHING_CLOSE_FULLSCREEN",t.BRANCHING_ITEM_VIDEO_METRICS="BRANCHING_ITEM_VIDEO_METRICS",t.BRANCHING_SOFT_RESET="BRANCHING_SOFT_RESET",t.onOptionSelected=(e,s,n,o)=>({type:t.BRANCHING_OPTION_SELECTED,payload:{componentId:e,itemId:s,optionId:n,optionScore:o}}),t.onBranchingEndItem=(e,s)=>({type:t.BRANCHING_END_ITEM,payload:{componentId:e,itemId:s}}),t.branchingDisplayCompleteStory=e=>({type:t.BRANCHING_DISPLAY_COMPLETE_STORY,payload:{componentId:e}}),t.branchingCloseFullScreen=e=>({type:t.BRANCHING_CLOSE_FULLSCREEN,payload:{componentId:e}}),t.branchingSoftReset=e=>({type:t.BRANCHING_SOFT_RESET,payload:{componentId:e}}),t.branchingItemVideoMetricsChanged=e=>({type:t.BRANCHING_ITEM_VIDEO_METRICS,payload:e})},1457:function(e,t,s){"use strict";const n=s(304),o=s(10),i=s(8),r=s(18),{SETUP_APP:a}=s(9),{RESTORE_EXTENSION:c}=s(96),{COMPONENT_ASSESSMENT_COMPLETED:l,COMPONENT_ASSESSMENT_RESET:p,COMPONENT_ASSESSMENT_SCORM_RESTORE:d}=s(1411),m={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_assessmentScore:0,_assessmentComponentId:null,_assessmentAttemptsTaken:0};e.exports=(e=m,t)=>{switch(t.type){case a:return function(e,t){const{course:s,components:o}=t.payload;if(i(s,"_courseAssessment._isEnabled",!1))return e;const a=r(o,{_isAssessmentEnabled:!0});if(!a)return e;return n({},e,{_isEnabled:!0,_assessmentComponentId:a._id})}(e,t);case l:return n({},e,t.payload);case p:return n({},e,{_assessmentAttemptsTaken:e._assessmentAttemptsTaken+1});case d:return n({},e,t.payload);case c:if("componentAssessment"===t.payload.extensionName)return o({},e,t.payload.extensionData);default:return e}}},1458:function(e,t,s){"use strict";const n=s(8),o=s(304),{Observable:i}=s(5),{SETUP_APP:r,APP_READY:a}=s(9),{COMPONENT_COMPLETED:c,RESET_QUESTION:l,updateComponents:p}=s(61),{trackableChange:d}=s(96),{registerTrackingMap:m}=s(4),{COMPONENT_ASSESSMENT_COMPLETED:u,componentAssessmentCompleted:h,componentAssessmentReset:_,componentAssessmentScormRestore:g}=s(1411),S=s(1459);t.componentAssessmentComponentCompleteEpic=(e,t)=>e.filter(e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===c&&e.payload.componentId===s._assessmentComponentId}).map(e=>{const{components:s,componentAssessment:o}=t.getState(),i=s[e.payload.componentId];let r=i._isPassed;if(!i._isPassed)if(i._allowAssessmentRetake){const e=n(i,"_assessmentRetakeAttempts",1);r=!n(i,"_allowUnlimitedRetakeAttempts",!1)&&o._assessmentAttemptsTaken===e}else r=!0;const a={_isComplete:r,_isPassed:i._isPassed,_assessmentScore:i._assessmentScore};return h(a)}),t.componentAssessmentCompletedEpic=e=>e.ofType(u).mapTo(d()),t.componentAssessmentResetQuestionEpic=(e,t)=>e.filter(e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===l&&e.payload.componentId===s._assessmentComponentId}).map(()=>_()),t.registerTrackingMapEpic=(e,t)=>e.filter(e=>{const{componentAssessment:s}=t.getState();return s._isEnabled&&e.type===r}).do(()=>{m("componentAssessment",S,"extensions")}).ignoreElements(),t.scormRestoreEpic=(e,t)=>e.filter(e=>{const{componentAssessment:s,scorm:n}=t.getState();return!!(n&&n._isEnabled&&s._isEnabled&&e.type===a)}).mergeMap(()=>{const{scorm:e,components:s}=t.getState(),n=[];if(e&&e.suspendData){const{_isAssessmentComplete:t,_isPassed:i,_score:r,_assessmentComponentId:a,_assessmentAttemptsTaken:c}=e.suspendData;if(t){n.push(g({_isComplete:t,_isPassed:i,_assessmentScore:r,_assessmentComponentId:a,_assessmentAttemptsTaken:c}));const e=s[a];if(e){const t=o({},e,{_isPassed:i,_assessmentScore:r});n.push(p({[a]:t}))}}}return n.length?i.of(...n):i.empty()})},1459:function(e,t,s){"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentComponentId:{fieldKey:"_assessmentComponentId",type:"String",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"_assessmentAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0}}},1513:function(e,t,s){"use strict";var n=s(30)(s(21));const o=s(18),i=s(2),r=s(0),a=s(7),c=s(87),l=s(140),p=s(170),d=s(24),m=s(1666),u=s(1668),h=s(1669),_=s(1671),g=i({displayName:"BranchingItem",getInitialState(){return{_timeElapsed:0,_isTimeOut:!1,_canShowOptions:this.getCanShowOptions()}},getClassName(e,t){return a("ev-branching-item","ev-clearfix","ev-branching-item-layout-"+this.props._itemLayout,{"ev-is-story-item":this.props.isStoryItem,"ev-is-column-layout":t,"ev-has-timer":this.props._hasTimer,"ev-has-body":this.props.body,"ev-has-instruction":this.props.instruction,"ev-has-media":e})},getHasMedia(){var e,t,s,n,o,i,r;switch(this.props._mediaType){case"image":return p(null===(e=this.props._graphic)||void 0===e?void 0:e.src,null===(t=this.props._graphic)||void 0===t?void 0:t.srcAdvanced);case"gif":return null===(s=this.props._gif)||void 0===s?void 0:s.src;case"video":return null===(n=this.props._video)||void 0===n?void 0:n.mp4;case"audio":return null===(o=this.props._audio)||void 0===o?void 0:o.mp3;case"videoStream":return null===(i=this.props._videoStream)||void 0===i||null===(r=i._options)||void 0===r?void 0:r._source;default:return!1}},getCanShowOptions(){const{_hideOptionsUntilMediaEnd:e,isStoryItem:t,_canAutoPlay:s,_mediaType:n}=this.props;if(!e||t)return!0;if("video"!==n&&"audio"!==n)return!0;return!this.getHasMedia()||!s||(!e||!s)&&void 0},getIsColumnLayout(){const{isColumnLayout:e,_options:t}=this.props;return!!e&&(!!(e&&t.length>0)||void 0)},shouldComponentUpdate(){return!this.props.isStoryItem},componentDidMount(){this.startTimer(),this.checkIfEndItem(),this.setAriaLive()},componentWillUnmount(){this._timer&&clearInterval(this._timer)},onMediaEnded(){this.state._canShowOptions||this.setState({_canShowOptions:!0},function(){this.startTimer(),this.checkIfEndItem()}.bind(this))},startTimer(){const{_hasTimer:e,isStoryItem:t}=this.props,{_canShowOptions:s}=this.state;e&&!t&&s&&(this._timer=setInterval(this.updateTimeElapsed,1e3))},checkIfEndItem(){const{isStoryItem:e,_isInitialItem:t,_options:s}=this.props,{_canShowOptions:n}=this.state;t||e||0!==s.length||!n||this.props.onBranchingEndItemReached(this.props._id)},setAriaLive(){const{isInitialItem:e,isStoryItem:t,body:s,_options:n,setAriaLive:o}=this.props;e||t||!s||0!==n.length||o({message:s})},updateTimeElapsed(){const e=this.props._timerDuration,t=this.state._timeElapsed+1;if(t===e){clearInterval(this._timer),this._timer=null;const e=o(this.props._options,{_automaticallySelectOnTimerEnd:!0});return e&&e._itemId?this.props.onOptionSelected(e._itemId,e._id,e._score):this.setState({_isTimeOut:!0,_timeElapsed:t})}this.setState({_timeElapsed:t})},getAnimations(){const{isStoryItem:e,isInitialItem:t,animations:s}=this.props;if(!e&&!t)return s||{_fadeIn:{_isEnabled:!0,_from:0},easing:"slow"}},renderTimer(){const{_isTimeOut:e,_canShowOptions:t}=this.state,{_hasTimer:s,isStoryItem:n}=this.props;if(s&&!e&&!n&&t)return r.createElement(_,{timerDuration:this.props._timerDuration,timeElapsed:this.state._timeElapsed,timeRemainingText:this.props.timeRemainingText,secondsText:this.props.secondsText})},renderOptions(){if(this.state._canShowOptions)return r.createElement(h,{options:this.props._options,onOptionSelected:this.props.onOptionSelected,onRestartSelected:this.props.onRestartSelected,hasTimer:this.props._hasTimer,isTimeOut:this.state._isTimeOut,timeOutText:this.props.timeOutText,timeOutRestartButtonText:this.props.timeOutRestartButtonText,isStoryItem:this.props.isStoryItem,isStoryMode:this.props.isStoryMode,optionSelectedBackgroundColor:this.props.optionSelectedBackgroundColor,optionSelectedTextColor:this.props.optionSelectedTextColor,optionsAriaLabel:this.props.optionsAriaLabel,swatches:this.props.swatches,optionsPerRow:this.props.optionsPerRow,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon})},renderContent(e){const{_isTimeOut:t}=this.state,{_hasTimer:s,isStoryItem:o}=this.props;return s&&t&&!o?r.createElement(u,{timeOutText:this.props.timeOutText}):r.createElement(m,(0,n.default)({},this.props,{hasMedia:e,onMediaEnded:this.onMediaEnded,canAutoFocus:this.props.canAutoFocus}))},renderInstruction(){const{_isTimeOut:e,_canShowOptions:t}=this.state,{_hasTimer:s,isStoryItem:n,instruction:o}=this.props;if((!s||!e||n)&&o&&t)return r.createElement(d,{className:"ev-branching-item-instruction",html:o})},renderItemInner(e,t){return t?r.createElement("div",{className:"ev-branching-item-inner ev-clearfix"},r.createElement("div",{className:"ev-branching-item-inner-left"},this.renderContent(e)),r.createElement("div",{className:"ev-branching-item-inner-right"},this.renderInstruction(),this.renderTimer(),this.renderOptions())):r.createElement("div",{className:"ev-branching-item-inner ev-clearfix"},this.renderContent(e),this.renderInstruction(),this.renderTimer(),this.renderOptions())},renderStoryFlowPointer(){if(!this.props.isStoryItem)return;const{flowPointerIconColor:e,swatches:t}=this.props,s={};return e&&"transparent"!==e&&(s.color=l(e,t)),r.createElement(c,{className:"ev-branching-item-story-flow-pointer ev-icon ev-icon-arrow-down",tag:"i",startAnimation:!0,style:s,animations:{_fadeIn:{_isEnabled:!0,_from:0},_slideInY:{_isEnabled:!0,_isReverseDirection:!0,_from:100},easing:"slow"},ariaHidden:!1})},render(){const e=this.getHasMedia(),t=this.getIsColumnLayout();return r.createElement(c,{className:this.getClassName(e,t),startAnimation:!0,animations:this.getAnimations(),ariaHidden:!1},this.renderItemInner(e,t),this.renderStoryFlowPointer())}});e.exports=g},1663:function(e,t,s){"use strict";const n=s(2),o=s(1),i=s(0),r=s(1664),a=s(1676),c=n({displayName:"BranchingController",propTypes:{component:o.object.isRequired,setComponentAsReady:o.func.isRequired,setComponentAsViewed:o.func.isRequired,setComponentAsStarted:o.func.isRequired,setComponentAsComplete:o.func.isRequired,onOptionSelected:o.func.isRequired,onBranchingEndItem:o.func.isRequired,branchingDisplayCompleteStory:o.func.isRequired,branchingCloseFullScreen:o.func.isRequired,isFullScreen:o.bool},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},render(){const{props:e}=this;return e.component._shouldDisplayFullscreen&&!e.isFullScreen?i.createElement(a,e):i.createElement(r,e)}});e.exports=c},1664:function(e,t,s){"use strict";(function(t){var n=s(30)(s(21));const o=s(11),i=s(8),r=s(18),a=s(1380),c=s(31),l=s(10),p=s(1665),d=s(308),m=s(310),u=s(2),h=s(1),_=s(0),g=s(48),S=s(7),{Link:E}=s(34),{Component:y}=s(468),I=s(1370),v=s(218),b=s(215),C=s(1371),f=s(1372),T=s(481),R=s(1513),N=s(1672),O=s(1673),A=s(1674),x=s(1675),B=u({displayName:"Branching",propTypes:{component:h.object.isRequired,setComponentAsReady:h.func.isRequired,setComponentAsViewed:h.func.isRequired,setComponentAsStarted:h.func.isRequired,setComponentAsComplete:h.func.isRequired,onOptionSelected:h.func.isRequired,onBranchingEndItem:h.func.isRequired,branchingDisplayCompleteStory:h.func.isRequired,branchingCloseFullScreen:h.func.isRequired,branchingItemVideoMetricsChanged:h.func.isRequired,updateVariable:h.func.isRequired,resetScroll:h.func,isFullScreen:h.bool,screenSize:h.string.isRequired,navigation:h.object.isRequired,isInline:h.bool.isRequired,closeFullScreen:h.func,resetQuestion:h.func,branchingSoftReset:h.func,isPageReady:h.bool,theme:h.object.isRequired,isRTL:h.bool,setAriaLive:h.func.isRequired,assessmentAttemptsTaken:h.number,remainingAttemptsText:h.string,remainingAttemptText:h.string,buttons:h.object.isRequired,styles:h.object},componentDidMount(){this.preloadImages()},UNSAFE_componentWillReceiveProps(e){const{component:t}=this.props;!t._isComplete&&e.component._isComplete&&this._restart&&this._restart.focus({preventScroll:!0})},componentDidUpdate({component:e}){const{component:s,resetScroll:n,isFullScreen:o,screenSize:i,navigation:r,isInline:a}=this.props;if(!s._isStoryMode&&e._previousItems&&s._previousItems.length!==e._previousItems.length){if(o)return n();const e=g.findDOMNode(this);let s=parseInt(r.navigationOffset,10);"medium"!==i&&"small"!==i||(s=parseInt(r.navigationMobileOffset,10)),a&&(s=t(".appheader").height()),t.scrollTo(e,{offset:{top:-s},duration:10})}},preloadImages(){o(this.props.component._items,e=>{var t,s,n,o;null!=e&&null!==(t=e._graphic)&&void 0!==t&&t.src&&v(e._graphic.src),null!=e&&null!==(s=e._gif)&&void 0!==s&&s.src&&v(e._gif.src),null!=e&&null!==(n=e._video)&&void 0!==n&&n.poster&&v(e._video.poster),null!=e&&null!==(o=e._audio)&&void 0!==o&&o.poster&&v(e._audio.poster)})},getAssessmentData(){const{component:e}=this.props,t=e._maximumRelativeScore,s=e._score;let n=0,o=!1;return n=s>=t?100:Math.round(s/t*100),s>=e._passMark&&(o=!0),{_assessmentScore:n,_isPassed:o}},getOptionsPerRow(){const{component:e,screenSize:t}=this.props,s=T(t);return i(e,["_itemsPerRow",s],1)||1},closeBranchingFullscreen(e){e&&(e.preventDefault(),e.currentTarget.blur());const{component:t,closeFullScreen:s,branchingCloseFullScreen:n}=this.props;s(),n(t._id)},onLinkSelected(){const{props:e}=this;e.component._shouldDisplayFullscreen&&e.isFullScreen&&this.closeBranchingFullscreen()},onRestartSelected(e){var t;null===(t=e.preventDefault)||void 0===t||t.call(e);const{component:s,resetQuestion:n,branchingSoftReset:o,updateVariable:i}=this.props;if(s._hasReachedEndItem&&s._canSaveToVariable&&("increment"===s._variableUpdateType||"decrement"===s._variableUpdateType)&&i(s._variableId,s._score,"decrement"===s._variableUpdateType?"increment":"decrement"),s._isSoftReset&&!s._isAssessmentEnabled?o(s._id):n(s._id),s._isStoryMode&&!s._shouldDisplayFullscreen){var r;const e=g.findDOMNode(this);null===(r=e.scrollIntoView)||void 0===r||r.call(e)}},onShowFullStorySelected(e){e&&(e.preventDefault(),e.currentTarget.blur());const{component:t,branchingDisplayCompleteStory:s}=this.props;s(t._id)},onOptionSelected(e,t,s){const{component:n,onOptionSelected:o,setComponentAsStarted:i}=this.props;e&&(n._hasStarted||i(n._id),o(n._id,e,t,s))},onBranchingEndItemReached(e){const{component:t,onBranchingEndItem:s,setComponentAsComplete:n,updateVariable:o}=this.props;s(t._id,e),t._canSaveToVariable&&o(t._variableId,t._score,t._variableUpdateType),n(t._id,this.getAssessmentData())},onItemVideoMetricsChange(e,t){const{component:s,branchingItemVideoMetricsChanged:n}=this.props;n({componentId:s._id,itemId:e,metrics:t})},onVisibilityChange(...e){f(...e,this,this.props.setComponentAsViewed)},renderProgressBar(){const{component:e,isRTL:t,theme:s,screenSize:n}=this.props;if(!e._showProgessBar)return;let o=0;if("score"===e._progressBarType&&(o=e._score/e._progressBarMaxScore*100),"items"===e._progressBarType){const t=r(e._items,{_id:e._currentItemId});t._isInitialItem?o=0:0===t._options.length?o=100:a(t._progressMilestonePercentage)&&(o=t._progressMilestonePercentage)}return _.createElement(x,{progressBarType:e._progressBarType,currentProgressPercentage:m(o,0,100),score:e._score,progressBarMaxScore:e._progressBarMaxScore,progressBarLabelText:e.progressBarLabelText,progressBarBackgroundColor:e._progressBarBackgroundColor,progressBarHighlightColor:e._progressBarHighlightColor,progressBarTextColor:e._progressBarTextColor,isRTL:t,swatches:s._swatches,screenSize:n})},renderStoryItems(){const{component:e,theme:t}=this.props;if(e._isStoryMode||e._displayCompletedStory){let s=c(e._previousItems,t=>{let s=r(e._items,{_id:t._id});s=l({},s);const n=r(s._options,{_id:t._selectedOptionId});return n&&(n._isSelected=!0),s});return e._maxStoryItemsDisplayed>0&&!e._displayCompletedStory&&(s=p(s,e._maxStoryItemsDisplayed)),_.createElement(N,{items:s,timeOutText:e.timeOutText,isColumnLayout:e._isColumnLayout,optionsPerRow:this.getOptionsPerRow(),optionSelectedBackgroundColor:e._optionSelectedBackgroundColor,optionSelectedTextColor:e._optionSelectedTextColor,flowPointerIconColor:e._flowPointerIconColor,onItemVideoMetricsChange:this.onItemVideoMetricsChange,swatches:t._swatches,hideItemOptionRadioIcon:e._hideItemOptionRadioIcon})}},renderCurrentItem(){const{component:e,theme:t,isFullScreen:s,setAriaLive:o}=this.props,i=r(e._items,{_id:e._currentItemId}),a=e._restartedCount,c=e._isStoryMode;if(i)return _.createElement(R,(0,n.default)({key:`${i._id}-${a}`,componentId:e._id,onOptionSelected:this.onOptionSelected,timeOutText:e.timeOutText,timeOutRestartButtonText:e.timeOutRestartButtonText,timeRemainingText:e.timeRemainingText,secondsText:e.secondsText,onRestartSelected:this.onRestartSelected,onBranchingEndItemReached:this.onBranchingEndItemReached,isColumnLayout:e._isColumnLayout,optionsPerRow:this.getOptionsPerRow(),isStoryMode:c,isCurrentItem:!0,canAutoFocus:e._canAutoFocus,isInitialItem:i._isInitialItem,navHeight:parseInt(t._navigation._variables["@navigation-top-height"],10),animations:e._animations,swatches:t._swatches,isFullScreen:s,isComponentComplete:e._isComplete,onItemVideoMetricsChange:this.onItemVideoMetricsChange,hideItemOptionRadioIcon:e._hideItemOptionRadioIcon,setAriaLive:o},i))},renderScore(){const{component:e}=this.props;if(!e._displayScoring)return;const{_isAssessmentEnabled:t,_shouldDisplayRelativeScore:s,_maximumRelativeScore:n,_shouldLimitScoreToRelativeScore:o}=e;return _.createElement(O,{score:e._score,scoreText:e.scoreText,shouldDisplayRelativeScore:t&&s,maxRelativeScore:n,shouldLimitScoreToRelativeScore:o})},renderRestartButton(){const{component:e,assessmentAttemptsTaken:t}=this.props,s=r(e._items,{_id:e._currentItemId});let n=!1;if(e._isAssessmentEnabled?e._isComplete&&e._allowAssessmentRetake&&!e._isPassed&&(e._allowUnlimitedRetakeAttempts||t<e._assessmentRetakeAttempts)&&(n=!0):(e._alwaysAllowRestart&&!s._isInitialItem||e._isComplete&&e._hasReachedEndItem&&e._allowsRestartOnEnd)&&(n=!0),n)return _.createElement("button",{ref:e=>this._restart=e,className:"ev-button ev-restart-button",onClick:this.onRestartSelected},_.createElement("i",{className:"ev-icon ev-icon-arrow-left"}),_.createElement("span",null,e.restartButtonText))},renderAssessmentAttemptsRemaining(){const{component:e,assessmentAttemptsTaken:t,buttons:s}=this.props,{remainingAttemptsText:n,remainingAttemptText:o}=s;if(e._isAssessmentEnabled&&e._isComplete&&!e._isPassed&&e._allowAssessmentRetake&&!e._allowUnlimitedRetakeAttempts){const s=e._assessmentRetakeAttempts-t,i=s>1?n:o;if(s)return _.createElement("div",{className:"ev-branching-assessment-retakes-remaining ev-label"},s," ",i)}},renderShowFullStoryButton(){const{component:e}=this.props;if(e._isComplete&&e._hasReachedEndItem&&e._displayFullStoryOnEnd&&!e._displayCompletedStory)return _.createElement("button",{className:"ev-button ev-has-icon ev-show-full-story-button",onClick:this.onShowFullStorySelected},_.createElement("i",{className:"ev-icon ev-icon-arrow-down"}),_.createElement("span",null,e.displayFullStoryButtonText))},renderPageLinkButton(){const{component:e}=this.props;if(e._isComplete&&e._hasReachedEndItem&&e._hasLink){const t=r(e._items,{_id:e._currentItemId}),s=t._linkType,n=t._linkUrl,o=t._linkedPageId,i=t.linkButtonText;if("page"===s){if(!o)return;const e=b(o);if(!e)return;return _.createElement(E,{to:`/${e._type}/${e._id}`,onClick:this.onLinkSelected,className:"ev-button ev-link-button"},i)}return _.createElement("a",{href:n,target:"_blank",className:"ev-button ev-link-button",rel:"noreferrer"},i)}},renderMarkingIcon(){const{component:e}=this.props;if(e._isComplete&&e._shouldDisplayMarkingIcon){const t=S("ev-buttons-marking-icon ev-icon",{"ev-icon-check":e._isCorrect,"ev-icon-cross":!e._isCorrect});return _.createElement("div",{className:t})}},renderCloseFullscreenButton(){const{props:e}=this;if(e.component._shouldDisplayFullscreen&&e.isFullScreen)return _.createElement("button",{className:"ev-button ev-has-icon",onClick:this.closeBranchingFullscreen},_.createElement("i",{className:"ev-icon ev-icon-cross"}),_.createElement("span",null,e.component.exitFullScreenButtonText||"Exit"))},renderAssessmentResults(){const{component:e}=this.props;if(e._isAssessmentEnabled&&e._isComplete){const{_assessmentScore:t,_isPassed:s,_shouldDisplayAssessmentScore:n}=e,o=!!d(n)||n,i=s?e.passedFeedbackText:e.failedFeedbackText;return _.createElement(A,{score:t,isPassed:s,feedback:i,displayScore:o,assessmentScoreText:e.assessmentScoreText})}},render(){const{props:e}=this;return _.createElement(y,{component:e.component,styles:e.styles,isVisibilitySensorActive:C(e),onVisibilityChange:this.onVisibilityChange,shouldHideQuestionButtons:!0},_.createElement("div",{className:I(e.component)},this.renderProgressBar(),this.renderStoryItems(),this.renderCurrentItem(),this.renderScore(),this.renderMarkingIcon(),this.renderAssessmentResults(),this.renderAssessmentAttemptsRemaining(),_.createElement("div",{className:"ev-branching-buttons"},this.renderCloseFullscreenButton(),this.renderRestartButton(),this.renderShowFullStoryButton(),this.renderPageLinkButton())))}});e.exports=B}).call(this,s(29))},1665:function(e,t,s){var n=s(185),o=s(97);e.exports=function(e,t,s){var i=null==e?0:e.length;return i?(t=s||void 0===t?1:o(t),n(e,(t=i-t)<0?0:t,i)):[]}},1666:function(e,t,s){"use strict";const n=s(2),o=s(0),i=s(33),r=s(1667),a=n({displayName:"BranchingItemContent",componentDidMount(){this.props.canAutoFocus&&this._content.focus()},renderBody(){if(this.props.body)return o.createElement(i,{className:"ev-branching-item-body",body:this.props.body})},renderMedia(){if(this.props.hasMedia)return o.createElement(r,this.props)},render(){const e=["top","left"].includes(this.props._itemLayout);return o.createElement("div",{ref:e=>this._content=e,className:"ev-branching-item-content ev-clearfix ev-focusable",tabIndex:"-1"},e?this.renderMedia():this.renderBody(),e?this.renderBody():this.renderMedia())}});e.exports=a},1667:function(e,t,s){"use strict";const n=s(8),o=s(2),i=s(0),r=s(170),a=s(76),c=s(218),l=s(119),p=s(305),d=s(306),m=o({displayName:"BranchingItemMedia",onItemVideoMetricsChange(e){const{_id:t,onItemVideoMetricsChange:s}=this.props;s(t,e)},renderImage(){var e,t,s,n;if(r(null===(e=this.props)||void 0===e||null===(t=e._graphic)||void 0===t?void 0:t.src,null===(s=this.props)||void 0===s||null===(n=s._graphic)||void 0===n?void 0:n.srcAdvanced))return i.createElement("div",{className:"ev-branching-item-media"},i.createElement(l,{graphicSrc:this.props._graphic.src,graphicSrcAdvanced:this.props._graphic.srcAdvanced,altText:this.props._graphic.alt,autoSize:!0}))},renderGif(){var e;return null!==(e=this.props._gif)&&void 0!==e&&e.src?i.createElement("div",{className:"ev-branching-item-media"},i.createElement(l,{graphicSrc:this.props._gif.src,altText:this.props._gif.alt,autoSize:!1})):null},renderVideo(){var e,t;if(null===(e=this.props)||void 0===e||null===(t=e._video)||void 0===t||!t.mp4)return null;const{_video:s,_canAutoPlay:o,onMediaEnded:r,isStoryItem:l,_metrics:d}=this.props;return i.createElement("div",{className:"ev-branching-item-media"},i.createElement(p,{src:a(s.mp4),posterSrc:c(s.poster),subtitlesSrc:a(n(s,"_subtitles.src")),subtitlesLabel:n(s,"_subtitles.label"),transcriptType:"popup",transcriptText:n(s,"_transcript.body"),transcriptButtonText:n(s,"_transcript.button"),controls:!0,hasBigPlayButton:!0,autoPlay:o&&!l,onEnded:r,metrics:d,onMetricsChange:this.onItemVideoMetricsChange,playsFromStart:!0}))},renderAudio(){var e,t;if(null===(e=this.props)||void 0===e||null===(t=e._audio)||void 0===t||!t.mp3)return null;let s;return this.props._audio.poster&&(s=i.createElement(l,{graphicSrc:this.props._audio.poster,autoSize:!1})),i.createElement("div",{className:"ev-branching-item-media"},s,i.createElement("audio",{src:a(this.props._audio.mp3),autoPlay:this.props._canAutoPlay&&!this.props.isStoryItem,onEnded:this.props.onMediaEnded,controls:!0,controlsList:"nodownload"}))},renderVideoStream(){var e,t;return null!==(e=this.props._videoStream)&&void 0!==e&&null!==(t=e._options)&&void 0!==t&&t._source?i.createElement("div",{className:"ev-branching-item-media"},i.createElement(d,{id:`${this.props.componentId}-${this.props._id}`,service:this.props._videoStream._service,options:this.props._videoStream._options})):null},render(){switch(this.props._mediaType){case"image":return this.renderImage();case"gif":return this.renderGif();case"video":return this.renderVideo();case"audio":return this.renderAudio();case"videoStream":return this.renderVideoStream();default:return null}}});e.exports=m},1668:function(e,t,s){"use strict";const n=s(2),o=s(0),i=n({displayName:"BranchingItemTimeOut",render(){return o.createElement("div",{className:"ev-branching-item-content ev-branching-item-time-out"},o.createElement("div",{className:"ev-branching-item-timeout-text"},this.props.timeOutText))}});e.exports=i},1669:function(e,t,s){"use strict";var n=s(30)(s(21));const o=s(18),i=s(10),r=s(32),a=s(2),c=s(0),l=s(1374),p=s(1670),d=a({displayName:"BranchingItemOptions",renderOptions(){const{options:e,hasTimer:t,isTimeOut:s,isStoryItem:a}=this.props;if(!e||0===e.length)return;if(a){let e=o(this.props.options,{_isSelected:!0});return e&&e._automaticallySelectOnTimerEnd&&e._shouldHideOption&&(e=i({},e,{optionText:this.props.timeOutText})),c.createElement(p,(0,n.default)({key:"storyOption",isStoryOption:!0,optionSelectedBackgroundColor:this.props.optionSelectedBackgroundColor,optionSelectedTextColor:this.props.optionSelectedTextColor,swatches:this.props.swatches,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon},e))}if(t&&s)return c.createElement(p,{key:"restartOption",onOptionSelected:this.props.onRestartSelected,optionText:this.props.timeOutRestartButtonText,isRetryOption:!0,isStoryMode:this.props.isStoryMode,swatches:this.props.swatches,hideItemOptionRadioIcon:!1});let d=r(e,e=>!e._shouldHideOption);d=d.map(function(e){return c.createElement(p,(0,n.default)({key:e._id,onOptionSelected:this.props.onOptionSelected,isStoryMode:this.props.isStoryMode,swatches:this.props.swatches,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon},e))}.bind(this));let{optionsPerRow:m}=this.props;return m>d.length&&(m=d.length),c.createElement(l,{columns:m,shouldIgnoreScreenSize:!0,className:"ev-column-layout-"+m},d)},render(){const{props:e}=this;return c.createElement("div",{className:"ev-branching-item-options",role:"group","aria-label":e.optionsAriaLabel},this.renderOptions())}});e.exports=d},1670:function(e,t,s){"use strict";const n=s(2),o=s(0),i=s(140),r=n({displayName:"BranchingItemOption",onButtonClick(e){e.preventDefault(),this.props.onOptionSelected(this.props._itemId,this.props._id,this.props._score)},getStyle(){const{isStoryOption:e,isRetryOption:t,_backgroundColor:s,_textColor:n,optionSelectedBackgroundColor:o,optionSelectedTextColor:r,swatches:a}=this.props,c={};return e||t||(s&&"transparent"!==s&&(c.backgroundColor=i(s,a)),n&&"transparent"!==n&&(c.color=i(n,a))),e&&(o&&"transparent"!==o&&(c.backgroundColor=i(o,a)),r&&"transparent"!==r&&(c.color=i(r,a))),c},render(){const e=this.getStyle();if(this.props.isStoryOption)return o.createElement("div",{className:"ev-branching-item-option ev-is-selected",style:e,"aria-selected":"true"},!this.props.hideItemOptionRadioIcon&&o.createElement("i",{className:"ev-branching-item-option-icon ev-icon ev-icon-radio-button",style:{color:e.color}}),o.createElement("span",{className:"ev-branching-item-option-text"},this.props.optionText));let t="ev-branching-item-option-icon ev-icon";return this.props.isRetryOption&&this.props.isStoryMode?t+=" ev-icon-arrow-up":this.props.isRetryOption?t+=" ev-icon-arrow-left":t+=" ev-icon-circle",o.createElement("button",{ref:e=>this._button=e,className:"ev-branching-item-option",onClick:this.onButtonClick,style:e},!this.props.hideItemOptionRadioIcon&&o.createElement("i",{className:t,style:{color:e.color}}),o.createElement("span",{className:"ev-branching-item-option-text"},this.props.optionText))}});e.exports=r},1671:function(e,t,s){"use strict";const n=s(2),o=s(0),i=n({displayName:"BranchingItemTimer",render(){const{timeRemainingText:e,timerDuration:t,timeElapsed:s,secondsText:n}=this.props;return o.createElement("div",{className:"ev-branching-item-timer ev-label"},`${e}: ${t-s} ${n}`)}});e.exports=i},1672:function(e,t,s){"use strict";var n=s(30)(s(21));const o=s(31),i=s(2),r=s(0),a=s(1513),c=i({displayName:"BranchingStoryItems",render(){return r.createElement("div",{className:"ev-branching-story-items"},o(this.props.items,(e,t)=>r.createElement(a,(0,n.default)({key:`${e._id}-${t}`,isStoryItem:!0,isStoryMode:!0,isColumnLayout:this.props.isColumnLayout,timeOutText:this.props.timeOutText,optionSelectedBackgroundColor:this.props.optionSelectedBackgroundColor,optionSelectedTextColor:this.props.optionSelectedTextColor,flowPointerIconColor:this.props.flowPointerIconColor,swatches:this.props.swatches,onItemVideoMetricsChange:this.props.onItemVideoMetricsChange,hideItemOptionRadioIcon:this.props.hideItemOptionRadioIcon},e))))}});e.exports=c},1673:function(e,t,s){"use strict";const n=s(2),o=s(0),i=n({displayName:"BranchingScore",getScoreText(){let{score:e,scoreText:t}=this.props;const{shouldLimitScoreToRelativeScore:s,maxRelativeScore:n,shouldDisplayRelativeScore:o}=this.props;return s&&e>n&&(e=n),t=`${t}: ${e}`,o&&(t=`${t}/${n}`),t},render(){return o.createElement("div",{className:"ev-branching-score-container"},o.createElement("div",{className:"ev-branching-score-label ev-label"},o.createElement("div",{className:"ev-branching-score-text"},this.getScoreText())))}});e.exports=i},1674:function(e,t,s){"use strict";const n=s(2),o=s(1),i=s(0),r=s(7),{Motion:a,spring:c}=s(1401),l=s(33),p=n({displayName:"BranchingAssessmentResults",propTypes:{score:o.number.isRequired,isPassed:o.bool.isRequired,feedback:o.string,assessmentScoreText:o.string,displayScore:o.bool.isRequired},renderScore(){if(!this.props.displayScore)return;const{score:e,isPassed:t,assessmentScoreText:s}=this.props;return i.createElement("div",{className:"ev-branching-assessment-score"},i.createElement("div",{className:"ev-info-detail"},i.createElement("div",{className:r("ev-icon ev-info-detail-display",{"ev-icon-cross":!t,"ev-icon-check":t})}),i.createElement("div",{className:"ev-info-detail-label"},s,": ",i.createElement("strong",null,e,"%"))))},getDefaultMotionStyle:()=>({opacity:0}),getMotionStyle:()=>({opacity:c(1)}),render(){return i.createElement(a,{defaultStyle:this.getDefaultMotionStyle(),style:this.getMotionStyle()},e=>i.createElement("div",{className:"ev-branching-assessment-results"},i.createElement("div",{className:"ev-branching-assessment-results-content"},this.renderScore(),i.createElement(l,{className:"ev-branching-assessment-results-feedback",body:this.props.feedback}))))}});e.exports=p},1675:function(e,t,s){"use strict";const n=s(2),o=s(0),i=s(7),r=s(140),a=n({displayName:"BranchingProgressBar",renderLabel(){if(this.props.progressBarLabelText)return o.createElement("div",{className:"ev-branching-progress-bar-label ev-label"},o.createElement("div",{className:"ev-branching-score-text"},this.props.progressBarLabelText))},getBarStyle(){const{progressBarBackgroundColor:e,swatches:t}=this.props,s={};return e&&"transparent"!==e&&(s.backgroundColor=r(e,t)),s},getHighlightStyle(e){const{progressBarHighlightColor:t,swatches:s}=this.props,n={width:e+"%"};return t&&"transparent"!==t&&(n.backgroundColor=r(t,s)),n},getCounterStyle(e){const{progressBarHighlightColor:t,progressBarTextColor:s,isRTL:n,swatches:o,screenSize:i}=this.props,a={};return"small"!==i&&(a[n?"right":"left"]=e+"%"),t&&"transparent"!==t&&(a.backgroundColor=r(t,o)),s&&"transparent"!==s&&(a.color=r(s,o)),a},renderCounter(e){const{score:t,progressBarType:s,progressBarLabelText:n,screenSize:r}=this.props,a="items"===s?e+"%":t;return o.createElement("div",{className:i("ev-branching-progress-bar-counter ev-label",{"ev-branching-progress-bar-counter-near-end":"small"!==r&&e>25}),style:this.getCounterStyle(e),role:"progressbar","aria-valuetext":`${n} ${a}`},o.createElement("span",{className:"ev-branching-progress-bar-counter-text"},a),o.createElement("span",{className:"ev-branching-progress-bar-counter-text-hidden","aria-hidden":!0},"100%"))},render(){const{currentProgressPercentage:e,screenSize:t}=this.props;return o.createElement("div",{className:i("ev-branching-progress-bar-container",{"ev-branching-progress-bar-container-mobile-layout":"small"===t})},this.renderLabel(),o.createElement("div",{className:"ev-branching-progress-bar-container-inner"},o.createElement("div",{className:"ev-branching-progress-bar",style:this.getBarStyle()},o.createElement("div",{className:"ev-branching-progress-bar-highlight",style:this.getHighlightStyle(e)}),"small"!==t&&this.renderCounter(e)),"small"===t&&this.renderCounter(e)))}});e.exports=a},1676:function(e,t,s){"use strict";const n=s(2),o=s(1),i=s(0),r=s(7),{Component:a}=s(468),c=s(119),l=s(1370),p=s(1677),d=n({displayName:"BranchingStart",propTypes:{component:o.object.isRequired,openFullScreen:o.func.isRequired,articleStyle:o.string.isRequired,styles:o.object},openBranchingFullscreen(e){var t,s,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(s=e.currentTarget)||void 0===s||null===(n=s.blur)||void 0===n||n.call(s);const{props:o}=this,i=o.component._id;o.openFullScreen({component:p,props:{componentId:i,articleStyle:o.articleStyle}})},renderWidget(){var e,t;const{component:s}=this.props;let n;return(null!=s&&null!==(e=s._posterGraphic)&&void 0!==e&&e.src||null!==(t=s._posterGraphic)&&void 0!==t&&t.srcAdvanced)&&(n=i.createElement(c,{className:"ev-branching-poster-image",graphicSrc:s._posterGraphic.src,graphicSrcAdvanced:s._posterGraphic.srcAdvanced,altText:s._posterGraphic.alt,autoSize:!0})),i.createElement("div",{className:l(s)},i.createElement("div",{className:r("ev-branching-poster",{"ev-has-image":n})},n,i.createElement("button",{id:"ev-branching-component-open-fullscreen-"+s._id,className:"ev-button ev-has-icon ev-branching-poster-button ev-button-icon-position-left",onClick:this.openBranchingFullscreen},i.createElement("i",{className:"ev-icon ev-icon-play-circle"}),i.createElement("span",null,s.startFullScreenButtonText||"Start"))))},render(){return i.createElement(a,{component:this.props.component,styles:this.props.styles,shouldHideQuestionButtons:!0},this.renderWidget())}});e.exports=d},1677:function(e,t,s){"use strict";const n=s(93),o=s(2),i=s(0),{connect:r}=s(6),{getComponent:a}=s(4),c=o({displayName:"BranchingFullscreen",componentDidMount(){this.props.resetScroll()},render(){const e=a("branching");return i.createElement("div",{className:"ev-branching-fullscreen"},i.createElement("div",{className:"ev-page"},i.createElement("div",{className:"ev-page-inner"},i.createElement("div",{className:"ev-article ev-"+this.props.articleStyle},i.createElement("div",{className:"ev-article-inner"},i.createElement("div",{className:"ev-block"},i.createElement("div",{className:"ev-block-inner"},i.createElement("div",{className:"ev-component-container"},i.createElement(e,{component:this.props.component,closeFullScreen:this.props.closeFullScreen,isFullScreen:!0,resetScroll:this.props.resetScroll})))))))))}});e.exports=r((e,t)=>{const s=n(e.components[t.componentId],["displayTitle","body","instruction"]);return s._isInteractionLabelEnabled=!1,{component:s}})(c)},1678:function(e,t,s){"use strict";const n=s(18),o=s(32),i=s(141),r=s(99),a=s(31),c=s(470),l=s(10),p=s(220),{SETUP_COMPONENT:d,RESET_QUESTION:m}=s(61),{BRANCHING_OPTION_SELECTED:u,BRANCHING_END_ITEM:h,BRANCHING_DISPLAY_COMPLETE_STORY:_,BRANCHING_CLOSE_FULLSCREEN:g,BRANCHING_ITEM_VIDEO_METRICS:S,BRANCHING_SOFT_RESET:E}=s(1456);function y(e){const t=n(e._items,(function(e){return e._isInitialItem}));return t||{}}function I(e,t){return n(e._items,(function(e){return e._id===t}))}function v(e,{itemId:t,optionId:s,optionScore:a}){const c=y(e),p=I(e,e._currentItemId);let d=I(e,t),m=e._score;const u=e._shouldResetScoreOnStart;if(!d)return e;u&&c._id===d._id?m=0:m+=a,d._isScoreItem&&(d=function e(t,s,a){if(0===s._options.length)return null;const c=o(s._options,(function(e){return a>=e._scoreRequired}));if(0===c.length)return null;const l=i(c,"_scoreRequired"),p=r(l)._itemId;if(!p)return;const d=n(t._items,(function(e){return e._id===p}));return d._isScoreItem?e(t,d,a):d}(e,d,m));const h={_id:p._id,_selectedOptionId:s};return l({},e,{_currentItemId:d._id,_previousItems:[...e._previousItems,h],_score:m,_canAutoFocus:!0})}function b(e,t){const s=a(e._items,e=>l({},e,{_options:a(e._options,e=>l({},e,{_isSelected:!1}))}));return l({},e,{_currentItemId:y(e)._id,_restartedCount:e._restartedCount+1,_previousItems:[],_isComplete:!!t&&e._isComplete,_hasReachedEndItem:!1,_score:0,_hasLink:!1,_displayCompletedStory:!1,_items:s})}e.exports=(e,t)=>{switch(t.type){case d:return function(e){const t=e._currentItemId,s=e._previousItems,n=e._score;let o=!1;const i=I(e,t);i&&"none"!==i._linkType&&(i._linkedPageId||i._linkUrl)&&0===i._options.length&&(o=!0);const r=a(e._items,t=>{if(e._shouldRandomiseOptions||t._shouldRandomiseOptions&&!t._isScoreItem){const e=c(t._options);return l({},t,{_options:e})}return t});return e._canResumeOnRevisit||e._isComplete?l({},e,{_currentItemId:t||(e._isComplete&&e._isAssessmentEnabled?null:y(e)._id),_previousItems:s||[],_items:e._isComplete?e._items:r,_restartedCount:0,_score:void 0!==n?n:0,_hasLink:o,_hasReachedEndItem:e._hasReachedEndItem,_canAutoFocus:!1}):l({},e,{_currentItemId:y(e)._id,_items:r,_previousItems:[],_restartedCount:0,_isComplete:!1,_isCorrect:!1,_hasReachedEndItem:!1,_score:0,_hasLink:!1,_displayCompletedStory:!1,_canAutoFocus:!1,_isPassed:!1,_assessmentScore:0})}(e);case m:return b(e);case E:return b(e,!0);case u:return v(e,t.payload);case h:return function(e,{itemId:t}){const s=e._shouldAlwaysMarkAsCorrect,n=I(e,t);let o=!1;(s||n._isCorrectItem)&&(o=!0);const i={_isCorrect:o,_hasReachedEndItem:!0};return o&&(i._correctAt=p()),"none"!==n._linkType&&(n._linkedPageId||n._linkUrl)&&(i._hasLink=!0),l({},e,i)}(e,t.payload);case _:return function(e){return e._isComplete&&e._hasReachedEndItem?l({},e,{_displayCompletedStory:!0}):e}(e);case g:return function(e){return l({},e,{_displayCompletedStory:!1})}(e);case S:return function(e,{itemId:t,metrics:s}){const n=a(e._items,e=>e._id===t?l({},e,{_metrics:s}):e);return l({},e,{_items:n})}(e,t.payload);default:return e}}},1679:function(e,t,s){"use strict";const{componentTrackableChange:n}=s(61),{BRANCHING_OPTION_SELECTED:o,BRANCHING_RESTART:i,BRANCHING_END_ITEM:r}=s(1456);t.branchingTrackableChangeEpic=e=>e.ofType(o,i,r).map(e=>n(e.payload.componentId))},1680:function(e,t,s){"use strict";const n=s(78);e.exports=(e,t)=>{const{theme:s,course:o,componentAssessment:i,navigation:r}=e,a={theme:s,buttons:o._buttons,articleStyle:n(e,t,"article")._classes,navigation:r};return t._isAssessmentEnabled&&i&&i._assessmentComponentId===t._id&&(a.assessmentAttemptsTaken=i._assessmentAttemptsTaken),a}},1681:function(e,t,s){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_options:{fieldKey:"_options",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0}}},_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},_currentItemId:{fieldKey:"_currentItemId",type:"String",shouldRestore:!0},_previousItems:{fieldKey:"_previousItems",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!0},_selectedOptionId:{fieldKey:"_selectedOptionId",type:"String",shouldRestore:!0}}},_score:{fieldKey:"_score",type:"Number",shouldRestore:!0},_restartedCount:{fieldKey:"_restartedCount",type:"Number",shouldRestore:!0},_attemptsLeft:{fieldKey:"_attemptsLeft",type:"Number",shouldRestore:!0},_attemptsTaken:{fieldKey:"_attemptsTaken",type:"Number",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0},_hasReachedEndItem:{fieldKey:"_hasReachedEndItem",type:"Boolean",shouldRestore:!0},_assessmentScore:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0}}}}]);