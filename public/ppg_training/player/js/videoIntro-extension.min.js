(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{1338:function(e,t,o){"use strict";const{registerEpics:i,registerReducer:s}=o(4),{showVideoIntroEpic:n,registerTrackingMapEpic:r}=o(2348),c=o(2354);i(r,n),s("videoIntro",c)},1498:function(e,t,o){"use strict";t.VIDEO_INTRO_METRICS="VIDEO_INTRO_METRICS",t.videoIntroMetricsChange=e=>({type:t.VIDEO_INTRO_METRICS,payload:e})},2348:function(e,t,o){"use strict";const i=o(0),{SETUP_APP:s}=o(9),{openFullScreen:n}=o(100),{registerTrackingMap:r}=o(4),{PAGE_OR_MENU_IS_READY:c}=o(38),{addPrompt:a}=o(95),l=o(2349),d=o(2351),u=o(2352),p=o(2353);t.registerTrackingMapEpic=(e,t)=>e.filter(e=>{const{_videoIntro:o}=t.getState().course;return o&&o._isEnabled&&e.type===s}).do(()=>{r("videoIntro",p,"extensions")}).ignoreElements(),t.showVideoIntroEpic=(e,t)=>e.filter(({type:e})=>{if(e!==c)return!1;const{app:{isPagePreview:o},course:i,location:s}=t.getState(),n=i._videoIntro;return!(o||!n||!n._isEnabled)&&(!n._shouldOnlyDisplayOnMenu||"menu"===s.currentContentType)}).take(1).map(()=>{const{course:e,device:o}=t.getState(),s=e._videoIntro;if(s._useVideoStream)return a({_component:i.createElement(u,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:s._closeButtonText}});if(s._shouldShowFullScreen&&"small"!==o.screenSize&&(!o.touch||o.isWindowsTouchScreen))return n({component:l,props:s});const r={_component:i.createElement(d,null),_shouldNotShowInNavigation:!0,_hasPriority:!0,_sortOrder:1,_class:"ev-video-intro-prompt",_dismiss:{text:s._closeButtonText}};return s._video&&(r._shouldWaitForDisplay=!0),a(r)})},2349:function(e,t,o){"use strict";const i=o(10),s=o(2),n=o(0),{connect:r}=o(6),{videoIntroMetricsChange:c}=o(1498),a=o(2350),l=s({displayName:"VideoIntroFullScreenContainer",render:function(){return n.createElement(a,this.props)}});e.exports=r(e=>i({},e.course._videoIntro,e.videoIntro,{theme:e.theme}),{videoIntroMetricsChange:c})(l)},2350:function(e,t,o){"use strict";const i=o(217),s=o(8),n=o(2),r=o(1),c=o(0),a=o(7),l=o(76),d=o(305),u=n({displayName:"VideoIntroFullScreen",propTypes:{device:r.object.isRequired,closeFullScreen:r.func.isRequired,_metrics:r.object,videoIntroMetricsChange:r.func.isRequired},getInitialState:function(){return{_isVideoLoaded:!1,_isVideoPlaying:!1,_isVisible:!0,_hasVideoStarted:!1}},handleVideoLoad:function(){this.setState({_isVideoLoaded:!0})},onPlay:function(){this.setState({_isVideoPlaying:!0,_hasVideoStarted:!0})},onPause:function(){this.setState({_isVideoPlaying:!1})},onMetricsChange:function(e){this.props.videoIntroMetricsChange(e)},onCloseClicked:function(e){e.preventDefault(),e.currentTarget.blur();const{closeFullScreen:t}=this.props;this.setState({_isVisible:!1},()=>{i(()=>{t()},300)})},getStyle:function(){const{windowHeight:e,windowWidth:t}=this.props.device,{_isVisible:o}=this.state;return{width:t+"px",height:e+"px",opacity:o?1:0}},getClassName:function(){return a("ev-video-intro-fullscreen ev-use-custom-play-button",{"ev-is-cropped-video":this.props._shouldCropVideo,"ev-is-centered-video":!this.props._shouldCropVideo,"ev-is-playing":this.state._isVideoPlaying})},renderVideo:function(){const{_shouldCropVideo:e,_video:t,_subtitles:o,_metrics:i}=this.props,n=l(t);if(n)return c.createElement(d,{src:n,posterSrc:l(this.props._poster),controls:!e,metrics:i,className:"ev-video-intro-fullscreen-video",subtitlesSrc:e?null:l(s(o,"src")),subtitlesLabel:s(o,"label"),onPlay:this.onPlay,hasFullScreen:!1,onMetricsChange:this.onMetricsChange,onLoadStart:this.handleVideoLoad,onPause:this.onPause})},render:function(){const{props:e,state:t}=this;return c.createElement("div",{className:this.getClassName(),style:this.getStyle()},c.createElement("div",{className:"ev-video-intro-fullscreen-video-container"},this.renderVideo()),c.createElement("div",{className:a("ev-video-intro-fullscreen-actions",{"ev-is-bottom":e._isFullScreenCloseButtonAtBottom})},c.createElement("button",{className:"ev-button",disabled:e._shouldEnableCloseButtonOnPlay&&!t._hasVideoStarted,onClick:this.onCloseClicked},this.props._closeButtonText)))}});e.exports=u},2351:function(e,t,o){"use strict";const{connect:i}=o(6),{videoIntroMetricsChange:s}=o(1498),n=o(479);e.exports=i(({videoIntro:e,course:{_videoIntro:t}})=>({src:t._video,poster:t._poster,subtitles:t._subtitles,transcript:t._transcript,shouldAutoPlay:t._shouldAutoPlay,metrics:e._metrics}),{onMetricsChange:s})(n)},2352:function(e,t,o){"use strict";const i=o(8),{connect:s}=o(6),n=o(486);e.exports=s(({course:{_id:e,_videoIntro:t}})=>({id:e,service:i(t,"_videoStream._service"),options:i(t,"_videoStream._options")}))(n)},2353:function(e,t,o){"use strict";e.exports={_metrics:{fieldKey:"_metrics",type:"Object",shouldRestore:!0}}},2354:function(e,t,o){"use strict";const i=o(10),{VIDEO_INTRO_METRICS:s}=o(1498),{RESTORE_EXTENSION:n}=o(96),r={_metrics:null};e.exports=(e=r,t)=>{switch(t.type){case s:return i({},e,{_metrics:t.payload});case n:return"videoIntro"===t.payload.extensionName?i({},e,t.payload.extensionData):e;default:return e}}}}]);