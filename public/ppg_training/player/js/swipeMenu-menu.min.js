(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1309:function(e,t,n){"use strict";const{registerMenu:s,registerEpics:o}=n(4),i=n(1428),r=n(2179);o(i("swipeMenu")),s("swipeMenu",r)},1387:function(e,t,n){"use strict";e.exports=function(e){const t=e.displayTitle,n=e._heroImage?e._heroImage.title:null;return t||n}},1428:function(e,t,n){"use strict";const s=n(8),{Observable:o}=n(5),{setLocationReadyState:i,PUSH_LOCATION:r}=n(9),u=n(303),c=n(218);e.exports=e=>(t,n)=>t.filter(({type:t})=>{if(t!==r)return;const{location:s,settings:o}=n.getState();return"menu"===s.currentContentType&&o._menu===e}).switchMap(()=>{const t=n.getState(),{location:r,contentObjects:a,device:l,course:h}=t,{currentId:m}=r,d=m===h._id?h:a[m],p=s(d,["_"+e,"_heroImage"]);if(!p||!p._graphic)return o.empty();const w=u(p._graphic.src,p._graphic.srcAdvanced,!0);return w?o.concat(o.of(i(!1)),o.bindCallback(c)(w,!1).map(()=>i(!0))):o.empty()})},1493:function(e,t,n){"use strict";const s=n(2),o=n(1),i=n(0),r=n(48),u=s({displayName:"Swipeable",propTypes:{onSwipe:o.func.isRequired,threshold:o.number,allowedTime:o.number,restraint:o.number},getDefaultProps:function(){return{threshold:30,allowedTime:400,restraint:100}},getInitialState:function(){return{_startX:0,_startY:0,_startTime:0}},onTouchStart:function(e){const t=e.changedTouches[0];this.setState({_startX:t.pageX,_startY:t.pageY,_startTime:(new Date).getTime()}),e.target===r.findDOMNode(this)&&e.preventDefault()},onTouchMove:function(){},onTouchEnd:function(e){const t=e.changedTouches[0],n=t.pageX-this.state._startX,s=t.pageY-this.state._startY,o=(new Date).getTime()-this.state._startTime;let i="none";o<=this.props.allowedTime&&(Math.abs(n)>=this.props.threshold&&Math.abs(s)<=this.props.restraint?i=n<0?"left":"right":Math.abs(s)>=this.props.threshold&&Math.abs(n)<=this.props.restraint&&(i=s<0?"up":"down"));const u={direction:i,speed:{x:n/o,y:s/o},distance:{x:n,y:s},timeTaken:o};this.props.onSwipe(u),this.setState({_startX:0,_startY:0,_startTime:0}),e.target===r.findDOMNode(this)&&e.preventDefault()},render:function(){return i.createElement("div",{className:"ev-swipeable",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},this.props.children)}});e.exports=u},2179:function(e,t,n){"use strict";const s=n(8),o=n(31),i=n(2),r=n(1),u=n(0),c=n(1493),a=n(7),{Menu:l}=n(302),h=n(2180),m=i({displayName:"SwipeMenu",propTypes:{menu:r.object.isRequired,device:r.object.isRequired,theme:r.object.isRequired,itemIds:r.array.isRequired,location:r.object.isRequired,hasActionBar:r.bool.isRequired},getInitialState:function(){return{currentIndex:0}},componentWillReceiveProps:function({device:e}){const{props:t}=this;t.device.orientation!==e.orientation&&this.setState({currentIndex:0})},getMenuItemsContainerClass:function(){const{menu:e,device:t}=this.props;let n=e._swipeMenu._shouldShowControlsOnHover;const s=e._swipeMenu._shouldShowControlsOnBottom,o=e._swipeMenu._shouldPartiallyShowNextItem,i=e._swipeMenu._shouldDisableItemScaling;return(t.touch&&!t.isWindowsTouchScreen||s)&&(n=!1),a("ev-menu-items-container ev-clearfix",{"ev-show-controls-on-hover":n,"ev-show-controls-bottom":s,"ev-partially-show-next-item":o,"ev-should-disable-item-scaling":i})},getMenuItemsStyle:function(){let e="auto";const t=this.props.menu._swipeMenu;return t._shouldShowControlsOnBottom?e="auto":!t._shouldShowControlsOnBottom&&t._shouldShowControlsOnHover?e=this.props.device.touch&&!this.props.device.isWindowsTouchScreen?"0 34px":"auto":t._shouldShowControlsOnBottom||t._shouldShowControlsOnHover||(e="0 34px"),{margin:e,overflow:this.props.menu._swipeMenu._shouldAlwaysShowItems?"visible":"hidden"}},getMenuItemsInnerStyle:function(e){const{device:t,menu:n}=this.props,{currentIndex:s}=this.state,o=this.getItemsVisible(),{_shouldPartiallyShowNextItem:i,_shouldShowControlsOnHover:r,_shouldShowControlsOnBottom:u}=n._swipeMenu;let c=100/o*s;if(i&&(!r||!u))switch(t.screenSize){case"medium":c=46*s;break;case"small":c=90*s;break;default:c=31*s}const a=e?c+"%":`-${c}%`;let l=`translate(${a}, 0)`;return Modernizr.csstransforms3d&&(l=`translate3d(${a}, 0, 0)`),{transform:l}},getItemsVisible:function(){const{device:e}=this.props;let t;switch(e.screenSize){case"medium":t=2;break;case"small":t=1;break;default:t=3}return this.props.itemIds.length<t&&(t=this.props.itemIds.length),t},getShouldAlwaysShowContent:function(){const{course:e}=this.props;return e._swipeMenu&&!0===e._swipeMenu._shouldDisableDetailOnHover},showItemContent:function(e){this.setState({_itemSelectedId:e})},onLeftClicked:function(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex-1,_itemSelectedId:null})},onRightClicked:function(e){e.preventDefault(),e.stopPropagation(),this.setState({currentIndex:this.state.currentIndex+1,_itemSelectedId:null})},onMenuItemsSwipe:function(e){"left"===e.direction?this.onSwipeLeft():"right"===e.direction&&this.onSwipeRight()},onSwipeLeft:function(){this.state.currentIndex<this.props.itemIds.length-this.getItemsVisible()&&this.setState({currentIndex:this.state.currentIndex+1})},onSwipeRight:function(){this.state.currentIndex>0&&this.setState({currentIndex:this.state.currentIndex-1})},renderLeftControl:function(e){const t=0===this.state.currentIndex;if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const n=a("ev-menu-controls",{"ev-menu-controls-left":!e,"ev-menu-controls-right":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),s=a("ev-button ev-primary ev-menu-control ev-menu-control-left",{"ev-is-active":!t});return u.createElement("div",{className:n},u.createElement("button",{className:s,onClick:this.onLeftClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.prevButtonAriaLabel},u.createElement("i",{className:a("ev-icon",{"ev-icon-arrow-left":!e,"ev-icon-arrow-right":e})})))},renderRightControl:function(e){const t=this.state.currentIndex===this.props.itemIds.length-this.getItemsVisible();if(t&&this.props.menu._swipeMenu._shouldHideDisabledControl)return;const n=a("ev-menu-controls",{"ev-menu-controls-right":!e,"ev-menu-controls-left":e,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom}),s=a("ev-button ev-primary ev-menu-control ev-menu-control-right",{"ev-is-active":!t,"ev-is-bottom":this.props.menu._swipeMenu._shouldShowControlsOnBottom});return u.createElement("div",{className:n},u.createElement("button",{className:s,onClick:this.onRightClicked,disabled:t,"aria-label":this.props.menu._swipeMenu.nextButtonAriaLabel},u.createElement("i",{className:a("ev-icon",{"ev-icon-arrow-right":!e,"ev-icon-arrow-left":e})})))},getShouldShowProgressBars:function(){const{props:e}=this,t=s(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),n=s(e.menu,"_swipeMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?n:"true"===t},renderItems:function(){const{props:e}=this,t=s(e.menu,"_swipeMenu._shouldShowIconOnMenuItems",!1),n=s(e.theme,"_menu._settings._durationIcon",null);return o(e.itemIds,(s,o)=>{const i=o>=this.state.currentIndex&&o<this.state.currentIndex+this.getItemsVisible(),r=s===this.state._itemSelectedId;return u.createElement(h,{key:s,itemId:s,showItemContent:this.showItemContent,isContentVisible:r,isVisibleItem:i,shouldShowProgressBarsOnMenus:this.getShouldShowProgressBars(),shouldShowIconOnMenuItems:t,shouldAlwaysShowContent:this.getShouldAlwaysShowContent(),shouldAlwaysShowItems:e.menu._swipeMenu._shouldAlwaysShowItems,durationIcon:n,device:e.device})})},render:function(){const{props:e}=this,t=s(e.course,"_isRTL",!1);return u.createElement(l,{className:"ev-swipe-menu",menu:e.menu,menuSettings:e.menu._swipeMenu,device:e.device,theme:e.theme,location:e.location,hasActionBar:e.hasActionBar},u.createElement("div",{className:this.getMenuItemsContainerClass()},this.renderLeftControl(t),u.createElement(c,{onSwipe:this.onMenuItemsSwipe},u.createElement("div",{className:"ev-menu-items",ref:"menuItems",style:this.getMenuItemsStyle()},u.createElement("div",{className:"ev-menu-items-inner",style:this.getMenuItemsInnerStyle(t)},this.renderItems()))),this.renderRightControl(t)))}});e.exports=m},2180:function(e,t,n){"use strict";const s=n(8),o=n(2),i=n(0),r=n(7),u=n(1387),c=n(478),a=n(170),l=n(303),h=n(63),m=n(143),d=n(33),{MenuItemProgress:p,MenuItemDuration:w,MenuItemHOC:v,MenuItemLink:g}=n(302),I=n(64),_=o({displayName:"SwipeMenuItem",onTouchStart:function(){this.props.showItemContent(this.props.item._id)},onMouseOver:function(){this.props.showItemContent(this.props.item._id)},onMouseOut:function(){this.props.showItemContent(this.props.item._id)},onLinkPressed:function(e){e.stopPropagation()},getStyle:function(){const e={width:this.props.width+"px",height:this.props.height+"px"},t=s(this.props.item,"_swipeMenu._graphic"),n=s(this.props.item,"_swipeMenu._hoverGraphic");return t&&a(t.src,t.srcAdvanced)&&(e.backgroundImage="url("+l(t.src,t.srcAdvanced,!0)+")"),this.props.isContentVisible&&n&&a(n.src,n.srcAdvanced)&&(e.backgroundImage="url("+l(n.src,n.srcAdvanced,!0)+")"),e},getItemClass:function(){const e=s(this.props.device,"browser.name");return r("ev-menu-item ev-collection-item ev-menu-item-"+this.props.item._id,{"ev-is-visible-item":!!this.props.shouldAlwaysShowItems||this.props.isVisibleItem,"ev-is-content-visible":this.props.isContentVisible,"ev-static-content":this.props.shouldAlwaysShowContent,"ev-supports-scaling":"ie"!==e})},renderTitle:function(){const e=u(this.props.item);if(e)return i.createElement(m,{headingElement:"h2",displayTitle:e,className:"ev-menu-item-title",innerClassName:"ev-menu-item-title-inner"})},renderBody:function(){if(this.props.item.description)return i.createElement(d,{body:this.props.item.description,className:"ev-menu-item-body",innerClassName:"ev-menu-item-body-inner"})},renderDuration:function(){const{durationIcon:e,item:t}=this.props,{duration:n,durationLabel:s}=t;if(n)return i.createElement(w,{duration:n,durationIcon:e,durationLabel:s})},renderProgress:function(){const{props:e}=this;if(e.shouldShowProgressBarsOnMenus)return i.createElement(p,{item:e.item,pageMenuItemsCompletedCount:e.pageMenuItemsCompletedCount,pageMenuItemsCount:e.pageMenuItemsCount,completedChildrenAsPercentage:e.completedChildrenAsPercentage})},renderLink:function(){const{item:e}=this.props;return i.createElement(g,{isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`,onClick:this.onLinkPressed,onTouchMove:this.onLinkPressed,onTouchStart:this.onLinkPressed,onTouchEnd:this.onLinkPressed})},renderElements:function(e){const{props:t}=this;return h("menuItem",e,{item:t.item})},render:function(){return i.createElement(I,{id:this.props.item._id,name:"menu item",className:this.getItemClass(),style:this.getStyle(),onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onTouchStart:this.onTouchStart},this.renderElements("root"),c(this.props.item,"menuitem"),i.createElement("div",{className:"ev-menu-item-inner ev-collection-item-inner"},i.createElement("div",{className:"ev-collection-item-content"},i.createElement("div",{className:"ev-collection-item-content-inner ev-clearfix"},this.renderTitle(),i.createElement("div",{className:"ev-menu-item-hidden-content"},this.renderBody(),this.renderDuration(),this.renderElements("content"),this.renderProgress(),this.renderLink())))))}});e.exports=v(_)}}]);