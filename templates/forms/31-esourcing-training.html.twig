{% extends 'base.html.twig' %}

{% block title %}Book online training for the CCS eSourcing tool - CCS{% endblock %}

{% block header %}
    {% embed '/includes/header.html.twig' %}
        {% block bannerarea %}
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block body %}

    <!-- required wrapper 1 -->
    <div class="govuk-width-container">

        <!-- If your design requires them, you should place components such as breadcrumbs, back link and phase banner inside this wrapper so that they sit directly underneath the header. -->

        <div class="govuk-phase-banner">
            <p class="govuk-phase-banner__content">
                <strong class="govuk-tag govuk-phase-banner__content__tag ">
                    beta </strong> <span class="govuk-phase-banner__text">
      This is a new service â€“ your
      <a class="govuk-link" href="https://www.surveymonkey.co.uk/r/ZHV7B2S">feedback</a> will help us to improve it.
    </span>
            </p>
        </div>


        <!--<div class="govuk-breadcrumbs">-->
        <!--<ol class="govuk-breadcrumbs__list">-->
        <!--<li class="govuk-breadcrumbs__list-item">-->
        <!--<a class="govuk-breadcrumbs__link" href="/">Home</a>-->
        <!--</li>-->
        <!--<li class="govuk-breadcrumbs__list-item">-->
        <!--<a class="govuk-breadcrumbs__link" href="#">Search suppliers</a>-->
        <!--</li>-->
        <!--<li class="govuk-breadcrumbs__list-item" aria-current="page">-->
        <!--Amey OW Limited-->
        <!--</li>-->
        <!--</ol>-->
        <!--</div>-->


        <!-- required wrapper 2 -->
        <main id="main-content"  class="govuk-main-wrapper">


            {#<div class="govuk-grid-row">#}
            {#<div class="govuk-grid-column-full">#}

            {#<h1 class="govuk-heading-xl page-title">Book online training for the CCS eSourcing tool</h1>#}

            {#</div>#}
            {#</div>#}


            <div class="govuk-grid-row">
                <div class="govuk-grid-column-three-quarters">

                    <h1 class="govuk-heading-xl page-title">Book online training for the CCS eSourcing tool</h1>


                    <p class="govuk-body-l">Complete the form below to book a place on one of our online training sessions.</p>

                    <p>The sessions are between 1 and 1.5 hours long. Log-in details will be issued in a meeting invitation sent to you about one week before the training date.</p>



                    {#<form action="{{ web_to_case_post_url }}" method="POST">#}

                        {#<input type=hidden name="orgid" value="{{ web_to_case_orgid }}">#}
                        {#<input type=hidden name="retURL" value="{{ site_url }}/esourcing-training/thanks"> <!-- add the redirect url here-->#}
                        {#<input type="hidden" id="priority" name="priority" value="Green" />#}
                        {#<input type="hidden" id="recordType" name="recordType" value="{{ web_to_case_record_type }}" />#}
                        {#<input type="hidden" id="subject" maxlength="80" name="subject" size="20" value="Contact CCS" />#}
                        {# Subject is where the information is stored !!! #}
                        {# Description field contains date #}

                        {# SUPPLIERS ALSO NEEDS DATES #}

                        {# see https://symfony.com/doc/current/templating/app_variable.html #}
                        {#{% if app.debug %}#}
                            {#<input type="hidden" name="debug" value=1>#}
                            {#<input type="hidden" name="debugEmail" value="{{ web_to_case_debug_email }}">#}
                        {#{% endif %}#}

                        {#<label for="name">Contact Name</label><input  id="name" maxlength="80" name="name" size="20" type="text" /><br>#}
                        {#<label for="company">Organisation</label><input  id="company" maxlength="80" name="company" size="20" type="text" /><br>#}
                        {#<label for="email">Email</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br>#}
                        {#<label for="phone">Phone</label><input  id="phone" maxlength="40" name="phone" size="20" type="text" /><br>#}
                        {#<label for="checkbox-label">Do you require a call back</label><input id="00Nb0000009IXEg" name="00Nb0000009IXEg" type="checkbox" value="1" /><br>#}
                        {#<label for="job-title">Job Title</label><input id="00Nb0000009IXEs" maxlength="100" name="00Nb0000009IXEs" size="20" type="text" /><br>#}
                        {#<label for="description">Description</label><textarea name="description"></textarea><br>#}

                        {#<input type="submit" name="Submit">#}

                    {#</form>#}



                    <!-- form -->
                    {# For Twig global variables see config/packages/<environment>/twig.yaml #}
                    <form class="govuk-!-width-three-quarters" action="{{ web_to_case_post_url }}" method="POST">

                        {# Change these field types to hidden for Production #}
                        <input type="hidden" name="orgid" value="{{ web_to_case_orgid }}">
                        {# Post-submit redirect URL #}
                        <input type="hidden" name="retURL" value="{{ site_url }}/esourcing-training/thanks">
                        <input type="hidden" id="priority" name="priority" value="Green" />
                        <input type="hidden" id="recordType" name="recordType" value="{{ web_to_case_record_type }}" />
                        <input type="hidden" id="subject" maxlength="80" name="subject" size="20" value="Website - eSourcing Training" />
                        <input type="hidden" id="origin" maxlength="80" name="origin" size="20" value="Website - eSourcing Training" />

                        {# See https://symfony.com/doc/current/templating/app_variable.html #}
                        {% if app.debug %}
                            <input type="hidden" name="debug" value=1>
                            <input type="hidden" name="debugEmail" value="{{ web_to_case_debug_email }}">
                        {% endif %}


                        {# `name` value must match fields in Salesforce. `class` value must match GDS components #}

                        <div class="govuk-form-group">
                            <fieldset class="govuk-fieldset" aria-describedby="how-contacted-conditional-hint">
                                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                    <h1 class="govuk-fieldset__heading">
                                        Are you a:
                                    </h1>
                                </legend>
                                <div class="govuk-radios govuk-radios--conditional" data-module="radios">
                                    <div class="govuk-radios__item">
                                        <input class="govuk-radios__input" id="how-contacted-conditional-1" name="customer-type" type="radio" value="Buyer" data-aria-controls="conditional-how-contacted-conditional-1">
                                        <label class="govuk-label govuk-radios__label" for="how-contacted-conditional-1">
                                            Buyer
                                        </label>
                                    </div>
                                    <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-how-contacted-conditional-1">

                                        <div class="govuk-form-group">
                                            <fieldset class="govuk-fieldset">
                                                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                                    <h1 class="govuk-fieldset__heading visuallyhidden">
                                                        Choose your training time from the following:
                                                    </h1>
                                                </legend>
                                                <div class="govuk-radios govuk-radios--small">

                                                    {% for buyer_date in esourcingDates.content.buyer_dates %}

                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="buyer-training-dates-{{ loop.index }}" name="buyer-training-dates" type="radio" value="{{ buyer_date.date|date('jS M Y - g:ia') }}">
                                                            <label class="govuk-label govuk-radios__label" for="buyer-training-dates-{{ loop.index }}">
                                                                {{ buyer_date.date|date('jS M Y - g:ia') }}
                                                            </label>
                                                        </div>

                                                    {% endfor %}

                                                </div>
                                            </fieldset>
                                        </div>


                                    </div>
                                    <div class="govuk-radios__item">
                                        <input class="govuk-radios__input" id="how-contacted-conditional-2" name="customer-type" type="radio" value="Supplier" data-aria-controls="conditional-how-contacted-conditional-2">
                                        <label class="govuk-label govuk-radios__label" for="how-contacted-conditional-2">
                                            Supplier
                                        </label>
                                    </div>
                                    <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-how-contacted-conditional-2">


                                        <div class="govuk-form-group">
                                            <fieldset class="govuk-fieldset">
                                                <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                                                    <h1 class="govuk-fieldset__heading visuallyhidden">
                                                        Choose your training time from the following:
                                                    </h1>
                                                </legend>
                                                <div class="govuk-radios govuk-radios--small">

                                                    {% for supplier_date in esourcingDates.content.supplier_dates %}
                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="supplier-training-dates-{{ loop.index }}" name="supplier-training-dates" type="radio" value="{{ supplier_date.date|date('jS M Y - g:ia') }}">
                                                            <label class="govuk-label govuk-radios__label" for="supplier-training-dates-{{ loop.index }}">
                                                                {{ supplier_date.date|date('jS M Y - g:ia') }}
                                                            </label>
                                                        </div>
                                                    {% endfor %}

                                                </div>
                                            </fieldset>
                                        </div>


                                    </div>
                                </div>
                            </fieldset>
                        </div>


                        <div class="govuk-form-group">
                            <label class="govuk-label" for="name">
                                Name
                            </label>
                            <input class="govuk-input" id="name" maxlength="80" name="name" size="20" type="text" />
                        </div>
                        <div class="govuk-form-group">
                            <label class="govuk-label" for="email">
                                Email
                            </label>
                            <input class="govuk-input" id="email" maxlength="80" name="email" size="20" type="email" required />
                        </div>
                        <div class="govuk-form-group">
                            <label class="govuk-label" for="name">
                                Telephone number (optional)
                            </label>
                            <input class="govuk-input" id="phone" maxlength="40" name="phone" size="20" type="text" />
                        </div>


                        <div class="govuk-form-group">
                            <label class="govuk-label" for="company">
                                Organisation
                            </label>
                            <input class="govuk-input" id="company" maxlength="80" name="company" size="20" type="text" />
                        </div>

                        {# Catch-all field for additional Salesforce data #}
                        <input type="hidden" class="govuk-!-width-full" name="description" id="salesforce-textarea" />

                        <p>Here is our <a href="/privacy-notice">privacy notice</a>.</p>

                        <div class="govuk-form-group">
                            <button type="submit" id="submit" class="--gem-c-button govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button">Book online training</button>
                        </div>

                    </form>

                    <script>

                        // Collect all the radio values
                        customerTypeRadios = document.getElementsByName("customer-type");
                        buyerTrainingRadios = document.getElementsByName("buyer-training-dates");
                        supplierTrainingRadios = document.getElementsByName("supplier-training-dates");

                        // The field were we collect all the data for Salesforce
                        dataCollectionFieldForSalesforce = document.getElementById("salesforce-textarea");

                        // We gather the data once the user submits the form
                        formSubmitButton = document.getElementById("submit");

                        formSubmitButton.addEventListener('click', function (e) {

                            for (var i = 0, length = customerTypeRadios.length; i < length; i++)
                            {

                                if (customerTypeRadios[i].checked)
                                {
                                    // put radio values into collection field
                                    dataCollectionFieldForSalesforce.value += customerTypeRadios[i].name + ": " + customerTypeRadios[i].value + ", ";

                                }
                            }
                            for (var i = 0, length = buyerTrainingRadios.length; i < length; i++)
                            {

                                if (buyerTrainingRadios[i].checked)
                                {
                                    // put radio values into collection field
                                    dataCollectionFieldForSalesforce.value += buyerTrainingRadios[i].name + ": " + buyerTrainingRadios[i].value + ", ";

                                }
                            }
                            for (var i = 0, length = supplierTrainingRadios.length; i < length; i++)
                            {

                                if (supplierTrainingRadios[i].checked)
                                {
                                    // put radio values into collection field
                                    dataCollectionFieldForSalesforce.value += supplierTrainingRadios[i].name + ": " + supplierTrainingRadios[i].value + ", ";

                                }
                            }

                        }, false);

                    </script>




                </div>
                {#<div class="govuk-grid-column-one-quarter">#}
                {#</div>#}
            </div>


        </main>
    </div>

{% endblock %}
