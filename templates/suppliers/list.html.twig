{% extends 'base.html.twig' %}

{% block title %}Search suppliers - CCS{% endblock %}

{% block header %}
    {% embed '/includes/header.html.twig' %}
        {% block bannerarea %}
        {% endblock %}
    {% endembed %}
{% endblock %}

{% block body %}



    <!-- required wrapper 1 -->
    <div class="govuk-width-container">

        <!-- If your design requires them, you should place components such as breadcrumbs, back link and phase banner inside this wrapper so that they sit directly underneath the header. -->

        <div class="govuk-phase-banner">
            <p class="govuk-phase-banner__content">
                <strong class="govuk-tag govuk-phase-banner__content__tag ">
                    beta </strong> <span class="govuk-phase-banner__text">
      This is a new service â€“ your
      <a class="govuk-link" href="https://www.smartsurvey.co.uk/s/QWDZX/">feedback</a> will help us to improve it.
    </span>
            </p>
        </div>


        <div class="govuk-breadcrumbs">
            <ol class="govuk-breadcrumbs__list">
                <li class="govuk-breadcrumbs__list-item">
                    <a class="govuk-breadcrumbs__link" href="/">Home</a>
                </li>
                <!--<li class="govuk-breadcrumbs__list-item">-->
                <!--<a class="govuk-breadcrumbs__link" href="2-3-frameworks-search-result">Search frameworks</a>-->
                <!--</li>-->
                <li class="govuk-breadcrumbs__list-item" aria-current="page">
                    Search suppliers
                </li>
            </ol>
        </div>





        <!-- required wrapper 2 -->
        <main id="main-content" role="main"  class="govuk-main-wrapper">


            <div class="govuk-grid-row">
                <div class="govuk-grid-column-full">

                    {% if query is defined %}
                        <h1 class="govuk-heading-xl page-title">Search suppliers for {{ query }}</h1>
                    {% else %}
                        <h1 class="govuk-heading-xl page-title">Search suppliers</h1>
                    {% endif %}

                    <div class="govuk-warning-text">
                        <span class="govuk-warning-text__icon" aria-hidden="true">!</span>
                        <strong class="govuk-warning-text__text">
                            <span class="govuk-warning-text__assistive">Important</span>
                            Some of our suppliers will not be displayed on this page
                        </strong>
                        <p>Select <a href="https://supplierregistration.cabinetoffice.gov.uk/dps">Dynamic Purchasing Systems</a> or
                            <a href="https://www.digitalmarketplace.service.gov.uk/g-cloud/suppliers">G-cloud/DOS</a> to see more suppliers for that type of agreement. To find out what a DPS, G-cloud or DOS is take a look at
                            <a href="/help-and-support/how-to-buy/">How to buy</a>.</p>
                    </div>

                </div>
            </div>


            <div class="govuk-grid-row">
                <div class="govuk-grid-column-one-third">

                    <form action="{{ path('suppliers_search') }}">

                        <div class="govuk-form-group govuk-form-group--enclosure">
                            <div class="govuk-form-group sidebar__search-group">
                                <label class="govuk-label" for="name">
                                    Search suppliers
                                </label>
                                <input class="govuk-input" id="q" name="q" type="text">
                                <button class="sidebar__search-button">
                                    <span class="visuallyhidden">Search suppliers</span>
                                </button>
                            </div>
                        </div>


                        <div class="ccs-filters-intro">
                            <a href="{{ path('suppliers_list') }}" class="ccs-clear-filters">Clear Filters</a>
                            <h2 class="govuk-heading-m">Apply filters</h2>
                        </div>


                        <div class="govuk-accordion ccs-accordion--clean" data-module="accordion" id="accordion-with-summary-sections">
                            <div class="govuk-accordion__section ccs-accordion__section--clean govuk-form-group govuk-form-group--enclosure">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
                                        <span class="govuk-accordion__section-button" id="accordion-with-summary-sections-heading-1">
                                            Select Framework
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-with-summary-sections-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-with-summary-sections-heading-1">
                                    <div class="govuk-radios govuk-radios--small ccs-radios--scrollable">
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-1" name="framework" type="radio" value="rm60034">
                                            <label class="govuk-label govuk-radios__label" for="framework-1">
                                                Behavioural Insights (RM6004)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-2" name="framework" type="radio" value="RM3774">
                                            <label class="govuk-label govuk-radios__label" for="framework-2">
                                                Apprenticeships Training and Related Services (RM3823)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-3" name="framework" type="radio" value="RM3823">
                                            <label class="govuk-label govuk-radios__label" for="framework-3">
                                                Campaign Solutions (RM3774)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-4" name="framework" type="radio" value="rm60034">
                                            <label class="govuk-label govuk-radios__label" for="framework-4">
                                                Behavioural Insights (RM6004)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-5" name="framework" type="radio" value="RM3774">
                                            <label class="govuk-label govuk-radios__label" for="framework-5">
                                                Campaign Solutions (RM3774)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-6" name="framework" type="radio" value="RM3823">
                                            <label class="govuk-label govuk-radios__label" for="framework-6">
                                                Apprenticeships Training and Related Services (RM3823)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-7" name="framework" type="radio" value="rm60034">
                                            <label class="govuk-label govuk-radios__label" for="framework-7">
                                                Behavioural Insights (RM6004)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-8" name="framework" type="radio" value="RM3774">
                                            <label class="govuk-label govuk-radios__label" for="framework-8">
                                                Apprenticeships Training and Related Services (RM3823)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-9" name="framework" type="radio" value="RM3823">
                                            <label class="govuk-label govuk-radios__label" for="framework-9">
                                                Campaign Solutions (RM3774)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-10" name="framework" type="radio" value="RM3823">
                                            <label class="govuk-label govuk-radios__label" for="framework-10">
                                                Apprenticeships Training and Related Services (RM3823)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-11" name="framework" type="radio" value="rm60034">
                                            <label class="govuk-label govuk-radios__label" for="framework-11">
                                                Behavioural Insights (RM6004)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-12" name="framework" type="radio" value="RM3774">
                                            <label class="govuk-label govuk-radios__label" for="framework-12">
                                                Apprenticeships Training and Related Services (RM3823)
                                            </label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="framework-13" name="framework" type="radio" value="RM3823">
                                            <label class="govuk-label govuk-radios__label" for="framework-13">
                                                Campaign Solutions (RM3774)
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>




                            <div class="govuk-accordion__section ccs-accordion__section--clean govuk-form-group govuk-form-group--enclosure">

                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
                                        <span class="govuk-accordion__section-button" id="accordion-with-summary-sections-heading-2">
                                            Lot
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-with-summary-sections-content-2" class="govuk-accordion__section-content" aria-labelledby="accordion-with-summary-sections-heading-2">
                                    <div class="govuk-radios govuk-radios--small govuk-radios--conditional" data-module="radios">

                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="show-all-suppliers-on-framwork-1" name="lot" type="radio" value="england">
                                            <label class="govuk-label govuk-radios__label" for="show-all-suppliers-on-framwork-1">
                                                Show all suppliers on framework
                                            </label>
                                        </div>

                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="how-contacted-conditional-3" name="lot" type="radio" value="text" data-aria-controls="conditional-how-contacted-conditional-3">
                                            <label class="govuk-label govuk-radios__label" for="how-contacted-conditional-3">
                                                Show suppliers on a specific lot
                                            </label>
                                        </div>
                                        <div class="govuk-radios__conditional govuk-radios__conditional--small govuk-radios__conditional--hidden" id="conditional-how-contacted-conditional-3">

                                            <div class="govuk-form-group">
                                                <fieldset class="govuk-fieldset">
                                                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m" style="margin-bottom: 0;">
                                                        <h1 class="govuk-fieldset__heading visuallyhidden">
                                                            Select lot to filter by
                                                        </h1>
                                                    </legend>
                                                    <div class="govuk-radios govuk-radios--small ccs-radios--nested">
                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="where-do-you-live-1" name="lot-filter-nested" type="radio" value="england">
                                                            <label class="govuk-label govuk-radios__label" for="where-do-you-live-1">
                                                                Lot 1 Data access services
                                                            </label>
                                                        </div>
                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="where-do-you-live-2" name="lot-filter-nested" type="radio" value="scotland">
                                                            <label class="govuk-label govuk-radios__label" for="where-do-you-live-2">
                                                                Lot 2 Local connectivity services
                                                            </label>
                                                        </div>
                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="where-do-you-live-3" name="lot-filter-nested" type="radio" value="wales">
                                                            <label class="govuk-label govuk-radios__label" for="where-do-you-live-3">
                                                                Lot 3 Voice telephony services
                                                            </label>
                                                        </div>
                                                        <div class="govuk-radios__item govuk-radios__item--small">
                                                            <input class="govuk-radios__input govuk-radios__input--small" id="where-do-you-live-4" name="lot-filter-nested" type="radio" value="northern-ireland">
                                                            <label class="govuk-label govuk-radios__label" for="where-do-you-live-4">
                                                                Lot 4 IP telephony services
                                                            </label>
                                                        </div>
                                                    </div>
                                                </fieldset>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>




                            <div class="govuk-accordion__section ccs-accordion__section--clean govuk-form-group govuk-form-group--enclosure">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
                                        <span class="govuk-accordion__section-button" id="accordion-with-summary-sections-heading-3">
                                        Results per page
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-with-summary-sections-content-3" class="govuk-accordion__section-content" aria-labelledby="accordion-with-summary-sections-heading-3">
                                    <div class="govuk-radios govuk-radios--small">
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="results-per-page-1" name="results-per-page" type="radio" value="england">
                                            <label class="govuk-label govuk-radios__label" for="results-per-page-1">10</label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="results-per-page-2" name="results-per-page" type="radio" value="scotland">
                                            <label class="govuk-label govuk-radios__label" for="results-per-page-2">25</label>
                                        </div>
                                        <div class="govuk-radios__item govuk-radios__item--small">
                                            <input class="govuk-radios__input govuk-radios__input--small" id="results-per-page-3" name="results-per-page" type="radio" value="wales">
                                            <label class="govuk-label govuk-radios__label" for="results-per-page-3">50</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <button class="govuk-button" data-module="govuk-button">
                            Filter
                        </button>



                    </form>

                </div>
                <div class="govuk-grid-column-two-thirds">


                    {#{{ dump(results) }}#}


                    <h2 class="govuk-heading-m ccs-font-weight-semibold govuk-!-font-size-24">{{ pagination.totalResults }} suppliers found</h2>

                    <div class="ccs-filters-summary">
                        <div class="ccs-filters-summary__facets">
                            <span class="ccs-filters-summary__label">In</span>
                            <ul class="ccs-filters-summary__list ccs-filters-summary__facets__list">
                                <li class="ccs-filters-summary__facet">
                                    <a href="#" class="ccs-filters-summary__facet__cancel">Education Technology (RM6103)</a>
                                </li>
                                <li class="ccs-filters-summary__facet">
                                    <a href="#" class="ccs-filters-summary__facet__cancel">Lot 2: Broadband Fibre Infrastructure</a>
                                </li>
                                <li class="ccs-filters-summary__facet">
                                    <a href="#" class="ccs-filters-summary__facet__cancel">Behavioural Insights (RM6004)</a>
                                </li>
                            </ul>
                        </div>
                        <div class="ccs-filters-summary__facets">
                            <span class="ccs-filters-summary__label">Containing</span>
                            <ul class="ccs-filters-summary__list">
                                <li class="ccs-filters-summary__facet">
                                    <a href="#" class="ccs-filters-summary__facet__cancel">Ltd</a>
                                </li>
                            </ul>
                        </div>
                    </div>


                    <div class="apollo-enclosure ccs-results-notification">
                        <p><strong>Are you running a further competition or conducting an expression of interest?</strong></p>
                        <a href="#" class="govuk-button ccs-button--tight">View supplier contact details</a>
                    </div>
                    

                    {% if results %}

                    <ul class="govuk-list govuk-list--suppliers">

                    {% for item in results %}

                        {% set name = item.content.name %}

                        <li>
                            {#{{ dump(item) }}#}
                            <h3 class="govuk-heading-m ccs-heading-link ccs-font-weight-semibold govuk-!-font-size-22"><a href="{{ path('suppliers_show', {'id': item.content.id, 'slug': slugify(name)} ) }}">{{ name }}</a></h3>

                            <ul class="govuk-list govuk-!-font-size-17featured">
                                {% for framework in item.content.live_frameworks %}

                                    <li>{{ framework.title }} ({{ framework.rm_number }}) {% if framework.status == "Expired - Data Still Received" %}<strong class="govuk-tag govuk-tag--subtle">Expired</strong>{% endif %}</li>

                                {% endfor %}
                            </ul>

                        </li>

                    {% endfor %}

                        </ul>

                        {% endif %}




                    {# Pagination #}

                    {% if query is defined %}
                        {%  set pagination_data = {'pagination': pagination, 'route': 'suppliers_search', 'options': {'q': query}} %}
                    {% else %}
                        {%  set pagination_data = {'pagination': pagination, 'route': 'suppliers_list', 'options': {} } %}
                    {%  endif %}
                    
                    {% if pagination.totalPages > 1 %}
                        {{ include('includes/pagination.html.twig', pagination_data) }}
                    {% endif %}



                </div>
            </div>



        </main>
    </div>



{% endblock %}
