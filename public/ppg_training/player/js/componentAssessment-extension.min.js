(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1242:function(e,s,t){"use strict";const{registerEpics:n,registerReducer:o}=t(4),m=t(1457),{componentAssessmentComponentCompleteEpic:p,componentAssessmentCompletedEpic:a,componentAssessmentResetQuestionEpic:E,registerTrackingMapEpic:c,scormRestoreEpic:r}=t(1458);n(p,a,E,c,r),o("componentAssessment",m)},1411:function(e,s,t){"use strict";s.COMPONENT_ASSESSMENT_COMPLETED="COMPONENT_ASSESSMENT_COMPLETED",s.COMPONENT_ASSESSMENT_SCORM_RESTORE="COMPONENT_ASSESSMENT_SCORM_RESTORE",s.COMPONENT_ASSESSMENT_RESET="COMPONENT_ASSESSMENT_RESET",s.componentAssessmentCompleted=e=>({type:s.COMPONENT_ASSESSMENT_COMPLETED,payload:e}),s.componentAssessmentScormRestore=e=>({type:s.COMPONENT_ASSESSMENT_SCORM_RESTORE,payload:e}),s.componentAssessmentReset=e=>({type:s.COMPONENT_ASSESSMENT_RESET,payload:e})},1457:function(e,s,t){"use strict";const n=t(304),o=t(10),m=t(8),p=t(18),{SETUP_APP:a}=t(9),{RESTORE_EXTENSION:E}=t(96),{COMPONENT_ASSESSMENT_COMPLETED:c,COMPONENT_ASSESSMENT_RESET:r,COMPONENT_ASSESSMENT_SCORM_RESTORE:_}=t(1411),S={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_assessmentScore:0,_assessmentComponentId:null,_assessmentAttemptsTaken:0};e.exports=(e=S,s)=>{switch(s.type){case a:return function(e,s){const{course:t,components:o}=s.payload;if(m(t,"_courseAssessment._isEnabled",!1))return e;const a=p(o,{_isAssessmentEnabled:!0});if(!a)return e;return n({},e,{_isEnabled:!0,_assessmentComponentId:a._id})}(e,s);case c:return n({},e,s.payload);case r:return n({},e,{_assessmentAttemptsTaken:e._assessmentAttemptsTaken+1});case _:return n({},e,s.payload);case E:if("componentAssessment"===s.payload.extensionName)return o({},e,s.payload.extensionData);default:return e}}},1458:function(e,s,t){"use strict";const n=t(8),o=t(304),{Observable:m}=t(5),{SETUP_APP:p,APP_READY:a}=t(9),{COMPONENT_COMPLETED:E,RESET_QUESTION:c,updateComponents:r}=t(61),{trackableChange:_}=t(96),{registerTrackingMap:S}=t(4),{COMPONENT_ASSESSMENT_COMPLETED:i,componentAssessmentCompleted:l,componentAssessmentReset:d,componentAssessmentScormRestore:T}=t(1411),A=t(1459);s.componentAssessmentComponentCompleteEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===E&&e.payload.componentId===t._assessmentComponentId}).map(e=>{const{components:t,componentAssessment:o}=s.getState(),m=t[e.payload.componentId];let p=m._isPassed;if(!m._isPassed)if(m._allowAssessmentRetake){const e=n(m,"_assessmentRetakeAttempts",1);p=!n(m,"_allowUnlimitedRetakeAttempts",!1)&&o._assessmentAttemptsTaken===e}else p=!0;const a={_isComplete:p,_isPassed:m._isPassed,_assessmentScore:m._assessmentScore};return l(a)}),s.componentAssessmentCompletedEpic=e=>e.ofType(i).mapTo(_()),s.componentAssessmentResetQuestionEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===c&&e.payload.componentId===t._assessmentComponentId}).map(()=>d()),s.registerTrackingMapEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===p}).do(()=>{S("componentAssessment",A,"extensions")}).ignoreElements(),s.scormRestoreEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t,scorm:n}=s.getState();return!!(n&&n._isEnabled&&t._isEnabled&&e.type===a)}).mergeMap(()=>{const{scorm:e,components:t}=s.getState(),n=[];if(e&&e.suspendData){const{_isAssessmentComplete:s,_isPassed:m,_score:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}=e.suspendData;if(s){n.push(T({_isComplete:s,_isPassed:m,_assessmentScore:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}));const e=t[a];if(e){const s=o({},e,{_isPassed:m,_assessmentScore:p});n.push(r({[a]:s}))}}}return n.length?m.of(...n):m.empty()})},1459:function(e,s,t){"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentComponentId:{fieldKey:"_assessmentComponentId",type:"String",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"_assessmentAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0}}}}]);