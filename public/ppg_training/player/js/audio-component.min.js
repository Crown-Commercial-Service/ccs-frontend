(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1246:function(e,t,i){"use strict";const{registerComponent:n}=i(4),s=i(1659),o=i(1661),{setAudioItemAsComplete:r}=i(1512);n("audio",{component:s,actions:{setAudioItemAsComplete:r},reducer:o,trackingMap:i(1662)})},1370:function(e,t,i){"use strict";const n=i(7);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},1374:function(e,t,i){"use strict";const n=i(39),s=i(10),o=i(2),r=i(0),a=i(7),l=i(1),d=i(219),{Trail:m,config:p,animated:c,interpolate:u}=i(77),{connect:h}=i(6),_=o({displayName:"Grid",propTypes:{isList:l.bool.isRequired,isRTL:l.bool.isRequired,shouldIgnoreScreenSize:l.bool.isRequired,animations:l.object,gridItemStyle:l.object,gridItemInnerStyle:l.object,windowWidth:l.number.isRequired,getGridItemInnerStyle:l.func,hasGridItemInnerPadding:l.bool,className:l.string,columns:l.number,separatorBorder:l.string},getDefaultProps:()=>({isList:!1,isRTL:!1,shouldIgnoreScreenSize:!1,gridItemStyle:{},gridItemInnerStyle:{},hasGridItemInnerPadding:!0,animations:{_slideInX:{_isEnabled:!1},_slideInY:{_isEnabled:!1},_fadeInItem:{_isEnabled:!1},_scaleInItem:{_isEnabled:!1},_easing:"default"}}),getInitialState(){return{columns:this.getColumns(window.innerWidth,this.props.columns),isVisible:!1,_animationEnded:!1}},componentDidMount(){this._isMounted=!0},componentWillUnmount(){this._isMounted=!1},UNSAFE_componentWillReceiveProps(e){const{props:t}=this,i=e.windowWidth!==t.windowWidth,n=t.columns!==e.columns;(i||n)&&this.updateColumns(e.windowWidth,e.columns)},getGridClassName(){return a("ev-grid",this.props.className)},getColumns(e,t){if(this.props.shouldIgnoreScreenSize)return t;return e>=768?t||2:e<768&&e>=520?2:1},updateColumns(e,t){this._isMounted&&this.setState({columns:this.getColumns(e,t)})},getAnimationsEnabled(){const{animations:e}=this.props;let t=!1;return e&&(t=0!==n(e).values().filter({_isEnabled:!0}).value().length),t},getGridItemStyle(e,t,i,n,o,r){const{isRTL:a}=this.props,{_animationEnded:l}=this.state,d=100/this.state.columns,m=s({flex:d+"%",textAlign:"center",boxSizing:"border-box",margin:"10px 0"},this.props.gridItemStyle);t&&(m.opacity=i,m.transform=u([n,o,r],(e,t,i)=>`translate(${e}%,${t}%) scale(${i})`),l&&(m.transform="none"));const p=this.props.children.length%this.state.columns;if((e+1)%this.state.columns!=0&&this.props.separatorBorder&&(m.borderRight=this.props.separatorBorder),0!==p)if(1===p){e===this.props.children.length-1&&(m.margin="auto")}else{if(e===this.props.children.length-p){let e=d/2;2===p&&4===this.state.columns&&(e=d),a?m.marginRight=e+"%":m.marginLeft=e+"%"}}return m},getGridItemInnerStyle(e){const{gridItemInnerStyle:t,getGridItemInnerStyle:i,hasGridItemInnerPadding:n}=this.props,o=i?i(e):{};return s({padding:n?"0 10px":0,boxSizing:"border-box"},t,o)},getVisibilitySensorActive(){return!1===this.state.isVisible},onVisibilityChange(e){e&&this.setState({isVisible:!0})},getSpringFrom(){const{animations:e}=this.props,{_slideInX:t,_slideInY:i,_fadeIn:n,_scaleIn:s}=e;return{x:t&&t._isEnabled?t._isReverseDirection?-t._from:t._from:0,y:i&&i._isEnabled?i._isReverseDirection?-i._from:i._from:0,opacity:n&&n._isEnabled?n._from/100:1,scale:s&&s._isEnabled?s._from/100:1}},getSpringTo(){const{isVisible:e}=this.state;return e?{opacity:1,x:0,y:0,scale:1}:this.getSpringFrom()},onStart(){this.setState({_animationEnded:!1})},onRest(){this.setState({_animationEnded:!0})},renderGridItems(e){const{isList:t,children:i,animations:n}=this.props,s=t?c.li:c.div;return e?r.createElement(m,{native:!0,key:i.length,from:this.getSpringFrom(),to:this.getSpringTo(),onStart:this.onStart,onRest:this.onRest,config:p[n._easing]||p.default,keys:i.map((e,t)=>t),items:i},(e,t)=>({opacity:i,x:n,y:o,scale:a})=>r.createElement(s,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!0,i,n,o,a)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e))):i.map((e,t)=>r.createElement(s,{key:t,className:"ev-grid-item",style:this.getGridItemStyle(t,!1)},r.createElement("div",{className:"ev-grid-item-inner",style:this.getGridItemInnerStyle(t)},e)))},render(){const{isList:e}=this.props,t=e?"ul":"div";return this.getAnimationsEnabled()?r.createElement(d,{active:this.getVisibilitySensorActive(),partialVisibility:!0,scrollCheck:!0,scrollThrottle:10,intervalDelay:250,minTopValue:200,onChange:this.onVisibilityChange},r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!0))):r.createElement(t,{className:this.getGridClassName()},this.renderGridItems(!1))}});e.exports=h(({device:e,course:t})=>({windowWidth:e.windowWidth,isRTL:t._isRTL}))(_)},1512:function(e,t,i){"use strict";t.SET_AUDIO_ITEM_AS_COMPLETE="SET_AUDIO_ITEM_AS_COMPLETE",t.setAudioItemAsComplete=(e,i)=>({type:t.SET_AUDIO_ITEM_AS_COMPLETE,payload:{componentId:e,itemId:i}})},1659:function(e,t,i){"use strict";const n=i(32),s=i(31),o=i(2),r=i(1),a=i(0),l=i(7),{Component:d}=i(468),m=i(1374),p=i(1370),c=i(1660),u=o({displayName:"Audio",propTypes:{component:r.object.isRequired,showPrompt:r.func.isRequired,setAudioItemAsComplete:r.func.isRequired,setComponentAsReady:r.func.isRequired,setComponentAsViewed:r.func.isRequired,setComponentAsStarted:r.func.isRequired,setComponentAsComplete:r.func.isRequired,styles:r.object,isPageReady:r.bool.isRequired},componentDidMount:function(){const{props:e}=this;this.props.setComponentAsReady(e.component._id)},componentWillReceiveProps:function(e){const{props:t}=this;n(e.component._items,e=>e._isComplete).length!==e.component._items.length||e.component._isComplete||t.setComponentAsComplete(t.component._id)},setAudioItemAsComplete:function(e){const{props:t}=this;t.setAudioItemAsComplete(t.component._id,e)},setComponentAsStarted:function(){const{props:e}=this;e.component._hasStarted||e.setComponentAsStarted(e.component._id)},onTranscriptButtonClicked:function(e){const t={body:e._transcript.body,_glyph:{_type:"icon",_className:"ev-icon-audio-book"}};this.props.showPrompt(t)},onVisibilityChange:function(e,{top:t,bottom:i}){const{props:n}=this;t&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&n.setComponentAsViewed(n.component._id)},getIsVisibilitySensorActive:function(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},getClassName:function(){const{component:e}=this.props;return l(p(e),{"ev-has-grid-layout":e._enableColumnLayout})},renderItems:function(){const{component:e}=this.props;return s(e._items,t=>a.createElement(c,{key:t._id,item:t,enableColumnLayout:e._enableColumnLayout,shouldDisplayControls:e._shouldDisplayControls,setComponentAsStarted:this.setComponentAsStarted,setAudioItemAsComplete:this.setAudioItemAsComplete,onTranscriptButtonClicked:this.onTranscriptButtonClicked}))},renderItemsContainer:function(){const{component:e}=this.props;return e._enableColumnLayout?a.createElement(m,{isList:!0,columns:e._numberOfColumns,animations:this.props.component._animations},this.renderItems()):a.createElement("ul",{className:"ev-audio-items"},this.renderItems())},render:function(){const{props:e}=this;return a.createElement(d,{component:e.component,styles:e.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChange},a.createElement("div",{className:this.getClassName()},this.renderItemsContainer()))}});e.exports=u},1660:function(e,t,i){"use strict";const n=i(8),s=i(2),o=i(1),r=i(0),a=i(48),l=i(76),d=i(219),m=i(119),p=i(16),c=s({displayName:"AudioItem",propTypes:{item:o.object.isRequired,enableColumnLayout:o.bool,shouldDisplayControls:o.bool,setAudioItemAsComplete:o.func.isRequired,setComponentAsStarted:o.func.isRequired,onTranscriptButtonClicked:o.func.isRequired},mixins:[p],componentDidUpdate:function({item:e}){const{props:t,_audio:i}=this,s=l(n(t.item,"_audio.mp3")),o=l(n(e,"_audio.mp3"));i&&s!==o&&i.load()},setAudioItemAsComplete:function(){const{props:e}=this;e.setAudioItemAsComplete(e.item._id)},onAudioButtonClicked:function(e){e.preventDefault();const t=a.findDOMNode(this._audio);t.paused?(t.currentTime=0,t.play()):t.pause()},onPlay:function(){const{props:e}=this;"play"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete(),e.setComponentAsStarted()},onTranscriptButtonClicked:function(e){const{props:t}=this;e.preventDefault(),"play"!==t.item._setCompletionOn&&"ended"!==t.item._setCompletionOn||t.item._isComplete||this.setAudioItemAsComplete(),t.setComponentAsStarted(),t.onTranscriptButtonClicked(t.item,e.currentTarget)},onAudioEnded:function(){const{props:e}=this;"ended"!==e.item._setCompletionOn||e.item._isComplete||this.setAudioItemAsComplete()},onVisibilityChanged:function(e,{top:t,bottom:i}){t&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&this.setAudioItemAsComplete()},getIsVisibilitySensorActive:function(){const{item:e}=this.props;return"inview"===n(e,"_setCompletionOn","inview")&&!e._isComplete},renderAudioSource:function(){const{item:e}=this.props;let t=e._audio.mp3;return t&&(t=l(t)),e._audio._isExternalLink&&(t=e._audio.externalUrl),r.createElement("source",{src:t,type:"audio/mp3"})},renderAudioElement:function(){const{item:e,shouldDisplayControls:t}=this.props;let i=!0,n="ev-audio-player";return e._audio.poster&&!t&&(i=!1,n+=" ev-display-none"),r.createElement("audio",{ref:e=>this._audio=e,preload:"auto",className:n,onPlay:this.onPlay,onEnded:this.onAudioEnded,controls:i,controlsList:"nodownload"},this.renderAudioSource())},renderAudioButton:function(){const{item:e}=this.props;if(e._audio.poster)return r.createElement("button",{className:"ev-audio-player-button",onClick:this.onAudioButtonClicked},r.createElement(m,{graphicSrc:e._audio.poster,altText:e._audio.alt,autoSize:!1}))},renderTranscriptButton:function(){const{item:e}=this.props;if(e._transcript&&e._transcript.body)return r.createElement("div",{className:"ev-transcript-button-container"},r.createElement("button",{className:"ev-button ev-primary ev-transcript-button",onClick:this.onTranscriptButtonClicked},e._transcript.button))},render:function(){const{props:e}=this,t=e.enableColumnLayout?"div":"li";return r.createElement(d,{active:this.getIsVisibilitySensorActive(),delay:600,partialVisibility:!0,onChange:this.onVisibilityChanged},r.createElement(t,{className:"ev-audio-item"},this.renderAudioButton(),this.renderAudioElement(),this.renderTranscriptButton()))}});e.exports=c},1661:function(e,t,i){"use strict";const n=i(31),s=i(10),{SET_AUDIO_ITEM_AS_COMPLETE:o}=i(1512);e.exports=function(e,t){if(t.type===o){const i=n(e._items,e=>e._id===t.payload.itemId?s({},e,{_isComplete:!0}):e);return s({},e,{_items:i})}return e}},1662:function(e,t,i){"use strict";e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0}}}}}}]);